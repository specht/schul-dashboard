<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Main
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Main";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (M)</a> &raquo;
    
    
    <span class="title">Main</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Main
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Sinatra::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Sinatra::Base</li>
          
            <li class="next">Main</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Neo4jBolt</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>src/ruby/pry.rb<span class="defines">,<br />
  src/ruby/main.rb,<br /> src/ruby/credentials.rb,<br /> src/ruby/include/gev.rb,<br /> src/ruby/include/otp.rb,<br /> src/ruby/include/pk5.rb,<br /> src/ruby/include/sms.rb,<br /> src/ruby/include/aula.rb,<br /> src/ruby/include/file.rb,<br /> src/ruby/include/hack.rb,<br /> src/ruby/include/ical.rb,<br /> src/ruby/include/poll.rb,<br /> src/ruby/include/user.rb,<br /> src/ruby/include/vote.rb,<br /> src/ruby/include/admin.rb,<br /> src/ruby/include/color.rb,<br /> src/ruby/include/event.rb,<br /> src/ruby/include/image.rb,<br /> src/ruby/include/jitsi.rb,<br /> src/ruby/include/login.rb,<br /> src/ruby/include/salzh.rb,<br /> src/ruby/include/stats.rb,<br /> src/ruby/include/tests.rb,<br /> src/ruby/include/theme.rb,<br /> src/ruby/include/cypher.rb,<br /> src/ruby/include/groups.rb,<br /> src/ruby/include/lesson.rb,<br /> src/ruby/include/matrix.rb,<br /> src/ruby/include/tablet.rb,<br /> src/ruby/include/tresor.rb,<br /> src/ruby/include/comment.rb,<br /> src/ruby/include/message.rb,<br /> src/ruby/include/monitor.rb,<br /> src/ruby/include/website.rb,<br /> src/ruby/include/angebote.rb,<br /> src/ruby/include/ext_user.rb,<br /> src/ruby/include/homework.rb,<br /> src/ruby/include/phishing.rb,<br /> src/ruby/include/projekte.rb,<br /> src/ruby/include/techpost.rb,<br /> src/ruby/include/bib_login.rb,<br /> src/ruby/include/directory.rb,<br /> src/ruby/include/zeugnisse.rb,<br /> src/ruby/include/tablet_set.rb,<br /> src/ruby/include/development.rb,<br /> src/ruby/include/test_events.rb,<br /> src/ruby/include/public_event.rb,<br /> src/ruby/include/lehrbuchverein.rb</span>
</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="MAX_HACK_LEVEL-constant" class="">MAX_HACK_LEVEL =
          
        </dt>
        <dd><pre class="code"><span class='int'>10</span></pre></dd>
      
        <dt id="NAMES-constant" class="">NAMES =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>babbage</span><span class='words_sep'> </span><span class='tstring_content'>boole</span><span class='words_sep'> </span><span class='tstring_content'>catmull</span><span class='words_sep'> </span><span class='tstring_content'>cerf</span><span class='words_sep'> </span><span class='tstring_content'>chomsky</span><span class='words_sep'> </span><span class='tstring_content'>codd</span><span class='words_sep'> </span><span class='tstring_content'>dijkstra</span><span class='words_sep'>
</span><span class='tstring_content'>engelbart</span><span class='words_sep'> </span><span class='tstring_content'>feinler</span><span class='words_sep'> </span><span class='tstring_content'>hamilton</span><span class='words_sep'> </span><span class='tstring_content'>hamming</span><span class='words_sep'> </span><span class='tstring_content'>hejlsberg</span><span class='words_sep'> </span><span class='tstring_content'>hopper</span><span class='words_sep'> </span><span class='tstring_content'>kay</span><span class='words_sep'> </span><span class='tstring_content'>knuth</span><span class='words_sep'> </span><span class='tstring_content'>lamport</span><span class='words_sep'>
</span><span class='tstring_content'>lovelace</span><span class='words_sep'> </span><span class='tstring_content'>minsky</span><span class='words_sep'> </span><span class='tstring_content'>ritchie</span><span class='words_sep'> </span><span class='tstring_content'>stroustrup</span><span class='words_sep'> </span><span class='tstring_content'>thompson</span><span class='words_sep'> </span><span class='tstring_content'>torvalds</span><span class='words_sep'> </span><span class='tstring_content'>turing</span><span class='words_sep'> </span><span class='tstring_content'>wirth</span><span class='words_sep'> </span><span class='tstring_content'>zuse</span><span class='tstring_end'>)</span></span></pre></dd>
      
        <dt id="FRUIT-constant" class="">FRUIT =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>apfel</span><span class='words_sep'> </span><span class='tstring_content'>birne</span><span class='words_sep'> </span><span class='tstring_content'>tomate</span><span class='words_sep'> </span><span class='tstring_content'>kiwi</span><span class='words_sep'> </span><span class='tstring_content'>melone</span><span class='words_sep'> </span><span class='tstring_content'>ananas</span><span class='words_sep'> </span><span class='tstring_content'>kartoffel</span><span class='words_sep'> </span><span class='tstring_content'>zitrone</span><span class='words_sep'> </span><span class='tstring_content'>orange</span><span class='words_sep'> </span><span class='tstring_content'>salat</span><span class='tstring_end'>)</span></span></pre></dd>
      
        <dt id="SPACE_EVENTS-constant" class="">SPACE_EVENTS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1957-10-04</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4. Oktober 1957</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ startete &lt;b&gt;Sputnik 1&lt;/b&gt;, der erste künstliche Satellit, in die Umlaufbahn der Erde.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1957-11-03</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3. November 1957</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ startete &lt;b&gt;Sputnik 2&lt;/b&gt; in die Umlaufbahn der Erde. An Bord befand sich &lt;b&gt;Laika&lt;/b&gt;, das erste Tier im Weltraum.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1959-10-07</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7. Oktober 1959</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ sendete &lt;b&gt;Luna 3&lt;/b&gt; die ersten Bilder von der Rückseite des Mondes.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1961-04-12</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12. April 1961</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ flog &lt;b&gt;Juri Gagarin&lt;/b&gt; als erster Mensch in den Weltraum.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1962-12-14</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14. Dezember 1962</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ sendete &lt;b&gt;Mariner 2&lt;/b&gt; erstmals Daten von der Venus zur Erde.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1963-06-16</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16. Juni 1963</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ flog &lt;b&gt;Walentina Tereschkowa&lt;/b&gt; als erste Frau ins Weltall.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1965-03-18</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>18. März 1965</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Am __DATE__ unternahm &lt;b&gt;Alexei Leonow&lt;/b&gt; den ersten Weltraumspaziergang.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="PRIMES-constant" class="">PRIMES =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>2</span><span class='words_sep'>	</span><span class='tstring_content'>3</span><span class='words_sep'>	</span><span class='tstring_content'>5</span><span class='words_sep'>	</span><span class='tstring_content'>7</span><span class='words_sep'>	</span><span class='tstring_content'>11</span><span class='words_sep'>	</span><span class='tstring_content'>13</span><span class='words_sep'>	</span><span class='tstring_content'>17</span><span class='words_sep'>	</span><span class='tstring_content'>19</span><span class='words_sep'>	</span><span class='tstring_content'>23</span><span class='words_sep'>	</span><span class='tstring_content'>29</span><span class='words_sep'>
</span><span class='tstring_content'>31</span><span class='words_sep'>	</span><span class='tstring_content'>37</span><span class='words_sep'>	</span><span class='tstring_content'>41</span><span class='words_sep'>	</span><span class='tstring_content'>43</span><span class='words_sep'>	</span><span class='tstring_content'>47</span><span class='words_sep'>	</span><span class='tstring_content'>53</span><span class='words_sep'>	</span><span class='tstring_content'>59</span><span class='words_sep'>	</span><span class='tstring_content'>61</span><span class='words_sep'>	</span><span class='tstring_content'>67</span><span class='words_sep'>	</span><span class='tstring_content'>71</span><span class='words_sep'>
</span><span class='tstring_content'>73</span><span class='words_sep'>	</span><span class='tstring_content'>79</span><span class='words_sep'>	</span><span class='tstring_content'>83</span><span class='words_sep'>	</span><span class='tstring_content'>89</span><span class='words_sep'>	</span><span class='tstring_content'>97</span><span class='words_sep'>	</span><span class='tstring_content'>101</span><span class='words_sep'>	</span><span class='tstring_content'>103</span><span class='words_sep'>	</span><span class='tstring_content'>107</span><span class='words_sep'>	</span><span class='tstring_content'>109</span><span class='words_sep'>	</span><span class='tstring_content'>113</span><span class='words_sep'>
</span><span class='tstring_content'>127</span><span class='words_sep'>	</span><span class='tstring_content'>131</span><span class='words_sep'>	</span><span class='tstring_content'>137</span><span class='words_sep'>	</span><span class='tstring_content'>139</span><span class='words_sep'>	</span><span class='tstring_content'>149</span><span class='words_sep'>	</span><span class='tstring_content'>151</span><span class='words_sep'>	</span><span class='tstring_content'>157</span><span class='words_sep'>	</span><span class='tstring_content'>163</span><span class='words_sep'>	</span><span class='tstring_content'>167</span><span class='words_sep'>	</span><span class='tstring_content'>173</span><span class='words_sep'>
</span><span class='tstring_content'>179</span><span class='words_sep'>	</span><span class='tstring_content'>181</span><span class='words_sep'>	</span><span class='tstring_content'>191</span><span class='words_sep'>	</span><span class='tstring_content'>193</span><span class='words_sep'>	</span><span class='tstring_content'>197</span><span class='words_sep'>	</span><span class='tstring_content'>199</span><span class='words_sep'>	</span><span class='tstring_content'>211</span><span class='words_sep'>	</span><span class='tstring_content'>223</span><span class='words_sep'>	</span><span class='tstring_content'>227</span><span class='words_sep'>	</span><span class='tstring_content'>229</span><span class='words_sep'>
</span><span class='tstring_content'>233</span><span class='words_sep'>	</span><span class='tstring_content'>239</span><span class='words_sep'>	</span><span class='tstring_content'>241</span><span class='words_sep'>	</span><span class='tstring_content'>251</span><span class='words_sep'>	</span><span class='tstring_content'>257</span><span class='words_sep'>	</span><span class='tstring_content'>263</span><span class='words_sep'>	</span><span class='tstring_content'>269</span><span class='words_sep'>	</span><span class='tstring_content'>271</span><span class='words_sep'>	</span><span class='tstring_content'>277</span><span class='words_sep'>	</span><span class='tstring_content'>281</span><span class='words_sep'>
</span><span class='tstring_content'>283</span><span class='words_sep'>	</span><span class='tstring_content'>293</span><span class='words_sep'>	</span><span class='tstring_content'>307</span><span class='words_sep'>	</span><span class='tstring_content'>311</span><span class='words_sep'>	</span><span class='tstring_content'>313</span><span class='words_sep'>	</span><span class='tstring_content'>317</span><span class='words_sep'>	</span><span class='tstring_content'>331</span><span class='words_sep'>	</span><span class='tstring_content'>337</span><span class='words_sep'>	</span><span class='tstring_content'>347</span><span class='words_sep'>	</span><span class='tstring_content'>349</span><span class='words_sep'>
</span><span class='tstring_content'>353</span><span class='words_sep'>	</span><span class='tstring_content'>359</span><span class='words_sep'>	</span><span class='tstring_content'>367</span><span class='words_sep'>	</span><span class='tstring_content'>373</span><span class='words_sep'>	</span><span class='tstring_content'>379</span><span class='words_sep'>	</span><span class='tstring_content'>383</span><span class='words_sep'>	</span><span class='tstring_content'>389</span><span class='words_sep'>	</span><span class='tstring_content'>397</span><span class='words_sep'>	</span><span class='tstring_content'>401</span><span class='words_sep'>	</span><span class='tstring_content'>409</span><span class='words_sep'>
</span><span class='tstring_content'>419</span><span class='words_sep'>	</span><span class='tstring_content'>421</span><span class='words_sep'>	</span><span class='tstring_content'>431</span><span class='words_sep'>	</span><span class='tstring_content'>433</span><span class='words_sep'>	</span><span class='tstring_content'>439</span><span class='words_sep'>	</span><span class='tstring_content'>443</span><span class='words_sep'>	</span><span class='tstring_content'>449</span><span class='words_sep'>	</span><span class='tstring_content'>457</span><span class='words_sep'>	</span><span class='tstring_content'>461</span><span class='words_sep'>	</span><span class='tstring_content'>463</span><span class='words_sep'>
</span><span class='tstring_content'>467</span><span class='words_sep'>	</span><span class='tstring_content'>479</span><span class='words_sep'>	</span><span class='tstring_content'>487</span><span class='words_sep'>	</span><span class='tstring_content'>491</span><span class='words_sep'>	</span><span class='tstring_content'>499</span><span class='words_sep'>	</span><span class='tstring_content'>503</span><span class='words_sep'>	</span><span class='tstring_content'>509</span><span class='words_sep'>	</span><span class='tstring_content'>521</span><span class='words_sep'>	</span><span class='tstring_content'>523</span><span class='words_sep'>	</span><span class='tstring_content'>541</span><span class='words_sep'>
</span><span class='tstring_content'>547</span><span class='words_sep'>	</span><span class='tstring_content'>557</span><span class='words_sep'>	</span><span class='tstring_content'>563</span><span class='words_sep'>	</span><span class='tstring_content'>569</span><span class='words_sep'>	</span><span class='tstring_content'>571</span><span class='words_sep'>	</span><span class='tstring_content'>577</span><span class='words_sep'>	</span><span class='tstring_content'>587</span><span class='words_sep'>	</span><span class='tstring_content'>593</span><span class='words_sep'>	</span><span class='tstring_content'>599</span><span class='words_sep'>	</span><span class='tstring_content'>601</span><span class='words_sep'>
</span><span class='tstring_content'>607</span><span class='words_sep'>	</span><span class='tstring_content'>613</span><span class='words_sep'>	</span><span class='tstring_content'>617</span><span class='words_sep'>	</span><span class='tstring_content'>619</span><span class='words_sep'>	</span><span class='tstring_content'>631</span><span class='words_sep'>	</span><span class='tstring_content'>641</span><span class='words_sep'>	</span><span class='tstring_content'>643</span><span class='words_sep'>	</span><span class='tstring_content'>647</span><span class='words_sep'>	</span><span class='tstring_content'>653</span><span class='words_sep'>	</span><span class='tstring_content'>659</span><span class='words_sep'>
</span><span class='tstring_content'>661</span><span class='words_sep'>	</span><span class='tstring_content'>673</span><span class='words_sep'>	</span><span class='tstring_content'>677</span><span class='words_sep'>	</span><span class='tstring_content'>683</span><span class='words_sep'>	</span><span class='tstring_content'>691</span><span class='words_sep'>	</span><span class='tstring_content'>701</span><span class='words_sep'>	</span><span class='tstring_content'>709</span><span class='words_sep'>	</span><span class='tstring_content'>719</span><span class='words_sep'>	</span><span class='tstring_content'>727</span><span class='words_sep'>	</span><span class='tstring_content'>733</span><span class='words_sep'>
</span><span class='tstring_content'>739</span><span class='words_sep'>	</span><span class='tstring_content'>743</span><span class='words_sep'>	</span><span class='tstring_content'>751</span><span class='words_sep'>	</span><span class='tstring_content'>757</span><span class='words_sep'>	</span><span class='tstring_content'>761</span><span class='words_sep'>	</span><span class='tstring_content'>769</span><span class='words_sep'>	</span><span class='tstring_content'>773</span><span class='words_sep'>	</span><span class='tstring_content'>787</span><span class='words_sep'>	</span><span class='tstring_content'>797</span><span class='words_sep'>	</span><span class='tstring_content'>809</span><span class='words_sep'>
</span><span class='tstring_content'>811</span><span class='words_sep'>	</span><span class='tstring_content'>821</span><span class='words_sep'>	</span><span class='tstring_content'>823</span><span class='words_sep'>	</span><span class='tstring_content'>827</span><span class='words_sep'>	</span><span class='tstring_content'>829</span><span class='words_sep'>	</span><span class='tstring_content'>839</span><span class='words_sep'>	</span><span class='tstring_content'>853</span><span class='words_sep'>	</span><span class='tstring_content'>857</span><span class='words_sep'>	</span><span class='tstring_content'>859</span><span class='words_sep'>	</span><span class='tstring_content'>863</span><span class='words_sep'>
</span><span class='tstring_content'>877</span><span class='words_sep'>	</span><span class='tstring_content'>881</span><span class='words_sep'>	</span><span class='tstring_content'>883</span><span class='words_sep'>	</span><span class='tstring_content'>887</span><span class='words_sep'>	</span><span class='tstring_content'>907</span><span class='words_sep'>	</span><span class='tstring_content'>911</span><span class='words_sep'>	</span><span class='tstring_content'>919</span><span class='words_sep'>	</span><span class='tstring_content'>929</span><span class='words_sep'>	</span><span class='tstring_content'>937</span><span class='words_sep'>	</span><span class='tstring_content'>941</span><span class='words_sep'>
</span><span class='tstring_content'>947</span><span class='words_sep'>	</span><span class='tstring_content'>953</span><span class='words_sep'>	</span><span class='tstring_content'>967</span><span class='words_sep'>	</span><span class='tstring_content'>971</span><span class='words_sep'>	</span><span class='tstring_content'>977</span><span class='words_sep'>	</span><span class='tstring_content'>983</span><span class='words_sep'>	</span><span class='tstring_content'>991</span><span class='words_sep'>	</span><span class='tstring_content'>997</span><span class='tstring_end'>)</span></span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span></pre></dd>
      
        <dt id="MAX_CYPHER_LEVEL-constant" class="">MAX_CYPHER_LEVEL =
          
        </dt>
        <dd><pre class="code"><span class='int'>10</span></pre></dd>
      
        <dt id="CYPHER_LANGUAGES-constant" class="">CYPHER_LANGUAGES =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w(</span><span class='tstring_content'>Ada</span><span class='words_sep'> </span><span class='tstring_content'>Algol</span><span class='words_sep'> </span><span class='tstring_content'>awk</span><span class='words_sep'> </span><span class='tstring_content'>Bash</span><span class='words_sep'> </span><span class='tstring_content'>Basic</span><span class='words_sep'> </span><span class='tstring_content'>Cobol</span><span class='words_sep'> </span><span class='tstring_content'>dBase</span><span class='words_sep'> </span><span class='tstring_content'>Delphi</span><span class='words_sep'> </span><span class='tstring_content'>Erlang</span><span class='words_sep'> </span><span class='tstring_content'>Fortran</span><span class='words_sep'>
</span><span class='tstring_content'>Go</span><span class='words_sep'> </span><span class='tstring_content'>Haskell</span><span class='words_sep'> </span><span class='tstring_content'>Java</span><span class='words_sep'> </span><span class='tstring_content'>Lisp</span><span class='words_sep'> </span><span class='tstring_content'>Logo</span><span class='words_sep'> </span><span class='tstring_content'>Lua</span><span class='words_sep'> </span><span class='tstring_content'>MASM</span><span class='words_sep'> </span><span class='tstring_content'>Modula</span><span class='words_sep'> </span><span class='tstring_content'>Oberon</span><span class='words_sep'> </span><span class='tstring_content'>Pascal</span><span class='words_sep'> </span><span class='tstring_content'>Perl</span><span class='words_sep'> </span><span class='tstring_content'>PHP</span><span class='words_sep'>
</span><span class='tstring_content'>Prolog</span><span class='words_sep'> </span><span class='tstring_content'>Ruby</span><span class='words_sep'> </span><span class='tstring_content'>Rust</span><span class='words_sep'> </span><span class='tstring_content'>Scala</span><span class='words_sep'> </span><span class='tstring_content'>Scumm</span><span class='words_sep'> </span><span class='tstring_content'>Squeak</span><span class='words_sep'> </span><span class='tstring_content'>Swift</span><span class='words_sep'> </span><span class='tstring_content'>TeX</span><span class='words_sep'> </span><span class='tstring_content'>ZPL</span><span class='tstring_end'>)</span></span></pre></dd>
      
        <dt id="MONITOR_MESSAGE_PATH-constant" class="">MONITOR_MESSAGE_PATH =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/vplan/message.json</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="GEN_IMAGE_WIDTHS-classvariable" class="">@@GEN_IMAGE_WIDTHS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='int'>2048</span><span class='comma'>,</span> <span class='int'>1200</span><span class='comma'>,</span> <span class='int'>1024</span><span class='comma'>,</span> <span class='int'>768</span><span class='comma'>,</span> <span class='int'>512</span><span class='comma'>,</span> <span class='int'>384</span><span class='comma'>,</span> <span class='int'>256</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span></pre></dd>
      
        <dt id="BOOTSTRAP_BREAKPOINTS-classvariable" class="">@@BOOTSTRAP_BREAKPOINTS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='symbol'>:lg</span> <span class='op'>=&gt;</span> <span class='int'>1200</span><span class='comma'>,</span>
    <span class='symbol'>:md</span> <span class='op'>=&gt;</span> <span class='int'>992</span><span class='comma'>,</span>
    <span class='symbol'>:sm</span> <span class='op'>=&gt;</span> <span class='int'>768</span><span class='comma'>,</span>
    <span class='symbol'>:xs</span> <span class='op'>=&gt;</span> <span class='int'>480</span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_projects-class_method" title="assign_projects (class method)">.<strong>assign_projects</strong>(emails, users, projects, projects_for_klassenstufe, total_capacity, votes, _votes_by_email, _votes_by_vote, _votes_by_project, user_info)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_zeugnisformular-class_method" title="check_zeugnisformular (class method)">.<strong>check_zeugnisformular</strong>(key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#collect_data-class_method" title="collect_data (class method)">.<strong>collect_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compile_css-class_method" title="compile_css (class method)">.<strong>compile_css</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compile_files-class_method" title="compile_files (class method)">.<strong>compile_files</strong>(key, mimetype, paths)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compile_js-class_method" title="compile_js (class method)">.<strong>compile_js</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#determine_lehrmittelverein_state_for_all-class_method" title="determine_lehrmittelverein_state_for_all (class method)">.<strong>determine_lehrmittelverein_state_for_all</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#determine_zeugnislisten-class_method" title="determine_zeugnislisten (class method)">.<strong>determine_zeugnislisten</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_lesson_key_tr-class_method" title="fix_lesson_key_tr (class method)">.<strong>fix_lesson_key_tr</strong>(lesson_key_tr)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_lessons_for_shorthand-class_method" title="fix_lessons_for_shorthand (class method)">.<strong>fix_lessons_for_shorthand</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_parsed_klasse-class_method" title="fix_parsed_klasse (class method)">.<strong>fix_parsed_klasse</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_public_event_config-class_method" title="fix_public_event_config (class method)">.<strong>fix_public_event_config</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_stundenzeiten-class_method" title="fix_stundenzeiten (class method)">.<strong>fix_stundenzeiten</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_reload_monitors-class_method" title="force_reload_monitors (class method)">.<strong>force_reload_monitors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_password_for_email-class_method" title="gen_password_for_email (class method)">.<strong>gen_password_for_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_all_homeschooling_users-class_method" title="get_all_homeschooling_users (class method)">.<strong>get_all_homeschooling_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_all_stream_restrictions-class_method" title="get_all_stream_restrictions (class method)">.<strong>get_all_stream_restrictions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_aula_events-class_method" title="get_aula_events (class method)">.<strong>get_aula_events</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_ab_week-class_method" title="get_current_ab_week (class method)">.<strong>get_current_ab_week</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns A or B or nil.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_status-class_method" title="get_current_salzh_status (class method)">.<strong>get_current_salzh_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_status_for_all_teachers-class_method" title="get_current_salzh_status_for_all_teachers (class method)">.<strong>get_current_salzh_status_for_all_teachers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_sus-class_method" title="get_current_salzh_sus (class method)">.<strong>get_current_salzh_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_homeschooling_for_user-class_method" title="get_homeschooling_for_user (class method)">.<strong>get_homeschooling_for_user</strong>(email, datum = nil, is_homeschooling_user = nil, group2_for_email = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_homeschooling_for_user_by_dauer_salzh-class_method" title="get_homeschooling_for_user_by_dauer_salzh (class method)">.<strong>get_homeschooling_for_user_by_dauer_salzh</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_homeschooling_for_user_by_switch_week-class_method" title="get_homeschooling_for_user_by_switch_week (class method)">.<strong>get_homeschooling_for_user_by_switch_week</strong>(email, datum, group2_for_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_homework_feedback_for_lesson_key-class_method" title="get_homework_feedback_for_lesson_key (class method)">.<strong>get_homework_feedback_for_lesson_key</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_hotspot_klassen-class_method" title="get_hotspot_klassen (class method)">.<strong>get_hotspot_klassen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_lesson_data-class_method" title="get_lesson_data (class method)">.<strong>get_lesson_data</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_regular_testing_days-class_method" title="get_regular_testing_days (class method)">.<strong>get_regular_testing_days</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_salzh_status_for_emails-class_method" title="get_salzh_status_for_emails (class method)">.<strong>get_salzh_status_for_emails</strong>(emails = nil, force_refresh = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_stream_restriction_for_lesson_key-class_method" title="get_stream_restriction_for_lesson_key (class method)">.<strong>get_stream_restriction_for_lesson_key</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_switch_week_for_date-class_method" title="get_switch_week_for_date (class method)">.<strong>get_switch_week_for_date</strong>(d)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_technikamt_users-class_method" title="get_technikamt_users (class method)">.<strong>get_technikamt_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_test_events-class_method" title="get_test_events (class method)">.<strong>get_test_events</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_test_list_label_type-class_method" title="get_test_list_label_type (class method)">.<strong>get_test_list_label_type</strong>(status, regular_test_required, regular_test_day)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_voluntary_testing_sus-class_method" title="get_voluntary_testing_sus (class method)">.<strong>get_voluntary_testing_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_website_events-class_method" title="get_website_events (class method)">.<strong>get_website_events</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#invite_external_user_for_event-class_method" title="invite_external_user_for_event (class method)">.<strong>invite_external_user_for_event</strong>(eid, email, session_user_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#invite_external_user_for_poll_run-class_method" title="invite_external_user_for_poll_run (class method)">.<strong>invite_external_user_for_poll_run</strong>(prid, email, session_user_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iterate_school_days-class_method" title="iterate_school_days (class method)">.<strong>iterate_school_days</strong>(options = {}, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_freiwillig_salzh_sus_for_today-class_method" title="log_freiwillig_salzh_sus_for_today (class method)">.<strong>log_freiwillig_salzh_sus_for_today</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_zeugnisformulare-class_method" title="parse_zeugnisformulare (class method)">.<strong>parse_zeugnisformulare</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#purge_stale_salzh_entries-class_method" title="purge_stale_salzh_entries (class method)">.<strong>purge_stale_salzh_entries</strong>(force = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh_bib_data-class_method" title="refresh_bib_data (class method)">.<strong>refresh_bib_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh_public_event_config-class_method" title="refresh_public_event_config (class method)">.<strong>refresh_public_event_config</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sms_gateway_ready%3F-class_method" title="sms_gateway_ready? (class method)">.<strong>sms_gateway_ready?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_allowed_for_date_lesson_key_and_email-class_method" title="stream_allowed_for_date_lesson_key_and_email (class method)">.<strong>stream_allowed_for_date_lesson_key_and_email</strong>(datum, lesson_key, email, restrictions = nil, is_homeschooling_user = nil, group2_for_email = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tr_klasse-class_method" title="tr_klasse (class method)">.<strong>tr_klasse</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_angebote_groups-class_method" title="update_angebote_groups (class method)">.<strong>update_angebote_groups</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_antikenfahrt_groups-class_method" title="update_antikenfahrt_groups (class method)">.<strong>update_antikenfahrt_groups</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_forschertage_groups-class_method" title="update_forschertage_groups (class method)">.<strong>update_forschertage_groups</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_mailing_lists-class_method" title="update_mailing_lists (class method)">.<strong>update_mailing_lists</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_projekttage_groups-class_method" title="update_projekttage_groups (class method)">.<strong>update_projekttage_groups</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_has_role-class_method" title="user_has_role (class method)">.<strong>user_has_role</strong>(email, role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zeugnis_faecher_for_emails-class_method" title="zeugnis_faecher_for_emails (class method)">.<strong>zeugnis_faecher_for_emails</strong>(emails)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zeugnis_key_for_email-class_method" title="zeugnis_key_for_email (class method)">.<strong>zeugnis_key_for_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_include_file-instance_method" title="#_include_file (instance method)">#<strong>_include_file</strong>(name, label)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_include_image-instance_method" title="#_include_image (instance method)">#<strong>_include_image</strong>(slug, mode = nil, caption = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_include_lazyload_image-instance_method" title="#_include_lazyload_image (instance method)">#<strong>_include_lazyload_image</strong>(slug, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#admin_2fa_hotline_logged_in%3F-instance_method" title="#admin_2fa_hotline_logged_in? (instance method)">#<strong>admin_2fa_hotline_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#admin_logged_in%3F-instance_method" title="#admin_logged_in? (instance method)">#<strong>admin_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advent_calendar_images-instance_method" title="#advent_calendar_images (instance method)">#<strong>advent_calendar_images</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advents_calendar_date_today-instance_method" title="#advents_calendar_date_today (instance method)">#<strong>advents_calendar_date_today</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns 0 if before Dec 1 returns 1 ..</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_sessions-instance_method" title="#all_sessions (instance method)">#<strong>all_sessions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#already_booked_tablet_sets_for_day-instance_method" title="#already_booked_tablet_sets_for_day (instance method)">#<strong>already_booked_tablet_sets_for_day</strong>(datum)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all booked tablet sets for a specific day.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#already_booked_tablet_sets_for_timespan-instance_method" title="#already_booked_tablet_sets_for_timespan (instance method)">#<strong>already_booked_tablet_sets_for_timespan</strong>(datum, start_time, end_time)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>check whether we can book a list of tablet sets for a specific time span.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#book_tablet_set_for_lesson-instance_method" title="#book_tablet_set_for_lesson (instance method)">#<strong>book_tablet_set_for_lesson</strong>(datum, start_time, end_time, tablet_sets = [], lesson_key, offset)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>book a list of tablet sets for a specific lesson, or unbook all tablet sets.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#book_tablet_set_for_timespan-instance_method" title="#book_tablet_set_for_timespan (instance method)">#<strong>book_tablet_set_for_timespan</strong>(datum, start_time, end_time, reason, tablet_sets)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>book a list of tablet sets for a specific lesson, or unbook all tablet sets.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bytes_to_str-instance_method" title="#bytes_to_str (instance method)">#<strong>bytes_to_str</strong>(ai_Size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#caesar-instance_method" title="#caesar (instance method)">#<strong>caesar</strong>(s, shift)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_checkout_books-instance_method" title="#can_checkout_books (instance method)">#<strong>can_checkout_books</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_agr_app_logged_in%3F-instance_method" title="#can_manage_agr_app_logged_in? (instance method)">#<strong>can_manage_agr_app_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def user_who_can_report_tech_problems_or_better_logged_in?     user_logged_in? &amp;&amp; (@<a href=":can_manage_tablets">session_user</a> || <a href=":email">check_has_technikamt(@session_user</a>)) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_bib_logged_in%3F-instance_method" title="#can_manage_bib_logged_in? (instance method)">#<strong>can_manage_bib_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_bib_members_logged_in%3F-instance_method" title="#can_manage_bib_members_logged_in? (instance method)">#<strong>can_manage_bib_members_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_bib_payment_logged_in%3F-instance_method" title="#can_manage_bib_payment_logged_in? (instance method)">#<strong>can_manage_bib_payment_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_bib_special_access_logged_in%3F-instance_method" title="#can_manage_bib_special_access_logged_in? (instance method)">#<strong>can_manage_bib_special_access_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_manage_salzh_logged_in%3F-instance_method" title="#can_manage_salzh_logged_in? (instance method)">#<strong>can_manage_salzh_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_see_all_timetables_logged_in%3F-instance_method" title="#can_see_all_timetables_logged_in? (instance method)">#<strong>can_see_all_timetables_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_has_technikamt-instance_method" title="#check_has_technikamt (instance method)">#<strong>check_has_technikamt</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#class_stream_link_for_session_user-instance_method" title="#class_stream_link_for_session_user (instance method)">#<strong>class_stream_link_for_session_user</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#color_palette_for_color_scheme-instance_method" title="#color_palette_for_color_scheme (instance method)">#<strong>color_palette_for_color_scheme</strong>(color_scheme)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_device_token-instance_method" title="#create_device_token (instance method)">#<strong>create_device_token</strong>(device, expire_hours)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_session-instance_method" title="#create_session (instance method)">#<strong>create_session</strong>(email, expire_hours)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#css_for_font-instance_method" title="#css_for_font (instance method)">#<strong>css_for_font</strong>(font)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_jitsi_rooms-instance_method" title="#current_jitsi_rooms (instance method)">#<strong>current_jitsi_rooms</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cypher_content-instance_method" title="#cypher_content (instance method)">#<strong>cypher_content</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#darken-instance_method" title="#darken (instance method)">#<strong>darken</strong>(c, f = 0.2)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_audio_comment-instance_method" title="#delete_audio_comment (instance method)">#<strong>delete_audio_comment</strong>(tag)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_session_user_ical_link-instance_method" title="#delete_session_user_ical_link (instance method)">#<strong>delete_session_user_ical_link</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_session_user_otp_token-instance_method" title="#delete_session_user_otp_token (instance method)">#<strong>delete_session_user_otp_token</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#desaturate-instance_method" title="#desaturate (instance method)">#<strong>desaturate</strong>(c)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#determine_lehrmittelverein_state_for_email-instance_method" title="#determine_lehrmittelverein_state_for_email (instance method)">#<strong>determine_lehrmittelverein_state_for_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns bits 1 for paid, 2 for zahlungsbefreit, 4 for lehrmittelfreiheit.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#device_logged_in%3F-instance_method" title="#device_logged_in? (instance method)">#<strong>device_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eval_lilypads-instance_method" title="#eval_lilypads (instance method)">#<strong>eval_lilypads</strong>(_content)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#external_user_logged_in%3F-instance_method" title="#external_user_logged_in? (instance method)">#<strong>external_user_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def developer_logged_in?     user_with_role_logged_in?(:developer) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#external_users_for_session_user-instance_method" title="#external_users_for_session_user (instance method)">#<strong>external_users_for_session_user</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fach_for_lesson_key-instance_method" title="#fach_for_lesson_key (instance method)">#<strong>fach_for_lesson_key</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_available_tablet_sets-instance_method" title="#find_available_tablet_sets (instance method)">#<strong>find_available_tablet_sets</strong>(datum, start_time, end_time, lesson_key = nil, offset = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finished_zeugniskonferenzen-instance_method" title="#finished_zeugniskonferenzen (instance method)">#<strong>finished_zeugniskonferenzen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_images-instance_method" title="#fix_images (instance method)">#<strong>fix_images</strong>(s)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_jitsi_data-instance_method" title="#gen_jitsi_data (instance method)">#<strong>gen_jitsi_data</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_jwt_for_room-instance_method" title="#gen_jwt_for_room (instance method)">#<strong>gen_jwt_for_room</strong>(room = &#39;&#39;, eid = nil, user = nil, email = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_jwt_for_stream-instance_method" title="#gen_jwt_for_stream (instance method)">#<strong>gen_jwt_for_stream</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_poll_data-instance_method" title="#gen_poll_data (instance method)">#<strong>gen_poll_data</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_angebote-instance_method" title="#get_angebote (instance method)">#<strong>get_angebote</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_angebote_for_email-instance_method" title="#get_angebote_for_email (instance method)">#<strong>get_angebote_for_email</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_angebote_for_session_user-instance_method" title="#get_angebote_for_session_user (instance method)">#<strong>get_angebote_for_session_user</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_jitsi_users_for_lesson-instance_method" title="#get_current_jitsi_users_for_lesson (instance method)">#<strong>get_current_jitsi_users_for_lesson</strong>(lesson_key, offset, user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_status-instance_method" title="#get_current_salzh_status (instance method)">#<strong>get_current_salzh_status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_status_for_logged_in_teacher-instance_method" title="#get_current_salzh_status_for_logged_in_teacher (instance method)">#<strong>get_current_salzh_status_for_logged_in_teacher</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_salzh_sus-instance_method" title="#get_current_salzh_sus (instance method)">#<strong>get_current_salzh_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_current_user_sessions-instance_method" title="#get_current_user_sessions (instance method)">#<strong>get_current_user_sessions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_emails_for_foto_paths-instance_method" title="#get_emails_for_foto_paths (instance method)">#<strong>get_emails_for_foto_paths</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_gradient-instance_method" title="#get_gradient (instance method)">#<strong>get_gradient</strong>(colors, t)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_gradients-instance_method" title="#get_gradients (instance method)">#<strong>get_gradients</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_ha_amt_lesson_keys-instance_method" title="#get_ha_amt_lesson_keys (instance method)">#<strong>get_ha_amt_lesson_keys</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_hotspot_klassen-instance_method" title="#get_hotspot_klassen (instance method)">#<strong>get_hotspot_klassen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_invited_and_accepted_pk5_for_teacher-instance_method" title="#get_invited_and_accepted_pk5_for_teacher (instance method)">#<strong>get_invited_and_accepted_pk5_for_teacher</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_jitsi_room_name_for_lesson_key-instance_method" title="#get_jitsi_room_name_for_lesson_key (instance method)">#<strong>get_jitsi_room_name_for_lesson_key</strong>(lesson_key, user = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_login_stats-instance_method" title="#get_login_stats (instance method)">#<strong>get_login_stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_monitor_messages-instance_method" title="#get_monitor_messages (instance method)">#<strong>get_monitor_messages</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_monitor_zeugniskonferenzen-instance_method" title="#get_monitor_zeugniskonferenzen (instance method)">#<strong>get_monitor_zeugniskonferenzen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_my_pk5-instance_method" title="#get_my_pk5 (instance method)">#<strong>get_my_pk5</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_next_cypher_password-instance_method" title="#get_next_cypher_password (instance method)">#<strong>get_next_cypher_password</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_next_password-instance_method" title="#get_next_password (instance method)">#<strong>get_next_password</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_omit_ical_types-instance_method" title="#get_omit_ical_types (instance method)">#<strong>get_omit_ical_types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_open_doors_for_user-instance_method" title="#get_open_doors_for_user (instance method)">#<strong>get_open_doors_for_user</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_poll_run-instance_method" title="#get_poll_run (instance method)">#<strong>get_poll_run</strong>(prid, external_code = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_poll_run_results-instance_method" title="#get_poll_run_results (instance method)">#<strong>get_poll_run_results</strong>(prid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_projekte-instance_method" title="#get_projekte (instance method)">#<strong>get_projekte</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_recognized_emails-instance_method" title="#get_recognized_emails (instance method)">#<strong>get_recognized_emails</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_remaining_pk5_projects_for_teacher-instance_method" title="#get_remaining_pk5_projects_for_teacher (instance method)">#<strong>get_remaining_pk5_projects_for_teacher</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sessions_for_user-instance_method" title="#get_sessions_for_user (instance method)">#<strong>get_sessions_for_user</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sign_ups_for_public_event-instance_method" title="#get_sign_ups_for_public_event (instance method)">#<strong>get_sign_ups_for_public_event</strong>(event_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sitzplan_music_choice-instance_method" title="#get_sitzplan_music_choice (instance method)">#<strong>get_sitzplan_music_choice</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_technikamt_users-instance_method" title="#get_technikamt_users (instance method)">#<strong>get_technikamt_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_test_regime_html-instance_method" title="#get_test_regime_html (instance method)">#<strong>get_test_regime_html</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_unread_messages-instance_method" title="#get_unread_messages (instance method)">#<strong>get_unread_messages</strong>(now)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_voluntary_testing_sus-instance_method" title="#get_voluntary_testing_sus (instance method)">#<strong>get_voluntary_testing_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gev_logged_in%3F-instance_method" title="#gev_logged_in? (instance method)">#<strong>gev_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#good_bad_icon-instance_method" title="#good_bad_icon (instance method)">#<strong>good_bad_icon</strong>(flag)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hack_content-instance_method" title="#hack_content (instance method)">#<strong>hack_content</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hello-instance_method" title="#hello (instance method)">#<strong>hello</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hex_to_rgb-instance_method" title="#hex_to_rgb (instance method)">#<strong>hex_to_rgb</strong>(c)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hh_mm_to_i-instance_method" title="#hh_mm_to_i (instance method)">#<strong>hh_mm_to_i</strong>(s)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hsv_to_rgb-instance_method" title="#hsv_to_rgb (instance method)">#<strong>hsv_to_rgb</strong>(c)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#html_to_rgb-instance_method" title="#html_to_rgb (instance method)">#<strong>html_to_rgb</strong>(x)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#htmlentities-instance_method" title="#htmlentities (instance method)">#<strong>htmlentities</strong>(s)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#img_multi_attr_lazy-instance_method" title="#img_multi_attr_lazy (instance method)">#<strong>img_multi_attr_lazy</strong>(path, extension, resolutions, lazy = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#img_multi_attr_lazy_hash-instance_method" title="#img_multi_attr_lazy_hash (instance method)">#<strong>img_multi_attr_lazy_hash</strong>(path, extension, resolutions, lazy = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iterate_directory-instance_method" title="#iterate_directory (instance method)">#<strong>iterate_directory</strong>(which, first_key = :last_name, second_key = :first_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iterate_school_days-instance_method" title="#iterate_school_days (instance method)">#<strong>iterate_school_days</strong>(options = {}, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#klasse_for_sus-instance_method" title="#klasse_for_sus (instance method)">#<strong>klasse_for_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#klassen_for_session_user-instance_method" title="#klassen_for_session_user (instance method)">#<strong>klassen_for_session_user</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#klassenleiter_for_klasse_logged_in%3F-instance_method" title="#klassenleiter_for_klasse_logged_in? (instance method)">#<strong>klassenleiter_for_klasse_logged_in?</strong>(klasse)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#klassenleiter_for_klasse_or_admin_logged_in%3F-instance_method" title="#klassenleiter_for_klasse_or_admin_logged_in? (instance method)">#<strong>klassenleiter_for_klasse_or_admin_logged_in?</strong>(klasse)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#klassenraum_logged_in%3F-instance_method" title="#klassenraum_logged_in? (instance method)">#<strong>klassenraum_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kurs_tablet_logged_in%3F-instance_method" title="#kurs_tablet_logged_in? (instance method)">#<strong>kurs_tablet_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lessons_for_session_user_and_klasse-instance_method" title="#lessons_for_session_user_and_klasse (instance method)">#<strong>lessons_for_session_user_and_klasse</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#line_for_lang-instance_method" title="#line_for_lang (instance method)">#<strong>line_for_lang</strong>(lang)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#line_for_lang_dont_end_on_lang-instance_method" title="#line_for_lang_dont_end_on_lang (instance method)">#<strong>line_for_lang_dont_end_on_lang</strong>(lang)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">#<strong>logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#luminance-instance_method" title="#luminance (instance method)">#<strong>luminance</strong>(color)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mail_addresses_table-instance_method" title="#mail_addresses_table (instance method)">#<strong>mail_addresses_table</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matrix_get-instance_method" title="#matrix_get (instance method)">#<strong>matrix_get</strong>(path, access_token = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matrix_login-instance_method" title="#matrix_login (instance method)">#<strong>matrix_login</strong>(user, password) {|access_token| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matrix_post-instance_method" title="#matrix_post (instance method)">#<strong>matrix_post</strong>(path, data = {}, access_token = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matrix_request-instance_method" title="#matrix_request (instance method)">#<strong>matrix_request</strong>(method, path, data = {}, access_token = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#may_edit_lessons%3F-instance_method" title="#may_edit_lessons? (instance method)">#<strong>may_edit_lessons?</strong>(lesson_key)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mix-instance_method" title="#mix (instance method)">#<strong>mix</strong>(a, b, t)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#monitor_logged_in%3F-instance_method" title="#monitor_logged_in? (instance method)">#<strong>monitor_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#my_pk5_history-instance_method" title="#my_pk5_history (instance method)">#<strong>my_pk5_history</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nav_items-instance_method" title="#nav_items (instance method)">#<strong>nav_items</strong>(primary_color, now, new_messages_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#need_sozialverhalten-instance_method" title="#need_sozialverhalten (instance method)">#<strong>need_sozialverhalten</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_paths_and_values-instance_method" title="#parse_paths_and_values (instance method)">#<strong>parse_paths_and_values</strong>(paths, values)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_projekt_node-instance_method" title="#parse_projekt_node (instance method)">#<strong>parse_projekt_node</strong>(p)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_request_data-instance_method" title="#parse_request_data (instance method)">#<strong>parse_request_data</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pending_pk5_invitations_outgoing-instance_method" title="#pending_pk5_invitations_outgoing (instance method)">#<strong>pending_pk5_invitations_outgoing</strong>(user_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pick_random_color_scheme-instance_method" title="#pick_random_color_scheme (instance method)">#<strong>pick_random_color_scheme</strong>(go_wild = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#poll_run_results_to_html-instance_method" title="#poll_run_results_to_html (instance method)">#<strong>poll_run_results_to_html</strong>(poll, poll_run, responses, target = :web, only_this_email = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_ad_hoc_2fa_panel-instance_method" title="#print_ad_hoc_2fa_panel (instance method)">#<strong>print_ad_hoc_2fa_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_admin_dashboard-instance_method" title="#print_admin_dashboard (instance method)">#<strong>print_admin_dashboard</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_advent_calendar_css-instance_method" title="#print_advent_calendar_css (instance method)">#<strong>print_advent_calendar_css</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_advent_calendar_doors-instance_method" title="#print_advent_calendar_doors (instance method)">#<strong>print_advent_calendar_doors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_adventskalender_sidepanel-instance_method" title="#print_adventskalender_sidepanel (instance method)">#<strong>print_adventskalender_sidepanel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_kurse_untis-instance_method" title="#print_all_kurse_untis (instance method)">#<strong>print_all_kurse_untis</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_lul_logo_didact-instance_method" title="#print_all_lul_logo_didact (instance method)">#<strong>print_all_lul_logo_didact</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_sus_logo_didact-instance_method" title="#print_all_sus_logo_didact (instance method)">#<strong>print_all_sus_logo_didact</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_sus_untis-instance_method" title="#print_all_sus_untis (instance method)">#<strong>print_all_sus_untis</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_users-instance_method" title="#print_all_users (instance method)">#<strong>print_all_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_all_users_informatik_biber-instance_method" title="#print_all_users_informatik_biber (instance method)">#<strong>print_all_users_informatik_biber</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_current_monitor_advent_calendar_images-instance_method" title="#print_current_monitor_advent_calendar_images (instance method)">#<strong>print_current_monitor_advent_calendar_images</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_current_polls-instance_method" title="#print_current_polls (instance method)">#<strong>print_current_polls</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_dev_stats-instance_method" title="#print_dev_stats (instance method)">#<strong>print_dev_stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_email_accounts-instance_method" title="#print_email_accounts (instance method)">#<strong>print_email_accounts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_email_field-instance_method" title="#print_email_field (instance method)">#<strong>print_email_field</strong>(io, email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_free_projekt_spots-instance_method" title="#print_free_projekt_spots (instance method)">#<strong>print_free_projekt_spots</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_gev_table-instance_method" title="#print_gev_table (instance method)">#<strong>print_gev_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_lehrbuchverein_table-instance_method" title="#print_lehrbuchverein_table (instance method)">#<strong>print_lehrbuchverein_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_lehrerzimmer_panel-instance_method" title="#print_lehrerzimmer_panel (instance method)">#<strong>print_lehrerzimmer_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_lesson_keys_history-instance_method" title="#print_lesson_keys_history (instance method)">#<strong>print_lesson_keys_history</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_light_structure-instance_method" title="#print_light_structure (instance method)">#<strong>print_light_structure</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>post &#39;/api/create_aula_lights&#39; do     require_user_who_can_use_aula!     data = parse_request_data(:required_keys =&gt; [:dmx, :number])     neo4j_query(&lt;&lt;~END_OF_QUERY, :dmx =&gt; <a href=":dmx">data</a>, :desk =&gt; <a href=":desk">data</a>)         CREATE (e:AulaLight)         SET e.dmx = $dmx     END_OF_QUERY     respond(:result =&gt; &#39;lefromage&#39;) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_login_ranking-instance_method" title="#print_login_ranking (instance method)">#<strong>print_login_ranking</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_mailing_list-instance_method" title="#print_mailing_list (instance method)">#<strong>print_mailing_list</strong>(io, list_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_mailing_lists-instance_method" title="#print_mailing_lists (instance method)">#<strong>print_mailing_lists</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_maze_defs-instance_method" title="#print_maze_defs (instance method)">#<strong>print_maze_defs</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_password_field-instance_method" title="#print_password_field (instance method)">#<strong>print_password_field</strong>(io, password)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_pending_pk5_invitations_incoming-instance_method" title="#print_pending_pk5_invitations_incoming (instance method)">#<strong>print_pending_pk5_invitations_incoming</strong>(user_email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_phishing_groups_table-instance_method" title="#print_phishing_groups_table (instance method)">#<strong>print_phishing_groups_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_phishing_mail-instance_method" title="#print_phishing_mail (instance method)">#<strong>print_phishing_mail</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_phishing_panel-instance_method" title="#print_phishing_panel (instance method)">#<strong>print_phishing_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projekt_assigned_sus-instance_method" title="#print_projekt_assigned_sus (instance method)">#<strong>print_projekt_assigned_sus</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projekt_interesse-instance_method" title="#print_projekt_interesse (instance method)">#<strong>print_projekt_interesse</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projekt_interesse_stats-instance_method" title="#print_projekt_interesse_stats (instance method)">#<strong>print_projekt_interesse_stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projekttage_assignment_summary-instance_method" title="#print_projekttage_assignment_summary (instance method)">#<strong>print_projekttage_assignment_summary</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projekttage_vote_summary-instance_method" title="#print_projekttage_vote_summary (instance method)">#<strong>print_projekttage_vote_summary</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_projektwahl_countdown_panel-instance_method" title="#print_projektwahl_countdown_panel (instance method)">#<strong>print_projektwahl_countdown_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_public_event_table-instance_method" title="#print_public_event_table (instance method)">#<strong>print_public_event_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_roles-instance_method" title="#print_roles (instance method)">#<strong>print_roles</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_salzh_panel-instance_method" title="#print_salzh_panel (instance method)">#<strong>print_salzh_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_salzh_protocol_table-instance_method" title="#print_salzh_protocol_table (instance method)">#<strong>print_salzh_protocol_table</strong>(week_delta = 0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_salzh_protocol_table_overview-instance_method" title="#print_salzh_protocol_table_overview (instance method)">#<strong>print_salzh_protocol_table_overview</strong>(week_delta = 0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_self_test_panel-instance_method" title="#print_self_test_panel (instance method)">#<strong>print_self_test_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_semi_public_links-instance_method" title="#print_semi_public_links (instance method)">#<strong>print_semi_public_links</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_sessions-instance_method" title="#print_sessions (instance method)">#<strong>print_sessions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_stats-instance_method" title="#print_stats (instance method)">#<strong>print_stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_stream_restriction_table-instance_method" title="#print_stream_restriction_table (instance method)">#<strong>print_stream_restriction_table</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_summoned_books_panel-instance_method" title="#print_summoned_books_panel (instance method)">#<strong>print_summoned_books_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_tablet_locations-instance_method" title="#print_tablet_locations (instance method)">#<strong>print_tablet_locations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>post &#39;/api/remove_mobile_device&#39; do     require_user_who_can_manage_tablets!     data = parse_request_data(:required_keys =&gt; [:code])     code = <a href=":code">data</a>     neo4j_query(&lt;&lt;~END_OF_QUERY, :code =&gt; code)         MATCH (v:SchulTablet $code)         DELETE v     END_OF_QUERY     respond(:ok =&gt; true) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_tablet_login-instance_method" title="#print_tablet_login (instance method)">#<strong>print_tablet_login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_techpost_superuser-instance_method" title="#print_techpost_superuser (instance method)">#<strong>print_techpost_superuser</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_test_klassen_chooser-instance_method" title="#print_test_klassen_chooser (instance method)">#<strong>print_test_klassen_chooser</strong>(active = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_timetable_chooser-instance_method" title="#print_timetable_chooser (instance method)">#<strong>print_timetable_chooser</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_tresor_countdown_panel-instance_method" title="#print_tresor_countdown_panel (instance method)">#<strong>print_tresor_countdown_panel</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_users_which_can_fix_tech_problems-instance_method" title="#print_users_which_can_fix_tech_problems (instance method)">#<strong>print_users_which_can_fix_tech_problems</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#public_events_table-instance_method" title="#public_events_table (instance method)">#<strong>public_events_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#purge_missing_sessions-instance_method" title="#purge_missing_sessions (instance method)">#<strong>purge_missing_sessions</strong>(current_sid = nil, remove_other = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#purge_stale_second_factors-instance_method" title="#purge_stale_second_factors (instance method)">#<strong>purge_stale_second_factors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recurse_arrays-instance_method" title="#recurse_arrays (instance method)">#<strong>recurse_arrays</strong>(path_array, value_array, prefix = [], index_prefix = [], &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#redirect_on_error-instance_method" title="#redirect_on_error (instance method)">#<strong>redirect_on_error</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh_second_factor-instance_method" title="#refresh_second_factor (instance method)">#<strong>refresh_second_factor</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_admin!-instance_method" title="#require_admin! (instance method)">#<strong>require_admin!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_admin_2fa_hotline!-instance_method" title="#require_admin_2fa_hotline! (instance method)">#<strong>require_admin_2fa_hotline!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_admin_or_sekretariat!-instance_method" title="#require_admin_or_sekretariat! (instance method)">#<strong>require_admin_or_sekretariat!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_device!-instance_method" title="#require_device! (instance method)">#<strong>require_device!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_monitor_or_user_who_can_manage_monitors!-instance_method" title="#require_monitor_or_user_who_can_manage_monitors! (instance method)">#<strong>require_monitor_or_user_who_can_manage_monitors!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_running_phishing_training!-instance_method" title="#require_running_phishing_training! (instance method)">#<strong>require_running_phishing_training!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_running_phishing_training_hint!-instance_method" title="#require_running_phishing_training_hint! (instance method)">#<strong>require_running_phishing_training_hint!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_teacher!-instance_method" title="#require_teacher! (instance method)">#<strong>require_teacher!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_teacher_for_lesson_or_ha_amt_logged_in-instance_method" title="#require_teacher_for_lesson_or_ha_amt_logged_in (instance method)">#<strong>require_teacher_for_lesson_or_ha_amt_logged_in</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_teacher_tablet!-instance_method" title="#require_teacher_tablet! (instance method)">#<strong>require_teacher_tablet!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_technikteam!-instance_method" title="#require_technikteam! (instance method)">#<strong>require_technikteam!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def require_developer!     assert(developer_logged_in?) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user!-instance_method" title="#require_user! (instance method)">#<strong>require_user!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_agr_app!-instance_method" title="#require_user_who_can_manage_agr_app! (instance method)">#<strong>require_user_who_can_manage_agr_app!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_antikenfahrt!-instance_method" title="#require_user_who_can_manage_antikenfahrt! (instance method)">#<strong>require_user_who_can_manage_antikenfahrt!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_bib!-instance_method" title="#require_user_who_can_manage_bib! (instance method)">#<strong>require_user_who_can_manage_bib!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_monitors!-instance_method" title="#require_user_who_can_manage_monitors! (instance method)">#<strong>require_user_who_can_manage_monitors!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_news!-instance_method" title="#require_user_who_can_manage_news! (instance method)">#<strong>require_user_who_can_manage_news!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_salzh!-instance_method" title="#require_user_who_can_manage_salzh! (instance method)">#<strong>require_user_who_can_manage_salzh!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_manage_tablets!-instance_method" title="#require_user_who_can_manage_tablets! (instance method)">#<strong>require_user_who_can_manage_tablets!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_report_tech_problems!-instance_method" title="#require_user_who_can_report_tech_problems! (instance method)">#<strong>require_user_who_can_report_tech_problems!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_upload_files!-instance_method" title="#require_user_who_can_upload_files! (instance method)">#<strong>require_user_who_can_upload_files!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_who_can_use_aula!-instance_method" title="#require_user_who_can_use_aula! (instance method)">#<strong>require_user_who_can_use_aula!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def require_user_who_can_report_tech_problems_or_better!     assert(user_who_can_report_tech_problems_or_better_logged_in?) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_user_with_role!-instance_method" title="#require_user_with_role! (instance method)">#<strong>require_user_with_role!</strong>(role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_zeugnis_admin!-instance_method" title="#require_zeugnis_admin! (instance method)">#<strong>require_zeugnis_admin!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond-instance_method" title="#respond (instance method)">#<strong>respond</strong>(hash = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_raw_with_mimetype-instance_method" title="#respond_raw_with_mimetype (instance method)">#<strong>respond_raw_with_mimetype</strong>(content, mimetype)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_raw_with_mimetype_and_filename-instance_method" title="#respond_raw_with_mimetype_and_filename (instance method)">#<strong>respond_raw_with_mimetype_and_filename</strong>(content, mimetype, filename)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rgb_to_hex-instance_method" title="#rgb_to_hex (instance method)">#<strong>rgb_to_hex</strong>(c)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rgb_to_hsv-instance_method" title="#rgb_to_hsv (instance method)">#<strong>rgb_to_hsv</strong>(c)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p><a href="http://ntlk.net/2011/11/21/convert-rgb-to-hsb-hsv-in-ruby">ntlk.net/2011/11/21/convert-rgb-to-hsb-hsv-in-ruby</a>/.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rgb_to_html-instance_method" title="#rgb_to_html (instance method)">#<strong>rgb_to_html</strong>(x)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#room_name_for_event-instance_method" title="#room_name_for_event (instance method)">#<strong>room_name_for_event</strong>(title, eid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running_phishing_training%3F-instance_method" title="#running_phishing_training? (instance method)">#<strong>running_phishing_training?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running_phishing_training_hint%3F-instance_method" title="#running_phishing_training_hint? (instance method)">#<strong>running_phishing_training_hint?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running_zeugniskonferenzen-instance_method" title="#running_zeugniskonferenzen (instance method)">#<strong>running_zeugniskonferenzen</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sanitize_poll_items-instance_method" title="#sanitize_poll_items (instance method)">#<strong>sanitize_poll_items</strong>(items)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schueler_for_lesson-instance_method" title="#schueler_for_lesson (instance method)">#<strong>schueler_for_lesson</strong>(lesson_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schueler_logged_in%3F-instance_method" title="#schueler_logged_in? (instance method)">#<strong>schueler_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#score_for_project-instance_method" title="#score_for_project (instance method)">#<strong>score_for_project</strong>(nr, project_data)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#second_factor_time_left-instance_method" title="#second_factor_time_left (instance method)">#<strong>second_factor_time_left</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sekretariat_logged_in%3F-instance_method" title="#sekretariat_logged_in? (instance method)">#<strong>sekretariat_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#self_tests_this_week-instance_method" title="#self_tests_this_week (instance method)">#<strong>self_tests_this_week</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_sms-instance_method" title="#send_sms (instance method)">#<strong>send_sms</strong>(telephone_number, message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_welcome_mail-instance_method" title="#send_welcome_mail (instance method)">#<strong>send_welcome_mail</strong>(recipients)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_has_streaming_button%3F-instance_method" title="#session_user_has_streaming_button? (instance method)">#<strong>session_user_has_streaming_button?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_jump_table_direction-instance_method" title="#session_user_jump_table_direction (instance method)">#<strong>session_user_jump_table_direction</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_otp_qr_code-instance_method" title="#session_user_otp_qr_code (instance method)">#<strong>session_user_otp_qr_code</strong>(reveal = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_otp_token_good_for_tresor-instance_method" title="#session_user_otp_token_good_for_tresor (instance method)">#<strong>session_user_otp_token_good_for_tresor</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_preferred_login_method-instance_method" title="#session_user_preferred_login_method (instance method)">#<strong>session_user_preferred_login_method</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_telephone_number-instance_method" title="#session_user_telephone_number (instance method)">#<strong>session_user_telephone_number</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_user_telephone_number_good_for_tresor-instance_method" title="#session_user_telephone_number_good_for_tresor (instance method)">#<strong>session_user_telephone_number_good_for_tresor</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift_hue-instance_method" title="#shift_hue (instance method)">#<strong>shift_hue</strong>(c, f = 60)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skytale-instance_method" title="#skytale (instance method)">#<strong>skytale</strong>(s, w)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tablet_logged_in%3F-instance_method" title="#tablet_logged_in? (instance method)">#<strong>tablet_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#teacher_for_lesson_or_ha_amt_logged_in%3F-instance_method" title="#teacher_for_lesson_or_ha_amt_logged_in? (instance method)">#<strong>teacher_for_lesson_or_ha_amt_logged_in?</strong>(lesson_key)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#teacher_logged_in%3F-instance_method" title="#teacher_logged_in? (instance method)">#<strong>teacher_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#teacher_tablet_logged_in%3F-instance_method" title="#teacher_tablet_logged_in? (instance method)">#<strong>teacher_tablet_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#technikteam_logged_in%3F-instance_method" title="#technikteam_logged_in? (instance method)">#<strong>technikteam_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test_request_parameter-instance_method" title="#test_request_parameter (instance method)">#<strong>test_request_parameter</strong>(data, key, options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_devices-instance_method" title="#this_is_a_page_for_devices (instance method)">#<strong>this_is_a_page_for_devices</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_admins-instance_method" title="#this_is_a_page_for_logged_in_admins (instance method)">#<strong>this_is_a_page_for_logged_in_admins</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_gev-instance_method" title="#this_is_a_page_for_logged_in_gev (instance method)">#<strong>this_is_a_page_for_logged_in_gev</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_teachers-instance_method" title="#this_is_a_page_for_logged_in_teachers (instance method)">#<strong>this_is_a_page_for_logged_in_teachers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_users-instance_method" title="#this_is_a_page_for_logged_in_users (instance method)">#<strong>this_is_a_page_for_logged_in_users</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_users_who_can_manage_salzh-instance_method" title="#this_is_a_page_for_logged_in_users_who_can_manage_salzh (instance method)">#<strong>this_is_a_page_for_logged_in_users_who_can_manage_salzh</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_logged_in_zeugnis_admins-instance_method" title="#this_is_a_page_for_logged_in_zeugnis_admins (instance method)">#<strong>this_is_a_page_for_logged_in_zeugnis_admins</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_people_who_can_manage_monitors-instance_method" title="#this_is_a_page_for_people_who_can_manage_monitors (instance method)">#<strong>this_is_a_page_for_people_who_can_manage_monitors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_people_who_can_manage_news-instance_method" title="#this_is_a_page_for_people_who_can_manage_news (instance method)">#<strong>this_is_a_page_for_people_who_can_manage_news</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_people_who_can_upload_files-instance_method" title="#this_is_a_page_for_people_who_can_upload_files (instance method)">#<strong>this_is_a_page_for_people_who_can_upload_files</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_phishing_training-instance_method" title="#this_is_a_page_for_phishing_training (instance method)">#<strong>this_is_a_page_for_phishing_training</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Put this on top of a webpage to assert that this page can be opened during a phishing training only.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_is_a_page_for_user_with_role-instance_method" title="#this_is_a_page_for_user_with_role (instance method)">#<strong>this_is_a_page_for_user_with_role</strong>(role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tr_klasse-instance_method" title="#tr_klasse (instance method)">#<strong>tr_klasse</strong>(klasse)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tresor_second_factor_ttl-instance_method" title="#tresor_second_factor_ttl (instance method)">#<strong>tresor_second_factor_ttl</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_send_invites-instance_method" title="#trigger_send_invites (instance method)">#<strong>trigger_send_invites</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_stats_update-instance_method" title="#trigger_stats_update (instance method)">#<strong>trigger_stats_update</strong>(which)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_update-instance_method" title="#trigger_update (instance method)">#<strong>trigger_update</strong>(which)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trigger_update_images-instance_method" title="#trigger_update_images (instance method)">#<strong>trigger_update_images</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_monitors-instance_method" title="#update_monitors (instance method)">#<strong>update_monitors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_monitors_message-instance_method" title="#update_monitors_message (instance method)">#<strong>update_monitors_message</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_monitors_vplan-instance_method" title="#update_monitors_vplan (instance method)">#<strong>update_monitors_vplan</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_eligible_for_projekt_katalog%3F-instance_method" title="#user_eligible_for_projekt_katalog? (instance method)">#<strong>user_eligible_for_projekt_katalog?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_eligible_for_projektwahl%3F-instance_method" title="#user_eligible_for_projektwahl? (instance method)">#<strong>user_eligible_for_projektwahl?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_has_role-instance_method" title="#user_has_role (instance method)">#<strong>user_has_role</strong>(email, role)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_icon-instance_method" title="#user_icon (instance method)">#<strong>user_icon</strong>(email, c = nil)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return a &lt;div&gt; with a background image taken from a user&#39;s Nextcloud account, with a gray background as a default fallback.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_is_eligible_for_sms%3F-instance_method" title="#user_is_eligible_for_sms? (instance method)">#<strong>user_is_eligible_for_sms?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_is_eligible_for_tresor%3F-instance_method" title="#user_is_eligible_for_tresor? (instance method)">#<strong>user_is_eligible_for_tresor?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_logged_in%3F-instance_method" title="#user_logged_in? (instance method)">#<strong>user_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_was_eligible_for_projektwahl%3F-instance_method" title="#user_was_eligible_for_projektwahl? (instance method)">#<strong>user_was_eligible_for_projektwahl?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_manage_antikenfahrt_logged_in%3F-instance_method" title="#user_who_can_manage_antikenfahrt_logged_in? (instance method)">#<strong>user_who_can_manage_antikenfahrt_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_manage_monitors_logged_in%3F-instance_method" title="#user_who_can_manage_monitors_logged_in? (instance method)">#<strong>user_who_can_manage_monitors_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_manage_news_logged_in%3F-instance_method" title="#user_who_can_manage_news_logged_in? (instance method)">#<strong>user_who_can_manage_news_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_manage_tablets_logged_in%3F-instance_method" title="#user_who_can_manage_tablets_logged_in? (instance method)">#<strong>user_who_can_manage_tablets_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_report_tech_problems_logged_in%3F-instance_method" title="#user_who_can_report_tech_problems_logged_in? (instance method)">#<strong>user_who_can_report_tech_problems_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_upload_files_logged_in%3F-instance_method" title="#user_who_can_upload_files_logged_in? (instance method)">#<strong>user_who_can_upload_files_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_who_can_use_aula_logged_in%3F-instance_method" title="#user_who_can_use_aula_logged_in? (instance method)">#<strong>user_who_can_use_aula_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_with_role_logged_in%3F-instance_method" title="#user_with_role_logged_in? (instance method)">#<strong>user_with_role_logged_in?</strong>(role)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#vote_codes_from_token-instance_method" title="#vote_codes_from_token (instance method)">#<strong>vote_codes_from_token</strong>(vote_code, token, _count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zeugnis_admin_logged_in%3F-instance_method" title="#zeugnis_admin_logged_in? (instance method)">#<strong>zeugnis_admin_logged_in?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assign_projects-class_method">
  
    .<strong>assign_projects</strong>(emails, users, projects, projects_for_klassenstufe, total_capacity, votes, _votes_by_email, _votes_by_vote, _votes_by_project, user_info)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 744</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assign_projects'>assign_projects</span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='comma'>,</span> <span class='id identifier rubyid_users'>users</span><span class='comma'>,</span> <span class='id identifier rubyid_projects'>projects</span><span class='comma'>,</span>
    <span class='id identifier rubyid_projects_for_klassenstufe'>projects_for_klassenstufe</span><span class='comma'>,</span> <span class='id identifier rubyid_total_capacity'>total_capacity</span><span class='comma'>,</span>
    <span class='id identifier rubyid_votes'>votes</span><span class='comma'>,</span> <span class='id identifier rubyid__votes_by_email'>_votes_by_email</span><span class='comma'>,</span>
    <span class='id identifier rubyid__votes_by_vote'>_votes_by_vote</span><span class='comma'>,</span> <span class='id identifier rubyid__votes_by_project'>_votes_by_project</span><span class='comma'>,</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_votes_by_email'>votes_by_email</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid__votes_by_email'>_votes_by_email</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>
    <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid__votes_by_vote'>_votes_by_vote</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>
    <span class='id identifier rubyid_votes_by_project'>votes_by_project</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid__votes_by_project'>_votes_by_project</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>
    <span class='comment'># STDERR.puts &quot;Got #{emails.size} emails&quot;
</span>    <span class='comment'># STDERR.puts &quot;Got #{projects.size} projects with a total capacity of #{total_capacity}&quot;
</span>    <span class='comment'># STDERR.puts &quot;Total capacity: #{total_capacity}&quot;
</span>    <span class='comment'># STDERR.puts &quot;Schueler: #{emails.size}&quot;
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:project_for_email</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:error_for_email</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:emails_for_project</span> <span class='op'>=&gt;</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_projects'>projects</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='rbrace'>}</span>
    <span class='comment'># STDERR.puts result.to_yaml
</span>    <span class='id identifier rubyid_current_vote'>current_vote</span> <span class='op'>=</span> <span class='int'>3</span>
    <span class='id identifier rubyid_remaining_emails'>remaining_emails</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span>
    <span class='comment'># STEP 1: Assign projects by priority
</span>    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_vote'>current_vote</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_vote'>current_vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_current_vote'>current_vote</span> <span class='op'>-=</span> <span class='int'>1</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_current_vote'>current_vote</span> <span class='op'>==</span> <span class='int'>0</span>
                <span class='kw'>break</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_current_vote'>current_vote</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='kw'>break</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_sha1'>sha1</span> <span class='op'>=</span> <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_vote'>current_vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_vote'>vote</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_sha1'>sha1</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_nr'>nr</span> <span class='op'>=</span> <span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='comment'># STDERR.puts &quot;[#{current_vote} / #{votes_by_vote[current_vote].size} left] #{sha1} =&gt; #{vote.to_json}&quot;
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:emails_for_project</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_projects'>projects</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span>
            <span class='comment'># user can be assigned to project
</span>            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:emails_for_project</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:project_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>argh</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_remaining_emails'>remaining_emails</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:project_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_nr'>nr</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:error_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:highest_vote</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_current_vote'>current_vote</span>
            <span class='comment'># clear all entries of user
</span>            <span class='id identifier rubyid_votes_by_email'>votes_by_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span><span class='lbracket'>[</span><span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:vote</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_votes_by_vote'>votes_by_vote</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_vote'>current_vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_sha1'>sha1</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='comment'># STDERR.puts &quot;Assigned #{result[:project_for_email].size} of #{emails.size} users.&quot;
</span>    <span class='comment'># STEP 2: Randomly assign the rest
</span>    <span class='id identifier rubyid_remaining_projects'>remaining_projects</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_projects'>projects</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:emails_for_project</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
            <span class='id identifier rubyid_remaining_projects'>remaining_projects</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_nr'>nr</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>while</span> <span class='op'>!</span><span class='id identifier rubyid_remaining_emails'>remaining_emails</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_remaining_emails'>remaining_emails</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
        <span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='id identifier rubyid_projects_for_klassenstufe'>projects_for_klassenstufe</span><span class='lbracket'>[</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_remaining_projects'>remaining_projects</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oops</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_nr'>nr</span> <span class='op'>=</span> <span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_remaining_emails'>remaining_emails</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:project_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>argh</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:project_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_nr'>nr</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:emails_for_project</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:error_for_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:highest_vote</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:emails_for_project</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_projects'>projects</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_remaining_projects'>remaining_projects</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_nr'>nr</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># STDERR.puts &quot;Assigned #{result[:project_for_email].size} of #{emails.size} users.&quot;
</span>    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_zeugnisformular-class_method">
  
    .<strong>check_zeugnisformular</strong>(key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 265</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_check_zeugnisformular'>check_zeugnisformular</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kein Formular vorhanden!</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_wf_count'>wf_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='const'>FAECHER_FOR_ZEUGNIS</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_tag'>tag</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_wf_count'>wf_count</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#WF</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wf_count'>wf_count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#WF</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wf_count'>wf_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>_Name</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># required_tags &lt;&lt; &quot;##{tag[1, tag.size - 1]}&quot;
</span>        <span class='kw'>else</span>
            <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag'>tag</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='const'>DETAIL_NOTEN</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag'>tag</span><span class='embexpr_end'>}</span><span class='tstring_content'>_AT</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tag'>tag</span><span class='embexpr_end'>}</span><span class='tstring_content'>_SL</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Zeugnisdatum</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Schuljahr</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Name</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Geburtsdatum</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Klasse</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#VT</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#VT_UE</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#VS</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#VS_UE</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#VSP</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#WeitereBemerkungen</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sesb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>ZEUGNIS_HALBJAHR</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Probejahr</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7_sesb</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#BBR</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9_sesb</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_required_tags'>required_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#MSA</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10_sesb</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_optional_tags'>optional_tags</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_optional_tags'>optional_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Vorname</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_optional_tags'>optional_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Angebote</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_optional_tags'>optional_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Bemerkungen</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_optional_tags'>optional_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#BemerkungenAngebote</span><span class='tstring_end'>&#39;</span></span>

    <span class='id identifier rubyid_present_tags'>present_tags</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_missing_tags'>missing_tags</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_required_tags'>required_tags</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_present_tags'>present_tags</span>
    <span class='id identifier rubyid_superfluous_tags'>superfluous_tags</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_required_tags'>required_tags</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_superfluous_tags'>superfluous_tags</span> <span class='op'>-=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_optional_tags'>optional_tags</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_missing_tags'>missing_tags</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_errors'>errors</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fehlende Markierungen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_missing_tags'>missing_tags</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_superfluous_tags'>superfluous_tags</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_errors'>errors</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unbekannte Markierungen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_superfluous_tags'>superfluous_tags</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Bemerkungen</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Angebote</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#BemerkungenAngebote</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Bemerkungen</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#Angebote</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_present_tags'>present_tags</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#BemerkungenAngebote</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_errors'>errors</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Es muss entweder nur #Angebote und #Bemerkungen geben oder nur #BemerkungenAngebote.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_errors'>errors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="collect_data-class_method">
  
    .<strong>collect_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 517</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_collect_data'>collect_data</span>
    <span class='cvar'>@@user_info</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@login_shortcuts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@email_for_matrix_login</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@shorthands</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@shorthand_order</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@shorthands_for_fach</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@schueler_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@faecher</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@ferien_feiertage</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@tablets</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@tablet_sets</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lehrer_order</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@klassen_order</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@current_email_addresses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@antikenfahrt_recipients</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@antikenfahrt_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@forschertage_recipients</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@forschertage_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@birthday_entries</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@server_etag</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RandomTag.html" title="RandomTag (class)">RandomTag</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="RandomTag.html#generate-class_method" title="RandomTag.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='int'>24</span><span class='rparen'>)</span>

    <span class='cvar'>@@index_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@predefined_external_users</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@bib_summoned_books</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@bib_unconfirmed_books</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@bib_summoned_books_last_ts</span> <span class='op'>=</span> <span class='int'>0</span>

    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/login-shortcuts.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/login-shortcuts.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
                <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
                <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>!=</span> <span class='int'>2</span>
                <span class='cvar'>@@login_shortcuts</span><span class='lbracket'>[</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parser.html" title="Parser (class)">Parser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parser.html#initialize-instance_method" title="Parser#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_faecher'>parse_faecher</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='comma'>,</span> <span class='id identifier rubyid_bezeichnung'>bezeichnung</span><span class='op'>|</span>
        <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_bezeichnung'>bezeichnung</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@off_days</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_ferien_feiertage'>parse_ferien_feiertage</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t0'>t0</span><span class='comma'>,</span> <span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='op'>|</span>
        <span class='cvar'>@@ferien_feiertage</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='symbol'>:from</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_t0'>t0</span><span class='comma'>,</span> <span class='symbol'>:to</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_t0'>t0</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_last'>last</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_t1'>t1</span><span class='rparen'>)</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_last'>last</span>
            <span class='cvar'>@@off_days</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
            <span class='id identifier rubyid_day'>day</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@tage_infos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_tage_infos'>parse_tage_infos</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t0'>t0</span><span class='comma'>,</span> <span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='op'>|</span>
        <span class='cvar'>@@tage_infos</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='symbol'>:from</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_t0'>t0</span><span class='comma'>,</span> <span class='symbol'>:to</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_t1'>t1</span><span class='comma'>,</span> <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
        <span class='cvar'>@@config</span> <span class='op'>=</span> <span class='const'>YAML</span><span class='op'>::</span><span class='id identifier rubyid_load_file'>load_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/config.yaml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
        <span class='cvar'>@@config</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:first_day</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2020-06-25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
            <span class='symbol'>:first_school_day</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2020-08-10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
            <span class='symbol'>:last_day</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2021-08-06</span><span class='tstring_end'>&#39;</span></span>
        <span class='rbrace'>}</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can&#39;t read /data/config.yaml, using a few default values:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='cvar'>@@config</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_lehrer'>parse_lehrer</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:can_log_in</span><span class='rbracket'>]</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:teacher</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
            <span class='symbol'>:shorthand</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:titel</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name_official</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_last_name_dativ</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name_dativ</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:geschlecht</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:can_log_in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:can_log_in</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:nc_login</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:matrix_login</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:matrix_login</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:initial_nc_password</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:initial_nc_password</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:roles</span> <span class='op'>=&gt;</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
        <span class='id identifier rubyid_matrix_login'>matrix_login</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:matrix_login</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oops: duplicate matrix / nc login: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='cvar'>@@email_for_matrix_login</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='rparen'>)</span>
        <span class='cvar'>@@email_for_matrix_login</span><span class='lbracket'>[</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='cvar'>@@lehrer_order</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@klassenleiter</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_klassenleiter'>parse_klassenleiter</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
        <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klassenleiter</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klassenleiter</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
                <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenleitung</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenleitung</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@shorthand_order</span> <span class='op'>=</span> <span class='cvar'>@@shorthands</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_la'>la</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_lb'>lb</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_la'>la</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zzz</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_la'>la</span> <span class='kw'>if</span> <span class='id identifier rubyid_la'>la</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_lb'>lb</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zzz</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_lb'>lb</span> <span class='kw'>if</span> <span class='id identifier rubyid_lb'>lb</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_la'>la</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_lb'>lb</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@klassen_order</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span>
    <span class='cvar'>@@klassen_index</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='cvar'>@@klassen_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='cvar'>@@index_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_id</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='cvar'>@@klassen_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ID_SALT-constant" title="KLASSEN_ID_SALT (constant)">KLASSEN_ID_SALT</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_stundenzeiten'>fix_stundenzeiten</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_disable_jitsi_for_email'>disable_jitsi_for_email</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/schueler/disable-jitsi.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/schueler/disable-jitsi.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
                <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
                <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_disable_jitsi_for_email'>disable_jitsi_for_email</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_line'>line</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_schueler'>parse_schueler</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
        <span class='id identifier rubyid_matrix_login'>matrix_login</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.\d+$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MATRIX_DOMAIN_SHORT-constant" title="MATRIX_DOMAIN_SHORT (constant)">MATRIX_DOMAIN_SHORT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>next</span>
            <span class='comment'># raise &quot;Klasse #{record[:klasse]} is included in KLASSEN_ORDER&quot;
</span>        <span class='kw'>end</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:teacher</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:official_first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:official_first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name_official</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klasse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klassenstufe</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\d</span><span class='regexp_end'>/</span></span> <span class='op'>?</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='symbol'>:geschlecht</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:nc_login</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.\d+$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='symbol'>:matrix_login</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='comma'>,</span>
            <span class='symbol'>:initial_nc_password</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:initial_nc_password</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:biber_password</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'><span class='object_link'><a href="#gen_password_for_email-class_method" title="Main.gen_password_for_email (method)">gen_password_for_email</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>biber</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='comma'>,</span>
            <span class='symbol'>:jitsi_disabled</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_disable_jitsi_for_email'>disable_jitsi_for_email</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='symbol'>:geburtstag</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:roles</span> <span class='op'>=&gt;</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:schueler</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oops: duplicate matrix / nc login: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='cvar'>@@email_for_matrix_login</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='rparen'>)</span>
        <span class='cvar'>@@email_for_matrix_login</span><span class='lbracket'>[</span><span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_birthday'>birthday</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_birthday'>birthday</span>
            <span class='id identifier rubyid_birthday_md'>birthday_md</span> <span class='op'>=</span> <span class='id identifier rubyid_birthday'>birthday</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span><span class='rbracket'>]</span>
            <span class='cvar'>@@birthday_entries</span><span class='lbracket'>[</span><span class='id identifier rubyid_birthday_md'>birthday_md</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='cvar'>@@birthday_entries</span><span class='lbracket'>[</span><span class='id identifier rubyid_birthday_md'>birthday_md</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_extra_accounts'>parse_extra_accounts</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Extra account already exists: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:teacher</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:titel</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:titel</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name_official</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_last_name_dativ</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name_dativ</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:geschlecht</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:can_log_in</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
            <span class='symbol'>:nc_login</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:initial_nc_password</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:initial_nc_password</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:roles</span> <span class='op'>=&gt;</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='comment'># Now we have schueler, teacher, and extra accounts, now assign the roles
</span>    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/roles/roles.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_role'>role</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
            <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&gt;&gt;</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_role'>role</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown role: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> in /data/roles/roles.txt!</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
                <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                    <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_role'>role</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Warning: Not assigning role </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> to unknown email address </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>, skipping...</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># Add roles from database
</span>    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_technikamt_users'>get_technikamt_users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:technikamt</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:role_transitive_origin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='comment'># now apply transitive roles
</span>    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_upgraded_someone'>upgraded_someone</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#ROLE_TRANSITIONS-constant" title="ROLE_TRANSITIONS (constant)">ROLE_TRANSITIONS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
            <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_role_from'>role_from</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
            <span class='id identifier rubyid_roles_to'>roles_to</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='rbrace'>}</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown role in ROLE_TRANSITIONS: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role_from'>role_from</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role_from'>role_from</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_roles_to'>roles_to</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='op'>|</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown role in ROLE_TRANSITIONS: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role'>role</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span>  <span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role_from'>role_from</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_roles_to'>roles_to</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='op'>|</span>
                        <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
                            <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:role_transitive_origin</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_role_from'>role_from</span>
                            <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_role'>role</span>
                            <span class='id identifier rubyid_upgraded_someone'>upgraded_someone</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_upgraded_someone'>upgraded_someone</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@users_for_role</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='op'>|</span>
            <span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
            <span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_all_prefixes'>all_prefixes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#USER_ID_SALT-constant" title="USER_ID_SALT (constant)">USER_ID_SALT</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:public_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#USER_ID_SALT-constant" title="USER_ID_SALT (constant)">USER_ID_SALT</a></span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>public</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_length'>length</span><span class='op'>|</span>
            <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_all_prefixes'>all_prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_all_prefixes'>all_prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@login_shortcuts</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_length'>length</span><span class='op'>|</span>
            <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_all_prefixes'>all_prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_all_prefixes'>all_prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_all_prefixes'>all_prefixes</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
            <span class='id identifier rubyid_length'>length</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shortest_prefix</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_geschwister'>parse_geschwister</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='rparen'>)</span>

    <span class='cvar'>@@tablets_for_school_streaming</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@tablets_which_are_lehrer_tablets</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_tablets'>parse_tablets</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='cvar'>@@tablets</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ooops: already got this tablet called </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span>
        <span class='id identifier rubyid_bg_color'>bg_color</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#TABLET_COLORS-constant" title="TABLET_COLORS (constant)">TABLET_COLORS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:color</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#TABLET_DEFAULT_COLOR-constant" title="TABLET_DEFAULT_COLOR (constant)">TABLET_DEFAULT_COLOR</a></span></span>
        <span class='id identifier rubyid_rgb'>rgb</span> <span class='op'>=</span> <span class='cvar'>@@renderer</span><span class='period'>.</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_bg_color'>bg_color</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>/</span> <span class='float'>255.0</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_gray'>gray</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb'>rgb</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>0.299</span> <span class='op'>+</span> <span class='id identifier rubyid_rgb'>rgb</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>0.587</span> <span class='op'>+</span> <span class='id identifier rubyid_rgb'>rgb</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>0.114</span>
        <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:bg_color</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_bg_color'>bg_color</span>
        <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:fg_color</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_gray'>gray</span> <span class='op'>&lt;</span> <span class='float'>0.5</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffffff</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#000000</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstreaming</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassen_stream</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstreaming</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:school_streaming</span><span class='rbracket'>]</span>
            <span class='cvar'>@@tablets_for_school_streaming</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_modus</span><span class='rbracket'>]</span>
            <span class='cvar'>@@tablets_which_are_lehrer_tablets</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@tablet_sets</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_tablet_sets'>parse_tablet_sets</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='comment'># add Eltern
</span>    <span class='cvar'>@@predefined_external_users</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:groups</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@schueler_for_klasse</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
        <span class='cvar'>@@predefined_external_users</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/eltern/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@predefined_external_users</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/eltern/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eltern der Klasse </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:entries</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
        <span class='rbrace'>}</span>
        <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='id identifier rubyid_eltern_email'>eltern_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='cvar'>@@predefined_external_users</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_eltern_email'>eltern_email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eltern von </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_lesson_key_tr'>fix_lesson_key_tr</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='rparen'>)</span>
    <span class='comment'># if DASHBOARD_SERVICE == &#39;ruby&#39;
</span>    <span class='comment'>#     debug lesson_key_tr.to_yaml
</span>    <span class='comment'># end
</span>
    <span class='cvar'>@@lessons</span><span class='comma'>,</span> <span class='cvar'>@@vertretungen</span><span class='comma'>,</span> <span class='cvar'>@@vplan_timestamp</span><span class='comma'>,</span> <span class='cvar'>@@day_messages</span><span class='comma'>,</span> <span class='cvar'>@@lesson_key_back_tr</span><span class='comma'>,</span> <span class='cvar'>@@original_lesson_key_for_lesson_key</span><span class='comma'>,</span> <span class='cvar'>@@shorthands_for_fach</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_timetable'>parse_timetable</span><span class='lparen'>(</span><span class='cvar'>@@config</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='comma'>,</span> <span class='cvar'>@@shorthands</span><span class='rparen'>)</span>
    <span class='cvar'>@@original_fach_for_lesson_key</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@original_lesson_key_for_lesson_key</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_vl'>vl</span><span class='op'>|</span>
        <span class='id identifier rubyid_vl'>vl</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
            <span class='cvar'>@@original_fach_for_lesson_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@current_lesson_key_order</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@current_lesson_key_info</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DASHBOARD_SERVICE-constant" title="DASHBOARD_SERVICE (constant)">DASHBOARD_SERVICE</a></span></span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span>
        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='id identifier rubyid_afach'>afach</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='id identifier rubyid_bfach'>bfach</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='id identifier rubyid_astufe'>astufe</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
            <span class='id identifier rubyid_bstufe'>bstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
            <span class='id identifier rubyid_afach'>afach</span> <span class='op'>==</span> <span class='id identifier rubyid_bfach'>bfach</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_astufe'>astufe</span> <span class='op'>==</span> <span class='id identifier rubyid_bstufe'>bstufe</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id identifier rubyid_astufe'>astufe</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_bstufe'>bstufe</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id identifier rubyid_afach'>afach</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_bfach'>bfach</span><span class='rparen'>)</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
            <span class='id identifier rubyid_lesson'>lesson</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_stunden'>stunden</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
            <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dow'>dow</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='op'>|</span>
                <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stunde'>stunde</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
                    <span class='id identifier rubyid_stunden'>stunden</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d/%02d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:tag</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:stunde</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_stunden'>stunden</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='cvar'>@@current_lesson_key_order</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
                <span class='cvar'>@@current_lesson_key_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='cvar'>@@current_lesson_key_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_stunden'>stunden</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># patch lesson_keys in @@lessons and @@vertretungen
</span>    <span class='cvar'>@@lessons</span><span class='comma'>,</span> <span class='cvar'>@@vertretungen</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_timetable'>parse_timetable</span><span class='lparen'>(</span><span class='cvar'>@@config</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='comma'>,</span> <span class='cvar'>@@shorthands</span><span class='rparen'>)</span>
    <span class='comment'># patch @@faecher
</span>    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='comment'># STDERR.puts &quot;[#{lesson_key}]&quot;
</span>        <span class='kw'>unless</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
            <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:first_school_day</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>&lt;</span> <span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:first_school_day</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:last_day</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>&gt;</span> <span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:last_day</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_date_for_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_timetable_today'>timetable_today</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LESSON_ID_SALT-constant" title="LESSON_ID_SALT (constant)">LESSON_ID_SALT</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_fach'>fach</span>
        <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pretty_fach'>pretty_fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sport Jungen</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sport</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sport Mädchen</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sport</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Evangelische Religionslehre</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Religion</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Katholische Religionslehre</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Religion</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Politikwissenschaft</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Politik</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Informationstechnischer Grundkurs</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ITG</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Politische Bildung</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Politik</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gesellschaftswissenschaften</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gewi</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Naturwissenschaften</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Nawi</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Streicher Anfänger</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Basketball</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Schach</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unterstufenorchester</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AG Garten</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BlblA</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AGs</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>neugriechisch</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ngr</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ngr)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Partnersprache</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PS</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Förderstunde</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fö</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>

        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:pretty_fach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span>
        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:pretty_fach_short</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_fach_short'>pretty_fach_short</span>
        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span>
    <span class='kw'>end</span>
    <span class='comment'># if we have 2x Chemie GK (11) for one teacher, differentiate with A and B
</span>    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_more_than_one'>more_than_one</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
                <span class='lparen'>(</span><span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
                    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='period'>.</span><span class='id identifier rubyid_rindex'>rindex</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span> <span class='op'>+</span> <span class='id identifier rubyid__'>_</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_pretty_folder_names_for_teacher'>pretty_folder_names_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_folder_name'>pretty_folder_name</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@lessons_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson'>lesson</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='cvar'>@@lessons_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='cvar'>@@lessons_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@lessons_for_shorthand</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson'>lesson</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='op'>|</span>
            <span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@klassen_for_shorthand</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@teachers_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_lessons_for_shorthand'>fix_lessons_for_shorthand</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='cvar'>@@lessons_for_shorthand</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
        <span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__a'>_a</span><span class='comma'>,</span> <span class='id identifier rubyid__b'>_b</span><span class='op'>|</span>
            <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid__a'>_a</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid__b'>_b</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
            <span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>:</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson'>lesson</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Testung_</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='op'>|</span>
                    <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                    <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_klasse'>klasse</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@klassen_for_shorthand</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
        <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_dates</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_dates</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='op'>|</span>
            <span class='id identifier rubyid_lesson'>lesson</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Testung</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='op'>|</span>
                    <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dow'>dow</span><span class='comma'>,</span> <span class='id identifier rubyid_stunden'>stunden</span><span class='op'>|</span>
                        <span class='id identifier rubyid_stunden'>stunden</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_stunde'>stunde</span><span class='op'>|</span>
                            <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_stunde'>stunde</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_last_start_date'>last_start_date</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_dates</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_start_date'>start_date</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_last_start_date'>last_start_date</span>
            <span class='id identifier rubyid_added_lesson_keys'>added_lesson_keys</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_last_start_date'>last_start_date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_removed_lesson_keys'>removed_lesson_keys</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_last_start_date'>last_start_date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_added_lesson_keys'>added_lesson_keys</span> <span class='op'>+</span> <span class='id identifier rubyid_removed_lesson_keys'>removed_lesson_keys</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_last_start_date'>last_start_date</span> <span class='op'>=</span> <span class='id identifier rubyid_start_date'>start_date</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_sesb_sus'>sesb_sus</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_sesb'>parse_sesb</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='id identifier rubyid_y'>y</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='cvar'>@@schueler_for_klasse</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sesb_sus'>sesb_sus</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sesb</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_kurse_for_schueler'>kurse_for_schueler</span><span class='comma'>,</span> <span class='id identifier rubyid_schueler_for_kurs'>schueler_for_kurs</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_kurswahl'>parse_kurswahl</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='id identifier rubyid_y'>y</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='cvar'>@@lessons</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='comma'>,</span> <span class='cvar'>@@original_lesson_key_for_lesson_key</span><span class='comma'>,</span> <span class='cvar'>@@shorthands</span><span class='rparen'>)</span>
    <span class='cvar'>@@kurse_for_schueler</span> <span class='op'>=</span> <span class='id identifier rubyid_kurse_for_schueler'>kurse_for_schueler</span>
    <span class='id identifier rubyid_wahlpflicht_sus_for_lesson_key'>wahlpflicht_sus_for_lesson_key</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_wahlpflichtkurswahl'>parse_wahlpflichtkurswahl</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='id identifier rubyid_y'>y</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='cvar'>@@lessons</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='comma'>,</span> <span class='cvar'>@@schueler_for_klasse</span><span class='rparen'>)</span>

    <span class='cvar'>@@materialamt_for_lesson</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User)-[r:HAS_AMT {amt: &#39;material&#39;}]-&gt;(l:Lesson)
</span><span class='tstring_content'>        RETURN u.email, l.key;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='cvar'>@@materialamt_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='cvar'>@@materialamt_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@lessons_for_user</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@schueler_for_lesson</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@schueler_offset_in_lesson</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span> <span class='op'>:</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>=</span> <span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>=</span> <span class='cvar'>@@lessons_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_kurse_for_schueler'>kurse_for_schueler</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_lessons'>lessons</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
                <span class='id identifier rubyid_lesson'>lesson</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
                <span class='lparen'>(</span><span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SpoM</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>||</span>
                <span class='lparen'>(</span><span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SpoJ</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_lessons'>lessons</span> <span class='op'>+=</span> <span class='id identifier rubyid_wahlpflicht_sus_for_lesson_key'>wahlpflicht_sus_for_lesson_key</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
        <span class='id identifier rubyid_lessons'>lessons</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_lessons'>lessons</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_wahlpflicht_sus_for_lesson_key'>wahlpflicht_sus_for_lesson_key</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
                    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_wahlpflicht_sus_for_lesson_key'>wahlpflicht_sus_for_lesson_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
                <span class='cvar'>@@lessons_for_user</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                <span class='cvar'>@@lessons_for_user</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@schueler_for_lesson</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_emails'>emails</span><span class='op'>|</span>
        <span class='cvar'>@@schueler_offset_in_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_sorted_emails'>sorted_emails</span> <span class='op'>=</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_sorted_emails'>sorted_emails</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='cvar'>@@schueler_offset_in_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@schueler_for_teacher</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lessons_for_shorthand</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_keys'>lesson_keys</span><span class='op'>|</span>
        <span class='cvar'>@@schueler_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_lesson_keys'>lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='cvar'>@@schueler_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@pausenaufsichten</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_pausenaufsichten'>parse_pausenaufsichten</span><span class='lparen'>(</span><span class='cvar'>@@config</span><span class='rparen'>)</span>

    <span class='cvar'>@@mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_antikenfahrt_groups'>update_antikenfahrt_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_forschertage_groups'>update_forschertage_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_mailing_lists'>update_mailing_lists</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@current_email_addresses</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse_current_email_addresses'>parse_current_email_addresses</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='cvar'>@@holiday_dates</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@ferien_feiertage</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_temp1'>temp1</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_temp1'>temp1</span>
            <span class='cvar'>@@holiday_dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_temp0'>temp0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@room_ids</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#ROOM_ORDER-constant" title="ROOM_ORDER (constant)">ROOM_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
        <span class='cvar'>@@room_ids</span><span class='lbracket'>[</span><span class='id identifier rubyid_room'>room</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ID_SALT-constant" title="KLASSEN_ID_SALT (constant)">KLASSEN_ID_SALT</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_room'>room</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@rooms_for_shorthand</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_room_order_set'>room_order_set</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#ROOM_ORDER-constant" title="ROOM_ORDER (constant)">ROOM_ORDER</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_undeclared_rooms'>undeclared_rooms</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_timetable_today'>timetable_today</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_timetable_today'>timetable_today</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
            <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_wday'>wday</span><span class='comma'>,</span> <span class='id identifier rubyid_day_info'>day_info</span><span class='op'>|</span>
                <span class='id identifier rubyid_day_info'>day_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stunde'>stunde</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='op'>|</span>
                    <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
                        <span class='lparen'>(</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:raum</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
                            <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                                <span class='kw'>if</span> <span class='id identifier rubyid_room_order_set'>room_order_set</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span><span class='rparen'>)</span>
                                    <span class='cvar'>@@rooms_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                                    <span class='cvar'>@@rooms_for_shorthand</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_room'>room</span>
                                <span class='kw'>else</span>
                                    <span class='id identifier rubyid_undeclared_rooms'>undeclared_rooms</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_room'>room</span>
                                <span class='kw'>end</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_undeclared_rooms'>undeclared_rooms</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Undeclared rooms: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_undeclared_rooms'>undeclared_rooms</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@lesson_keys_with_sus_feedback</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/kurswahl/sus_feedback.yaml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='cvar'>@@lesson_keys_with_sus_feedback</span> <span class='op'>=</span> <span class='const'>YAML</span><span class='op'>::</span><span class='id identifier rubyid_load_file'>load_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/kurswahl/sus_feedback.yaml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DASHBOARD_SERVICE</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse_zeugnisformulare'>parse_zeugnisformulare</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DASHBOARD_SERVICE</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/debug/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/debug/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variables'>class_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/debug</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.yaml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
                <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='const'>File</span><span class='op'>::</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/debug/emails.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compile_css-class_method">
  
    .<strong>compile_css</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1439
1440
1441
1442
1443
1444
1445
1446
1447
1448
1449
1450
1451
1452
1453
1454
1455
1456
1457
1458
1459
1460
1461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1439</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_compile_css'>compile_css</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='lbracket'>[</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/flowbite/flowbite.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/bootstrap/bootstrap.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/summernote/summernote-bs4.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/fork-awesome/fork-awesome.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/fullcalendar/main.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/bootstrap4-toggle/bootstrap4-toggle.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/dropzone/dropzone.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/chart.js/Chart.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/styles.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/cling.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/print.min.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/odometer-theme-default.css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='rbracket'>]</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_compile_files'>compile_files</span><span class='lparen'>(</span><span class='symbol'>:css</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/css</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_files'>files</span><span class='rparen'>)</span>
    <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/gen/css/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/gen/css/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/css/compiled-</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='symbol'>:css</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sha1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.css</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='symbol'>:css</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compile_files-class_method">
  
    .<strong>compile_files</strong>(key, mimetype, paths)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1349
1350
1351
1352
1353
1354
1355
1356
1357
1358
1359
1360
1361
1362
1363
1364
1365
1366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1349</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_compile_files'>compile_files</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_mimetype'>mimetype</span><span class='comma'>,</span> <span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
    <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:content</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='rbrace'>}</span>

    <span class='id identifier rubyid_latest_file_timestamp'>latest_file_timestamp</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>

    <span class='kw'>if</span> <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_latest_file_timestamp'>latest_file_timestamp</span>
        <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sha1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_file_timestamp'>latest_file_timestamp</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compile_js-class_method">
  
    .<strong>compile_js</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408
1409
1410
1411
1412
1413
1414
1415
1416
1417
1418
1419
1420
1421
1422
1423
1424
1425
1426
1427
1428
1429
1430
1431
1432
1433
1434
1435
1436
1437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1397</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_compile_js'>compile_js</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='lbracket'>[</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/jquery/jquery-3.6.1.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/jquery-ui/jquery-ui.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/popper.js/popper.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/bootstrap/bootstrap.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/fullcalendar/main.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/fullcalendar/de.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/pako/pako_inflate.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/bootstrap4-toggle/bootstrap4-toggle.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/summernote/summernote-bs4.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/summernote/summernote-de-DE.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/clipboard/clipboard.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/moment/moment-with-locales.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/dropzone/dropzone.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/chart.js/Chart.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/jszip/dist/jszip.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/flowbite/flowbite.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/code.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/zxing.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/barcode-widget.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sound.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/howler.core.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sortable-table.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/print.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/odometer.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/zoom.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/turn.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/scissor.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/hash.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/typewriter.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/include/bootstrap-autocomplete.min.js</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='rbracket'>]</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_compile_files'>compile_files</span><span class='lparen'>(</span><span class='symbol'>:js</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/javascript</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_files'>files</span><span class='rparen'>)</span>
    <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/gen/js/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/gen/js/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/js/compiled-</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='symbol'>:js</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sha1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.js</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='cvar'>@@compiled_files</span><span class='lbracket'>[</span><span class='symbol'>:js</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="determine_lehrmittelverein_state_for_all-class_method">
  
    .<strong>determine_lehrmittelverein_state_for_all</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lehrbuchverein.rb', line 6</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_determine_lehrmittelverein_state_for_all'>determine_lehrmittelverein_state_for_all</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@lehrmittelverein_state_cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='cvar'>@@lehrmittelverein_state_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {lmv_no_pay: true})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='cvar'>@@lehrmittelverein_state_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:jahr</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)-[:PAID_FOR]-&gt;(j:Lehrbuchvereinsjahr {jahr: $jahr})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='cvar'>@@lehrmittelverein_state_cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="determine_zeugnislisten-class_method">
  
    .<strong>determine_zeugnislisten</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 77</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_determine_zeugnislisten'>determine_zeugnislisten</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='comment'># STDERR.puts &quot;ATTENTION determine_zeugnislisten() IS DOING NOTHING RIGHT NOW&quot;
</span>    <span class='comment'># return
</span>
    <span class='cvar'>@@zeugnisliste_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@zeugnisliste_for_lehrer</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='comment'># @@need_sozialverhalten is a hash of teacher shorthands and klassen
</span>    <span class='cvar'>@@need_sozialverhalten</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='id identifier rubyid_kurse_for_klasse'>kurse_for_klasse</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_KLASSEN_ORDER</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='cvar'>@@lessons_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rbracket'>]</span>
    <span class='kw'>end</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_delegates'>delegates</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_delegates_for_klasse'>delegates_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:path</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (n:ZeugnisDelegate)-[:WHO]-&gt;(u:User)
</span><span class='tstring_content'>        WHERE n.path STARTS WITH $path
</span><span class='tstring_content'>        RETURN n.path AS path, u.email AS email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_delegates_for_klasse'>delegates_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_delegates_for_klasse'>delegates_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_delegates_for_klasse'>delegates_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span>
        <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='int'>42</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'>ANLAGE_SOZIALVERHALTEN</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*</span><span class='tstring_end'>&#39;</span></span>
            <span class='const'>ZEUGNIS_KLASSEN_ORDER</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='kw'>if</span> <span class='const'>ZEUGNIS_KLASSEN_ORDER</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>zeugnis config: unknown klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='const'>ZEUGNIS_KLASSEN_ORDER</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson_keys_for_fach'>lesson_keys_for_fach</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='comment'># get teachers from stundenplan
</span>        <span class='lparen'>(</span><span class='id identifier rubyid_kurse_for_klasse'>kurse_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_kurs'>kurs</span><span class='op'>|</span>
            <span class='id identifier rubyid_lesson_keys_for_fach'>lesson_keys_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_lesson_keys_for_fach'>lesson_keys_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='const'>ZEUGNIS_CONSOLIDATE_FACH</span><span class='lbracket'>[</span><span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
            <span class='comment'># next unless FAECHER_FOR_ZEUGNIS[ZEUGNIS_SCHULJAHR][ZEUGNIS_HALBJAHR].include?(fach) || FAECHER_FOR_ZEUGNIS[ZEUGNIS_SCHULJAHR][ZEUGNIS_HALBJAHR].include?(&#39;$&#39; + fach)
</span>            <span class='id identifier rubyid_shorthands'>shorthands</span> <span class='op'>=</span> <span class='id identifier rubyid_kurs'>kurs</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span>
            <span class='comment'># check if we have delegate overrides
</span>            <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_shorthands'>shorthands</span> <span class='op'>=</span> <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_shorthands'>shorthands</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
                <span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>if</span> <span class='const'>FAECHER_SPRACHEN</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fach'>fach</span><span class='rparen'>)</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'>_AT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'>_SL</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                    <span class='const'>SOZIALNOTEN_KEYS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                        <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='kw'>end</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='comment'># get teachers from delegate entries
</span>        <span class='lparen'>(</span><span class='id identifier rubyid_delegates_for_klasse'>delegates_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_emails'>emails</span><span class='op'>|</span>
            <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>
            <span class='comment'># next unless FAECHER_FOR_ZEUGNIS[ZEUGNIS_SCHULJAHR][ZEUGNIS_HALBJAHR].include?(fach) || FAECHER_FOR_ZEUGNIS[ZEUGNIS_SCHULJAHR][ZEUGNIS_HALBJAHR].include?(&#39;$&#39; + fach)
</span>            <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>if</span> <span class='const'>FAECHER_SPRACHEN</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fach'>fach</span><span class='rparen'>)</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'>_AT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'>_SL</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                    <span class='const'>SOZIALNOTEN_KEYS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                        <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='kw'>end</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>

        <span class='kw'>end</span>
        
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach_is_delegate</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='lparen'>(</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_shorthand'>shorthand</span>
            <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VT_UE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VS_UE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VSP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                <span class='const'>SOZIALNOTEN_KEYS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>/_KL</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/_KL</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach_is_delegate</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='id identifier rubyid_delegates'>delegates</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span>
                <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_shorthand'>shorthand</span>
                <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VT_UE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VS_UE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>VSP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_need_sv_for_klasse'>need_sv_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                    <span class='const'>SOZIALNOTEN_KEYS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                        <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                        <span class='cvar'>@@zeugnisliste_for_lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='embexpr_end'>}</span><span class='tstring_content'>/_KL</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='kw'>end</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_KL</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
        <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zeugnis_faecher_for_emails'>zeugnis_faecher_for_emails</span><span class='lparen'>(</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:faecher</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_faecher'>faecher</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_x'>x</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:faecher</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:wahlfach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_faecher'>faecher</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span><span class='rbracket'>]</span>
        <span class='kw'>end</span><span class='rbracket'>]</span>
        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:faecher</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='op'>|</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_shorthands_for_fach'>shorthands_for_fach</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
            <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer_for_fach_is_delegate</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_delegates'>delegates</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='ivar'>@mock</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span>
            <span class='ivar'>@mock</span><span class='lbracket'>[</span><span class='symbol'>:nachnamen</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mock/nachnamen.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='ivar'>@mock</span><span class='lbracket'>[</span><span class='symbol'>:vornamen</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mock/vornamen-m.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mock/vornamen-w.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:index_for_schueler</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
            <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:index_for_schueler</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_index'>index</span>
        <span class='kw'>end</span>

        <span class='cvar'>@@zeugnisliste_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:schueler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_geschlecht'>geschlecht</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>:</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span>
            <span class='lbrace'>{</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
                <span class='symbol'>:zeugnis_key</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zeugnis_key_for_email'>zeugnis_key_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='symbol'>:official_first_name</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span> <span class='op'>?</span> <span class='ivar'>@mock</span><span class='lbracket'>[</span><span class='symbol'>:vornamen</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_geschlecht'>geschlecht</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>:</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:official_first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span> <span class='op'>?</span> <span class='ivar'>@mock</span><span class='lbracket'>[</span><span class='symbol'>:nachnamen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>:</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:geburtstag</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNIS_USE_MOCK_NAMES-constant" title="ZEUGNIS_USE_MOCK_NAMES (constant)">ZEUGNIS_USE_MOCK_NAMES</a></span></span> <span class='op'>?</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%04d-%02d-%02d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>12</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>28</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:geschlecht</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_geschlecht'>geschlecht</span><span class='comma'>,</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_lesson_key_tr-class_method">
  
    .<strong>fix_lesson_key_tr</strong>(lesson_key_tr)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/credentials.rb', line 354</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_lesson_key_tr'>fix_lesson_key_tr</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span><span class='rparen'>)</span>
    <span class='comment'># # Kursawe: Agr 9c =&gt; Agr 9c, 9e
</span>    <span class='comment'># lesson_key_tr[&#39;Agr~741a&#39;] = &#39;Agr~184a&#39;
</span>    <span class='comment'># # Hollmann-Stelzer: Agr 10c =&gt; Agr 10c, 10e
</span>    <span class='comment'># lesson_key_tr[&#39;Agr~207a&#39;] = &#39;Agr~403a&#39;
</span>    <span class='comment'># # Munk: Deutsch GK 11
</span>    <span class='comment'># lesson_key_tr[&#39;de-G01~497a&#39;] = &#39;de-G01~474a&#39;
</span>    <span class='comment'># # Crome: Deutsch GK 11
</span>    <span class='comment'># lesson_key_tr[&#39;de3~497a&#39;] = &#39;de1~477a&#39;
</span>    <span class='comment'># # Liebe: Deutsch GK 11
</span>    <span class='comment'># lesson_key_tr[&#39;de6~497a&#39;] = &#39;de1~769a&#39;
</span>    <span class='comment'># # Kilian: Deutsch GK 12
</span>    <span class='comment'># lesson_key_tr[&#39;de5~755a&#39;] = &#39;de1~513a&#39;
</span>    <span class='comment'># # AP: Deutsch GK 12
</span>    <span class='comment'># lesson_key_tr[&#39;de3~755a&#39;] = &#39;de1~474b&#39;
</span>    <span class='comment'># # AP / Ho: Deutsch GK 11
</span>    <span class='comment'># lesson_key_tr[&#39;de4~497a&#39;] = &#39;de1~477a&#39;
</span>    <span class='comment'># lesson_key_tr[&#39;ds-G119~791a&#39;] = &#39;ds-G119~505a&#39;
</span>    <span class='comment'># lesson_key_tr[&#39;mo-G46~795a&#39;] = &#39;mo-G46~786a&#39;
</span>    <span class='comment'># # [???] de4~497a Deutsch GK 11 Frau Arias Porras, Frau Hodgkiss 1 Stunde
</span>    <span class='comment'># # [???] en1~499a Englisch GK 11 Herr Weging, 6 Stunden
</span>    <span class='comment'># lesson_key_tr[&#39;de03&#39;] = &#39;de-G02&#39;
</span>
    <span class='id identifier rubyid_lesson_key_tr'>lesson_key_tr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_lessons_for_shorthand-class_method">
  
    .<strong>fix_lessons_for_shorthand</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/credentials.rb', line 380</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_lessons_for_shorthand'>fix_lessons_for_shorthand</span>
    <span class='comment'># @@lessons_for_shorthand[&#39;Led&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Led&#39;] &lt;&lt; &#39;Ma~99a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] &lt;&lt; &#39;Ge~353a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] &lt;&lt; &#39;GE-L11~474a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] &lt;&lt; &#39;evR~331a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] &lt;&lt; &#39;evR~709a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Sch&#39;] &lt;&lt; &#39;evR~399a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Eb&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Eb&#39;] &lt;&lt; &#39;katR~830a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] &lt;&lt; &#39;ch-G35~788a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] &lt;&lt; &#39;Ch~115a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] &lt;&lt; &#39;Ch~160a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] &lt;&lt; &#39;BI-L115~515a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Wr&#39;] &lt;&lt; &#39;Bio~190a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Eb&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Eb&#39;] &lt;&lt; &#39;Pol~118a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] ||= []
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;D~609a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;EN-L105-107~513a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~21a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~258a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;EN-L05-07~529a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~354a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~611a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~196a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;en-G109-111~557a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~48a&#39;
</span>    <span class='comment'># @@lessons_for_shorthand[&#39;Rk&#39;] &lt;&lt; &#39;En~12a&#39;
</span>
    <span class='comment'># [&#39;5b&#39;, &#39;7a&#39;, &#39;8a&#39;, &#39;9b&#39;, &#39;11&#39;].each do |klasse|
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse] ||= {}
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse][&#39;Sch&#39;] ||= {}
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Sch&#39;] ||= Set.new()
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Sch&#39;] &lt;&lt; klasse
</span>    <span class='comment'># end
</span>    <span class='comment'># [&#39;7a&#39;, &#39;7b&#39;, &#39;7c&#39;].each do |klasse|
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse] ||= {}
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse][&#39;Eb&#39;] ||= {}
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Eb&#39;] ||= Set.new()
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Eb&#39;] &lt;&lt; klasse
</span>    <span class='comment'># end
</span>    <span class='comment'># [&#39;8a&#39;, &#39;9a&#39;, &#39;9c&#39;, &#39;11&#39;, &#39;12&#39;].each do |klasse|
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse] ||= {}
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse][&#39;Wr&#39;] ||= {}
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Wr&#39;] ||= Set.new()
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Wr&#39;] &lt;&lt; klasse
</span>    <span class='comment'># end
</span>    <span class='comment'># [&#39;11&#39;, &#39;12&#39;, &#39;5b&#39;, &#39;5c&#39;, &#39;6c&#39;, &#39;6d&#39;, &#39;8a&#39;, &#39;9b&#39;, &#39;9e&#39;].each do |klasse|
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse] ||= {}
</span>    <span class='comment'>#     @@teachers_for_klasse[klasse][&#39;Rk&#39;] ||= {}
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Rk&#39;] ||= Set.new()
</span>    <span class='comment'>#     @@klassen_for_shorthand[&#39;Rk&#39;] &lt;&lt; klasse
</span>    <span class='comment'># end
</span>    <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_Sek</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_parsed_klasse-class_method">
  
    .<strong>fix_parsed_klasse</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441
442</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/credentials.rb', line 439</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_parsed_klasse'>fix_parsed_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_d'>d</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_public_event_config-class_method">
  
    .<strong>fix_public_event_config</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/public_event.rb', line 350</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_public_event_config'>fix_public_event_config</span>
    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fixing public event config!</span><span class='tstring_end'>&quot;</span></span>
    <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:auto_rows</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:auto_rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='op'>|</span>
                <span class='id identifier rubyid_row'>row</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='lbracket'>[</span><span class='symbol'>:day</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w(</span><span class='tstring_content'>So</span><span class='words_sep'> </span><span class='tstring_content'>Mo</span><span class='words_sep'> </span><span class='tstring_content'>Di</span><span class='words_sep'> </span><span class='tstring_content'>Mi</span><span class='words_sep'> </span><span class='tstring_content'>Do</span><span class='words_sep'> </span><span class='tstring_content'>Fr</span><span class='words_sep'> </span><span class='tstring_content'>Sa</span><span class='tstring_end'>)</span></span><span class='lbracket'>[</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='lbracket'>[</span><span class='symbol'>:spans</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_span'>span</span><span class='op'>|</span>
                    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='lbracket'>[</span><span class='symbol'>:day</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_span'>span</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                    <span class='kw'>while</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>&lt;=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='lbracket'>[</span><span class='symbol'>:day</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_span'>span</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
                            <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                            <span class='symbol'>:deadline</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:auto_rows_no_signup_deadline</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span> <span class='op'>-</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:auto_rows_no_signup_deadline</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>3600</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                            <span class='symbol'>:description</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                            <span class='symbol'>:row_description</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='comma'>,</span>
                            <span class='symbol'>:capacity</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
                        <span class='rbrace'>}</span>
                        <span class='id identifier rubyid_t'>t</span> <span class='op'>+=</span> <span class='id identifier rubyid_auto_entry'>auto_entry</span><span class='lbracket'>[</span><span class='symbol'>:duration</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>60</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_rows'>rows</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_entry'>entry</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_stundenzeiten-class_method">
  
    .<strong>fix_stundenzeiten</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/credentials.rb', line 220</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_stundenzeiten'>fix_stundenzeiten</span>
    <span class='id identifier rubyid_hd'>hd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2020-08-10</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:35</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:15</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:00</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:30</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_hd'>hd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2020-11-23</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>==</span> <span class='int'>5</span> <span class='op'>||</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>==</span> <span class='int'>6</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7e</span><span class='tstring_end'>&#39;</span></span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:15</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:00</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7c</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>07:15</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:30</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_hd'>hd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2021-01-04</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7e</span><span class='tstring_end'>&#39;</span></span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:15</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:00</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:25</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:10</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:50</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:35</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>08:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:45</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:30</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10:35</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:40</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:25</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>14:30</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:15</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>15:20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:05</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:10</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOURS_FOR_KLASSE-constant" title="HOURS_FOR_KLASSE (constant)">HOURS_FOR_KLASSE</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_hd'>hd</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:55</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>17:40</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="force_reload_monitors-class_method">
  
    .<strong>force_reload_monitors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 23</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_force_reload_monitors'>force_reload_monitors</span>
    <span class='lparen'>(</span><span class='cvar'>@@ws_clients</span><span class='lbracket'>[</span><span class='symbol'>:monitor</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_client_id'>client_id</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_ws'>ws</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:ws</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_ws'>ws</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>force_reload</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_password_for_email-class_method">
  
    .<strong>gen_password_for_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 479</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'>gen_password_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_chars'>chars</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BCDFGHJKMNPQRSTVWXYZ23456789</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#EMAIL_PASSWORD_SALT-constant" title="EMAIL_PASSWORD_SALT (constant)">EMAIL_PASSWORD_SALT</a></span></span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
    <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='id identifier rubyid_sha2'>sha2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>while</span> <span class='kw'>true</span> <span class='kw'>do</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-z]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[A-Z]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[0-9]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>break</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='int'>8</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_chars'>chars</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
            <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_downcase!'>downcase!</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>==</span> <span class='int'>1</span>
            <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='id identifier rubyid_c'>c</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>
        <span class='int'>4</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_chars'>chars</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
            <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_downcase!'>downcase!</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>==</span> <span class='int'>1</span>
            <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='id identifier rubyid_c'>c</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_password'>password</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_all_homeschooling_users-class_method">
  
    .<strong>get_all_homeschooling_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331
332
333
334
335</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 325</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_all_homeschooling_users'>get_all_homeschooling_users</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {homeschooling: true})
</span><span class='tstring_content'>        RETURN u.email
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_all_homeschooling_users'>all_homeschooling_users</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
        <span class='id identifier rubyid_all_homeschooling_users'>all_homeschooling_users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_all_homeschooling_users'>all_homeschooling_users</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_all_stream_restrictions-class_method">
  
    .<strong>get_all_stream_restrictions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lesson.rb', line 475</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_all_stream_restrictions'>get_all_stream_restrictions</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (l:Lesson)
</span><span class='tstring_content'>        RETURN l.key AS lesson_key, COALESCE(l.stream_restriction, []) AS restriction
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_restriction'>restriction</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>restriction</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_restriction'>restriction</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='int'>5</span>
            <span class='id identifier rubyid_restriction'>restriction</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_restriction'>restriction</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_aula_events-class_method">
  
    .<strong>get_aula_events</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/aula.rb', line 3</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_aula_events'>get_aula_events</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (e:AulaEvent)
</span><span class='tstring_content'>        RETURN e
</span><span class='tstring_content'>        ORDER BY toInteger(e.number), e.title;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_ab_week-class_method">
  
    .<strong>get_current_ab_week</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns A or B or nil</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 349</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_current_ab_week'>get_current_ab_week</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_switch_week_for_date'>get_switch_week_for_date</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_status-class_method">
  
    .<strong>get_current_salzh_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 343</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_status'>get_current_salzh_status</span>
    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_salzh_status_for_emails'>get_salzh_status_for_emails</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_entries'>entries</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
            <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klasse</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klasse_tr</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:status_end_date</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:status_end_date</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entries'>entries</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_status_for_all_teachers-class_method">
  
    .<strong>get_current_salzh_status_for_all_teachers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391
392
393
394
395
396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 387</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_status_for_all_teachers'>get_current_salzh_status_for_all_teachers</span>
    <span class='id identifier rubyid_all_entries'>all_entries</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_status'><span class='object_link'><a href="#get_current_salzh_status-class_method" title="Main.get_current_salzh_status (method)">get_current_salzh_status</a></span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_all_entries'>all_entries</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='cvar'>@@schueler_for_teacher</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entries'>entries</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_sus-class_method">
  
    .<strong>get_current_salzh_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 259</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_sus'>get_current_salzh_sus</span>
    <span class='comment'># purge stale salzh entries !!!
</span>    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_purge_stale_salzh_entries'><span class='object_link'><a href="#purge_stale_salzh_entries-class_method" title="Main.purge_stale_salzh_entries (method)">purge_stale_salzh_entries</a></span></span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (s:Salzh)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN u.email, COALESCE(s.mode, &#39;salzh&#39;) AS smode, s.end_date;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>
    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smode</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_end_date'>end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s.end_date</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_entries'>entries</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
            <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klasse</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:klasse_tr</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='symbol'>:salzh_mode</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span>
            <span class='symbol'>:salzh_end_date</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_date'>end_date</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entries'>entries</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_homeschooling_for_user-class_method">
  
    .<strong>get_homeschooling_for_user</strong>(email, datum = nil, is_homeschooling_user = nil, group2_for_email = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380
381
382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 378</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user'>get_homeschooling_for_user</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_datum'>datum</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_datum'>datum</span> <span class='op'>||=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user_by_switch_week'>get_homeschooling_for_user_by_switch_week</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user_by_dauer_salzh'>get_homeschooling_for_user_by_dauer_salzh</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user_by_switch_week'>get_homeschooling_for_user_by_switch_week</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_homeschooling_for_user_by_dauer_salzh-class_method">
  
    .<strong>get_homeschooling_for_user_by_dauer_salzh</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 353</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user_by_dauer_salzh'>get_homeschooling_for_user_by_dauer_salzh</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.homeschooling, false) AS homeschooling
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_marked_as_homeschooling'>marked_as_homeschooling</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>homeschooling</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_marked_as_homeschooling'>marked_as_homeschooling</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_homeschooling_for_user_by_switch_week-class_method">
  
    .<strong>get_homeschooling_for_user_by_switch_week</strong>(email, datum, group2_for_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369
370
371
372
373
374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 362</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user_by_switch_week'>get_homeschooling_for_user_by_switch_week</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_group2'>group2</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            RETURN COALESCE(u.group2, &#39;A&#39;) AS group2
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_group2'>group2</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group2</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_group2'>group2</span> <span class='op'>=</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_current_week'>current_week</span> <span class='op'>=</span> <span class='id identifier rubyid_get_switch_week_for_date'>get_switch_week_for_date</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_marked_as_homeschooling_by_week'>marked_as_homeschooling_by_week</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_week'>current_week</span> <span class='op'>!=</span> <span class='id identifier rubyid_group2'>group2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_marked_as_homeschooling_by_week'>marked_as_homeschooling_by_week</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_homework_feedback_for_lesson_key-class_method">
  
    .<strong>get_homework_feedback_for_lesson_key</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/homework.rb', line 23</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_homework_feedback_for_lesson_key'>get_homework_feedback_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hf'>hf</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li.offset</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:hf</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hf</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:FROM]-(hf:HomeworkFeedback)-[:FOR]-&gt;(li:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $lesson_key})
</span><span class='tstring_content'>        RETURN hf, li.offset
</span><span class='tstring_content'>        ORDER BY li.offset;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_hf'>hf</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__entry'>_entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid__entry'>_entry</span><span class='lbracket'>[</span><span class='symbol'>:hf</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid__entry'>_entry</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:state_histogram</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
            <span class='symbol'>:time_spent_min</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='symbol'>:time_spent_max</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span>
        <span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state_histogram</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state_histogram</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_max</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_max</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_max</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_final_result'>final_result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_max</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_max</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:time_spent_min</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state_histogram</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_short_parts'>short_parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEWORK_FEEDBACK_STATES-constant" title="HOMEWORK_FEEDBACK_STATES (constant)">HOMEWORK_FEEDBACK_STATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_state'>state</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state_histogram</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEWORK_FEEDBACK_EMOJIS-constant" title="HOMEWORK_FEEDBACK_EMOJIS (constant)">HOMEWORK_FEEDBACK_EMOJIS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> × </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state_histogram</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_short_parts'>short_parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEWORK_FEEDBACK_EMOJIS-constant" title="HOMEWORK_FEEDBACK_EMOJIS (constant)">HOMEWORK_FEEDBACK_EMOJIS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:short_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_short_parts'>short_parts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_final_result'>final_result</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_final_result'>final_result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_hotspot_klassen-class_method">
  
    .<strong>get_hotspot_klassen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 227</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_hotspot_klassen'>get_hotspot_klassen</span>
    <span class='comment'># purge stale entries
</span>    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_purge_stale_salzh_entries'><span class='object_link'><a href="#purge_stale_salzh_entries-class_method" title="Main.purge_stale_salzh_entries (method)">purge_stale_salzh_entries</a></span></span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (k:Klasse)
</span><span class='tstring_content'>        RETURN k.klasse, k.hotspot_end_date;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>k.klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>k.hotspot_end_date</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># io.puts &quot;&lt;td&gt;#{@@schueler_for_klasse[klasse].size}&lt;/td&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_hotspot_end_date'>hotspot_end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;input-group input-group-sm&#39;&gt;&lt;input type=&#39;date&#39; class=&#39;form-control ti_hotspot_end_date&#39; value=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hotspot_end_date'>hotspot_end_date</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; /&gt;&lt;div class=&#39;input-group-append&#39;&gt;&lt;button </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hotspot_end_date'>hotspot_end_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> class=&#39;btn </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hotspot_end_date'>hotspot_end_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-danger</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu_delete_hotspot_end_date&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_lesson_data-class_method">
  
    .<strong>get_lesson_data</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lesson.rb', line 132</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_lesson_data'>get_lesson_data</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='comment'># purge unconfirmed tablet bookings for this lesson_key
</span>    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (t:Tablet)&lt;-[:WHICH]-(b:Booking {confirmed: false})-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        DETACH DELETE b;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='comment'># purge unconfirmed tablet bookings for any lesson key older than 30 minutes
</span>    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='int'>30</span> <span class='op'>*</span> <span class='int'>60</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (t:Tablet)&lt;-[:WHICH]-(b:Booking {confirmed: false})-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson)
</span><span class='tstring_content'>        WHERE b.updated &lt; $timestamp
</span><span class='tstring_content'>        DETACH DELETE b;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        RETURN i
</span><span class='tstring_content'>        ORDER BY i.offset;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
            <span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='comma'>,</span> <span class='symbol'>:updated</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:text_comment_from</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tcf.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:TO]-(c:TextComment)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        MATCH (c)-[:FROM]-&gt;(tcf:User)
</span><span class='tstring_content'>        RETURN c, u, tcf.email
</span><span class='tstring_content'>        ORDER BY c.offset;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:text_comment</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:text_comment_from</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:text_comment_from</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:comment</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:audio_comment_from</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>acf.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:TO]-(c:AudioComment)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        MATCH (c)-[:FROM]-&gt;(acf:User)
</span><span class='tstring_content'>        RETURN c, u, acf.email
</span><span class='tstring_content'>        ORDER BY c.offset;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tag</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:audio_comment_tag</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tag</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:duration</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:duration</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:comment</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:comments</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:audio_comment_from</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:audio_comment_from</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li.offset</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:feedback</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hf</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:FROM]-(hf:HomeworkFeedback)-[:FOR]-&gt;(li:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        RETURN hf, li.offset, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
            <span class='lbracket'>[</span><span class='symbol'>:done</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:summary</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Es liegt bisher kein Feedback zu dieser Stunde vor.</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_feedback_str'>feedback_str</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_state_histogram'>state_histogram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_time_spent_values'>time_spent_values</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_feedback'>feedback</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_feedback'>feedback</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_state_histogram'>state_histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_feedback'>feedback</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_state_histogram'>state_histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_feedback'>feedback</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_feedback'>feedback</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_time_spent_values'>time_spent_values</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_feedback'>feedback</span><span class='lbracket'>[</span><span class='symbol'>:time_spent</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_state_histogram'>state_histogram</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEWORK_FEEDBACK_STATES-constant" title="HOMEWORK_FEEDBACK_STATES (constant)">HOMEWORK_FEEDBACK_STATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#HOMEWORK_FEEDBACK_EMOJIS-constant" title="HOMEWORK_FEEDBACK_EMOJIS (constant)">HOMEWORK_FEEDBACK_EMOJIS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> × </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state_histogram'>state_histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_state_histogram'>state_histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SuS haben zwischen </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'> und </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten für diese Hausaufgabe benötigt (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Angabe</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_spent_values'>time_spent_values</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>).</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:feedback</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:summary</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_feedback_str'>feedback_str</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (t:Tablet)&lt;-[:WHICH]-(b:Booking {confirmed: true})-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        RETURN t.id, i.offset;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i.offset</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_tablet_id'>tablet_id</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:booked_tablet</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:tablet_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='comma'>,</span>
            <span class='symbol'>:lagerort</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lagerort</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:bg_color</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:bg_color</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:fg_color</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:fg_color</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (t:TabletSet)&lt;-[:BOOKED]-(b:Booking)-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson {key: $key})
</span><span class='tstring_content'>        RETURN t.id, i.offset
</span><span class='tstring_content'>        ORDER BY t.id;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i.offset</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:booked_tablet_sets</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:booked_tablet_sets</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:booked_tablet_sets_tablet_count</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_offset'>offset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:booked_tablet_sets_tablet_count</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_regular_testing_days-class_method">
  
    .<strong>get_regular_testing_days</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1012
1013
1014
1015
1016
1017
1018
1019
1020</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 1012</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_regular_testing_days'>get_regular_testing_days</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pattern</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MERGE (n:RegularTestingDays)
</span><span class='tstring_content'>        RETURN COALESCE(n.pattern, 0) AS pattern;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>&gt;&gt;</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_salzh_status_for_emails-class_method">
  
    .<strong>get_salzh_status_for_emails</strong>(emails = nil, force_refresh = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 32</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_salzh_status_for_emails'>get_salzh_status_for_emails</span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_force_refresh'>force_refresh</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span> 

    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_purge_stale_salzh_entries'><span class='object_link'><a href="#purge_stale_salzh_entries-class_method" title="Main.purge_stale_salzh_entries (method)">purge_stale_salzh_entries</a></span></span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_temp2'>temp2</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (k:Klasse)
</span><span class='tstring_content'>        RETURN k.klasse, k.hotspot_end_date;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>k.klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>k.hotspot_end_date</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (s:Salzh)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>            RETURN COALESCE(s.mode, &#39;salzh&#39;) AS smode, s.end_date, u.email;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_temp2'>temp2</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User)
</span><span class='tstring_content'>            RETURN u.email, u.freiwillig_salzh, COALESCE(u.testing_required, TRUE) AS testing_required,
</span><span class='tstring_content'>            COALESCE(u.voluntary_testing, FALSE) AS voluntary_testing;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>else</span>
        <span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_emails'>emails</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>
        <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:emails</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_emails'>emails</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (s:Salzh)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>            WHERE u.email IN $emails
</span><span class='tstring_content'>            RETURN COALESCE(s.mode, &#39;salzh&#39;) AS smode, s.end_date, u.email;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_temp2'>temp2</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:emails</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_emails'>emails</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User)
</span><span class='tstring_content'>            WHERE u.email IN $emails
</span><span class='tstring_content'>            RETURN u.email, u.freiwillig_salzh, COALESCE(u.testing_required, TRUE) AS testing_required,
</span><span class='tstring_content'>            COALESCE(u.voluntary_testing, FALSE) AS voluntary_testing;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp2'>temp2</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:freiwillig_salzh</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.freiwillig_salzh</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='comment'># end_date or nil
</span>            <span class='symbol'>:testing_required</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>testing_required</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:voluntary_testing</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>voluntary_testing</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>smode</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:salzh_end_date</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s.end_date</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:freiwillig_salzh</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:salzh</span>
            <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:freiwillig_salzh</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>salzh</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_status_end_date'>status_end_date</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh_end_date</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>salzh</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:salzh</span>
                <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh_end_date</span><span class='rbracket'>]</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>contact_person</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:contact_person</span>
                <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:salzh_end_date</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='comment'># see if it&#39;s a hotspot klasse
</span>            <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='symbol'>:hotspot_klasse</span>
                    <span class='id identifier rubyid_status_end_date'>status_end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_hotspot_dates'>hotspot_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_status'>status</span>
        <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:status_end_date</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_status_end_date'>status_end_date</span>
        <span class='id identifier rubyid_wday'>wday</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span>
        <span class='id identifier rubyid_needs_testing_today'>needs_testing_today</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:testing_required</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_needs_testing_today'>needs_testing_today</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:needs_testing_today</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_needs_testing_today'>needs_testing_today</span>

    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_stream_restriction_for_lesson_key-class_method">
  
    .<strong>get_stream_restriction_for_lesson_key</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


464
465
466
467
468
469
470
471
472
473</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lesson.rb', line 464</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_stream_restriction_for_lesson_key'>get_stream_restriction_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>restriction</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MERGE (l:Lesson {key: $key})
</span><span class='tstring_content'>        RETURN COALESCE(l.stream_restriction, []) AS restriction
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>while</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='int'>5</span>
        <span class='id identifier rubyid_results'>results</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_switch_week_for_date-class_method">
  
    .<strong>get_switch_week_for_date</strong>(d)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 337</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_switch_week_for_date'>get_switch_week_for_date</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ds'>ds</span> <span class='op'>=</span> <span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_d_info'>d_info</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SWITCH_WEEKS-constant" title="SWITCH_WEEKS (constant)">SWITCH_WEEKS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span>
        <span class='id identifier rubyid_ds'>ds</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_d'>d</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
    <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SWITCH_WEEKS-constant" title="SWITCH_WEEKS (constant)">SWITCH_WEEKS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_d_info'>d_info</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_week_number'>week_number</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%-V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_d_info'>d_info</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%-V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_week_number'>week_number</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span> <span class='op'>-</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_technikamt_users-class_method">
  
    .<strong>get_technikamt_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 12</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_technikamt_users'>get_technikamt_users</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User)-[:HAS_AMT {amt: &#39;technikamt&#39;}]-&gt;(v:Techpost)
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_test_events-class_method">
  
    .<strong>get_test_events</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/test_events.rb', line 2</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_test_events'>get_test_events</span>
    <span class='id identifier rubyid_ts_now'>ts_now</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='comment'># $neo4j.neo4j_query(&lt;&lt;~END_OF_QUERY, :today =&gt; ts_now).map { |x| x[&#39;e&#39;] }
</span>    <span class='comment'>#     MATCH (e:TestEvent)
</span>    <span class='comment'>#     WHERE e.date &lt; $today
</span>    <span class='comment'>#     DELETE e;
</span>    <span class='comment'># END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ts_now'>ts_now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (e:TestEvent)
</span><span class='tstring_content'>        RETURN e
</span><span class='tstring_content'>        ORDER BY e.date, e.title;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_test_list_label_type-class_method">
  
    .<strong>get_test_list_label_type</strong>(status, regular_test_required, regular_test_day)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 804</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_test_list_label_type'>get_test_list_label_type</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_regular_test_required'>regular_test_required</span><span class='comma'>,</span> <span class='id identifier rubyid_regular_test_day'>regular_test_day</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='symbol'>:salzh</span>
        <span class='kw'>return</span> <span class='symbol'>:strike</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='symbol'>:hotspot_klasse</span>
        <span class='kw'>return</span> <span class='symbol'>:enabled</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='symbol'>:contact_person</span>
        <span class='kw'>return</span> <span class='symbol'>:enabled</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_regular_test_required'>regular_test_required</span> <span class='op'>==</span> <span class='kw'>false</span>
        <span class='kw'>return</span> <span class='symbol'>:enabled</span> <span class='kw'>if</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>&gt;=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2022-04-01</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>return</span> <span class='symbol'>:disabled</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_regular_test_required'>regular_test_required</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_regular_test_day'>regular_test_day</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='kw'>return</span> <span class='symbol'>:enabled</span> <span class='kw'>if</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>&gt;=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2022-04-01</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>return</span> <span class='symbol'>:disabled</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='symbol'>:enabled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_voluntary_testing_sus-class_method">
  
    .<strong>get_voluntary_testing_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 303</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_voluntary_testing_sus'>get_voluntary_testing_sus</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User {voluntary_testing: true})
</span><span class='tstring_content'>        RETURN u.email, u.last_skipped_voluntary_testing;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_d'>d</span><span class='lbracket'>[</span><span class='symbol'>:last_skipped_voluntary_testing</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.last_skipped_voluntary_testing</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_d'>d</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_today_s'>today_s</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='lbrace'>{</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:skipped_today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:last_skipped_voluntary_testing</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_today_s'>today_s</span><span class='comma'>,</span>
            <span class='symbol'>:klasse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_website_events-class_method">
  
    .<strong>get_website_events</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 11</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_website_events'>get_website_events</span>
    <span class='id identifier rubyid_ts_now'>ts_now</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ts_now'>ts_now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (e:WebsiteEvent)
</span><span class='tstring_content'>        WHERE e.date_end IS NULL AND e.date &lt; $today
</span><span class='tstring_content'>        DELETE e;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ts_now'>ts_now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (e:WebsiteEvent)
</span><span class='tstring_content'>        WHERE e.date_end IS NOT NULL AND e.date_end &lt; $today
</span><span class='tstring_content'>        DELETE e;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ts_now'>ts_now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (e:WebsiteEvent)
</span><span class='tstring_content'>        RETURN e
</span><span class='tstring_content'>        ORDER BY e.date, e.title;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="invite_external_user_for_event-class_method">
  
    .<strong>invite_external_user_for_event</strong>(eid, email, session_user_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/event.rb', line 168</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_invite_external_user_for_event'>invite_external_user_for_event</span><span class='lparen'>(</span><span class='id identifier rubyid_eid'>eid</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='rparen'>)</span>
    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sending invitation mail for event </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eid'>eid</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_timestamp'>timestamp</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:eid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_eid'>eid</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_timestamp'>timestamp</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='comment'># TODO: There is a potential bug here when someone adds a PredefinedExternalUser
</span>    <span class='comment'># as a recipient and there will be two results here where we would have expected
</span>    <span class='comment'># one before
</span>    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:ORGANIZED_BY]-(e:Event {id: $eid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>        WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>        RETURN e, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_session_user'>session_user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#EXTERNAL_USER_EVENT_SCRAMBLER-constant" title="EXTERNAL_USER_EVENT_SCRAMBLER (constant)">EXTERNAL_USER_EVENT_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:eid</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
    <span class='comment'># remove invitation request / if something goes wrong, we won&#39;t keep sending out invites blocking the queue
</span>    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (e:Event {id: $eid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>        WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>        REMOVE rt.invitation_requested;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>begin</span>
        <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
            <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_reply_to'>reply_to</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
            
            <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Einladung: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

            <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Sie haben eine Einladung zu einem Termin via Jitsi Meet erhalten.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eingeladen von: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session_user'>session_user</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Titel: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Datum und Uhrzeit: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/e/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:eid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Link zum Termin:&lt;br /&gt;&lt;a href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte geben Sie den Link nicht weiter. Er ist personalisiert und enthält Ihren Namen, den Raumnamen und ist nur am Tag des Termins gültig.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>rescue</span>
        <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
            <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_session_user_email'>session_user_email</span>
            <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            
            <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Einladung konnte nicht versendet werden: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

            <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Einladung für den folgenden Termin konnte nicht versendet werden:&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>E-Mail: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Titel: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Datum und Uhrzeit: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/e/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:eid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Link zum Termin:&lt;br /&gt;&lt;a href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte überprüfen Sie die E-Mail-Adresse, sie ist vermutlich falsch.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># add timestamp to list of successfully sent invitations
</span>    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (e:Event {id: $eid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>        WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>        SET rt.invitations = COALESCE(rt.invitations, []) + [$timestamp];
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="invite_external_user_for_poll_run-class_method">
  
    .<strong>invite_external_user_for_poll_run</strong>(prid, email, session_user_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 791</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_invite_external_user_for_poll_run'>invite_external_user_for_poll_run</span><span class='lparen'>(</span><span class='id identifier rubyid_prid'>prid</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='rparen'>)</span>
    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sending invitation mail for poll run </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prid'>prid</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_timestamp'>timestamp</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:prid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prid'>prid</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span>
    <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:timestamp</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_timestamp'>timestamp</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User)&lt;-[:ORGANIZED_BY]-(p:Poll)&lt;-[:RUNS]-(pr:PollRun {id: $prid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>        WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(pr.deleted, false) = false AND COALESCE(p.deleted, false) = false
</span><span class='tstring_content'>        RETURN pr, p, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no results found, expected at least one!</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll'>poll</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_session_user'>session_user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#EXTERNAL_USER_EVENT_SCRAMBLER-constant" title="EXTERNAL_USER_EVENT_SCRAMBLER (constant)">EXTERNAL_USER_EVENT_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:prid</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (pr:PollRun {id: $prid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>        WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(pr.deleted, false) = false
</span><span class='tstring_content'>        REMOVE rt.invitation_requested
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>begin</span>
        <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
            <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_reply_to'>reply_to</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session_user_email'>session_user_email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>

            <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Einladung zur Umfrage: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

            <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Sie haben eine Einladung zu einer Umfrage erhalten.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eingeladen von: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session_user'>session_user</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Titel: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Datum und Uhrzeit: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/p/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:prid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Link zur Umfrage:&lt;br /&gt;&lt;a href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte geben Sie den Link nicht weiter. Er ist personalisiert und nur im angegebenen Zeitraum gültig.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (pr:PollRun {id: $prid})&lt;-[rt:IS_PARTICIPANT]-(r)
</span><span class='tstring_content'>            WHERE (r:ExternalUser OR r:PredefinedExternalUser) AND (r.email = $email) AND COALESCE(rt.deleted, false) = false AND COALESCE(pr.deleted, false) = false
</span><span class='tstring_content'>            SET rt.invitations = COALESCE(rt.invitations, []) + [$timestamp];
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>rescue</span>
        <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
            <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_session_user_email'>session_user_email</span>
            <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>

            <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Einladung zur Umfrage konnte nicht versendet werden: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

            <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Einladung für die folgende Umfrage konnte nicht versendet werden:&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>E-Mail: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Titel: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Datum und Uhrzeit: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>., den </span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/p/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:prid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Link zur Umfrage:&lt;br /&gt;&lt;a href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte überprüfen Sie die E-Mail-Adresse, sie ist vermutlich falsch.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iterate_school_days-class_method">
  
    .<strong>iterate_school_days</strong>(options = {}, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464
465
466
467
468
469
470
471
472
473</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 462</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_iterate_school_days'>iterate_school_days</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:first_day</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_last_day'>last_day</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='cvar'>@@config</span><span class='lbracket'>[</span><span class='symbol'>:last_day</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_last_day'>last_day</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_ds'>ds</span> <span class='op'>=</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_off_day'>off_day</span> <span class='op'>=</span> <span class='cvar'>@@off_days</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_ds'>ds</span><span class='rparen'>)</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_off_day'>off_day</span>
            <span class='kw'>yield</span> <span class='id identifier rubyid_ds'>ds</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>+</span> <span class='int'>6</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>7</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_day'>day</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log_freiwillig_salzh_sus_for_today-class_method">
  
    .<strong>log_freiwillig_salzh_sus_for_today</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 989</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_log_freiwillig_salzh_sus_for_today'>log_freiwillig_salzh_sus_for_today</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_wall_time'>wall_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_wall_time'>wall_time</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12:00</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/salzh_protocol/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_today'>today</span><span class='embexpr_end'>}</span><span class='tstring_content'>.txt</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_purge_stale_salzh_entries'><span class='object_link'><a href="#purge_stale_salzh_entries-class_method" title="Main.purge_stale_salzh_entries (method)">purge_stale_salzh_entries</a></span></span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        WHERE EXISTS(u.freiwillig_salzh)
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># watch out, only count days which were actual school days! we need to filter this...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_zeugnisformulare-class_method">
  
    .<strong>parse_zeugnisformulare</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 13</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse_zeugnisformulare'>parse_zeugnisformulare</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/lowriter_home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='cvar'>@@zeugnisse</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parsing Zeugnisformulare...</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>Dir</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/data/zeugnisse/formulare/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='embexpr_end'>}</span><span class='tstring_content'>/*.docx</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
        <span class='id identifier rubyid_sha1'>sha1</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_out_path'>out_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/zeugnisse/formulare/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sha1'>sha1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_out_path'>out_path</span><span class='rparen'>)</span>
            <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkpath'>mkpath</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_out_path'>out_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unzip -d \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_out_path'>out_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_doc'>doc</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_out_path'>out_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>word</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>document.xml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_tags'>tags</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[#\$][A-Za-z0-9_]+\.</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.docx</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='comment'># debug &quot;#{key} (#{out_path}): #{tags.to_json}&quot;
</span>        <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sha1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_sha1'>sha1</span>
        <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tags'>tags</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
        <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:formular_fehler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_check_zeugnisformular'>check_zeugnisformular</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='const'>ZEUGNIS_HALBJAHR</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_doc'>doc</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;w:strike/&gt;&lt;/w:rPr&gt;&lt;w:t&gt;nicht&lt;/w:t&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:formular_fehler</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='cvar'>@@zeugnisse</span><span class='lbracket'>[</span><span class='symbol'>:formulare</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:formular_fehler</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fehlende Versetzungsmarkierung (&lt;s&gt;nicht&lt;/s&gt;)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_determine_zeugnislisten'>determine_zeugnislisten</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="purge_stale_salzh_entries-class_method">
  
    .<strong>purge_stale_salzh_entries</strong>(force = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 6</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_purge_stale_salzh_entries'>purge_stale_salzh_entries</span><span class='lparen'>(</span><span class='id identifier rubyid_force'>force</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_force'>force</span>
        <span class='cvar'>@@last_purge_stale_salzh_entries_date</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>&lt;=</span> <span class='cvar'>@@last_purge_stale_salzh_entries_date</span>
            <span class='kw'>return</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@last_purge_stale_salzh_entries_date</span> <span class='op'>=</span> <span class='id identifier rubyid_today'>today</span>
    <span class='kw'>end</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (s:Salzh)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        WHERE s.end_date &lt; $today
</span><span class='tstring_content'>        DETACH DELETE s;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        WHERE EXISTS(u.freiwillig_salzh) AND u.freiwillig_salzh &lt; $today
</span><span class='tstring_content'>        REMOVE u.freiwillig_salzh;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (k:Klasse)
</span><span class='tstring_content'>        WHERE k.hotspot_end_date &lt; $today
</span><span class='tstring_content'>        DETACH DELETE k;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh_bib_data-class_method">
  
    .<strong>refresh_bib_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1368
1369
1370
1371
1372
1373
1374
1375
1376
1377
1378
1379
1380
1381
1382
1383
1384
1385
1386
1387
1388
1389
1390
1391
1392
1393
1394
1395</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1368</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_refresh_bib_data'>refresh_bib_data</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='cvar'>@@bib_summoned_books_last_ts</span> <span class='op'>&lt;</span> <span class='int'>60</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>60</span><span class='rparen'>)</span>
        <span class='cvar'>@@bib_summoned_books_last_ts</span> <span class='op'>=</span> <span class='id identifier rubyid_now'>now</span>
        <span class='cvar'>@@bib_summoned_books</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Refreshing bib data...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#BIB_HOST-constant" title="BIB_HOST (constant)">BIB_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/api/get_summoned_books</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'>Curl</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_http'>http</span><span class='op'>|</span>
            <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:exp</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>60</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timetable</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-JWT</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JWT</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPKEY_BIB-constant" title="JWT_APPKEY_BIB (constant)">JWT_APPKEY_BIB</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HS256</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oops</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_response_code'>response_code</span> <span class='op'>!=</span> <span class='int'>200</span>
        <span class='cvar'>@@bib_summoned_books</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>

        <span class='cvar'>@@bib_unconfirmed_books</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#BIB_HOST-constant" title="BIB_HOST (constant)">BIB_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/api/get_unconfirmed_books</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'>Curl</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_http'>http</span><span class='op'>|</span>
            <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:exp</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>60</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timetable</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-JWT</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JWT</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPKEY_BIB-constant" title="JWT_APPKEY_BIB (constant)">JWT_APPKEY_BIB</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HS256</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oops</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_response_code'>response_code</span> <span class='op'>!=</span> <span class='int'>200</span>
        <span class='cvar'>@@bib_unconfirmed_books</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
        <span class='comment'># debug @@bib_summoned_books.to_yaml
</span>    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh_public_event_config-class_method">
  
    .<strong>refresh_public_event_config</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383
384
385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/public_event.rb', line 381</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_refresh_public_event_config'>refresh_public_event_config</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@public_event_config_timestamp</span> <span class='op'>||=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/public_events/public_events.yaml</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>||</span> <span class='cvar'>@@public_event_config_timestamp</span> <span class='op'>&lt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Reloading public event config from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@public_event_config</span> <span class='op'>=</span> <span class='const'>YAML</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fix_public_event_config'>fix_public_event_config</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='cvar'>@@public_event_config_timestamp</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sms_gateway_ready?-class_method">
  
    .<strong>sms_gateway_ready?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/sms.rb', line 24</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sms_gateway_ready?'>sms_gateway_ready?</span>
    <span class='lparen'>(</span><span class='cvar'>@@ws_clients</span><span class='lbracket'>[</span><span class='symbol'>:authenticated_sms</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_allowed_for_date_lesson_key_and_email-class_method">
  
    .<strong>stream_allowed_for_date_lesson_key_and_email</strong>(datum, lesson_key, email, restrictions = nil, is_homeschooling_user = nil, group2_for_email = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 86</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stream_allowed_for_date_lesson_key_and_email'>stream_allowed_for_date_lesson_key_and_email</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_restrictions'>restrictions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='comment'># temporarily disable all stream restrictions
</span>    <span class='kw'>return</span> <span class='kw'>true</span>

    <span class='id identifier rubyid_restrictions'>restrictions</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_stream_restriction_for_lesson_key'><span class='object_link'><a href="#get_stream_restriction_for_lesson_key-class_method" title="Main.get_stream_restriction_for_lesson_key (method)">get_stream_restriction_for_lesson_key</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_weekday'>weekday</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>+</span> <span class='int'>6</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>7</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_restrictions'>restrictions</span><span class='lbracket'>[</span><span class='id identifier rubyid_weekday'>weekday</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#WECHSELUNTERRICHT_KLASSENSTUFEN-constant" title="WECHSELUNTERRICHT_KLASSENSTUFEN (constant)">WECHSELUNTERRICHT_KLASSENSTUFEN</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_restrictions'>restrictions</span><span class='lbracket'>[</span><span class='id identifier rubyid_weekday'>weekday</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='kw'>return</span> <span class='id identifier rubyid_get_homeschooling_for_user_by_dauer_salzh'>get_homeschooling_for_user_by_dauer_salzh</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='kw'>return</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span>
        <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_restrictions'>restrictions</span><span class='lbracket'>[</span><span class='id identifier rubyid_weekday'>weekday</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>2</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_get_homeschooling_for_user'>get_homeschooling_for_user</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_is_homeschooling_user'>is_homeschooling_user</span><span class='comma'>,</span> <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='kw'>true</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tr_klasse-class_method">
  
    .<strong>tr_klasse</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 513</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_TR-constant" title="KLASSEN_TR (constant)">KLASSEN_TR</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_angebote_groups-class_method">
  
    .<strong>update_angebote_groups</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 483</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_angebote_groups'>update_angebote_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@angebote_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:info</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:recipient</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:owner</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (a:Angebot)-[:DEFINED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>        WITH a, ou
</span><span class='tstring_content'>        OPTIONAL MATCH (u:User)-[r:IS_PART_OF]-&gt;(a)
</span><span class='tstring_content'>        RETURN a, u.email, ou.email
</span><span class='tstring_content'>        ORDER BY a.created DESC, a.id;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_who'>who</span><span class='op'>|</span>
            <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='id identifier rubyid_who'>who</span> <span class='op'>+</span> <span class='id identifier rubyid_remove_accents'><span class='object_link'><a href="top-level-namespace.html#remove_accents-instance_method" title="#remove_accents (method)">remove_accents</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^a-z0-9]+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span>
            <span class='cvar'>@@angebote_mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_who'>who</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (Eltern)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@angebote_mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_who'>who</span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:recipient</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_antikenfahrt_groups-class_method">
  
    .<strong>update_antikenfahrt_groups</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 387</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_antikenfahrt_groups'>update_antikenfahrt_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:group_af</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group_af</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        RETURN u.email AS email, COALESCE(u.group_af, &#39;&#39;) AS group_af;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_main_user_info'>main_user_info</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>it</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_af</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_user_info'>user_info</span> <span class='op'>=</span> <span class='id identifier rubyid_main_user_info'>main_user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_info'>user_info</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_af</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_af</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@antikenfahrt_recipients</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:groups</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@antikenfahrt_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>it</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group_af'>group_af</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='cvar'>@@antikenfahrt_recipients</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sus</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@antikenfahrt_recipients</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sus</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Antikenfahrt </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_AF_ICONS-constant" title="GROUP_AF_ICONS (constant)">GROUP_AF_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – SuS </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:entries</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@antikenfahrt_recipients</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>/eltern</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@antikenfahrt_recipients</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>/eltern</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Antikenfahrt </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_AF_ICONS-constant" title="GROUP_AF_ICONS (constant)">GROUP_AF_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – Eltern </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'> (extern)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:external</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                <span class='symbol'>:entries</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@antikenfahrt_mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>antikenfahrt.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Antikenfahrt </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_AF_ICONS-constant" title="GROUP_AF_ICONS (constant)">GROUP_AF_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – SuS Klassenstufe </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@antikenfahrt_mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>antikenfahrt.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='tstring_content'>.eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Antikenfahrt </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_AF_ICONS-constant" title="GROUP_AF_ICONS (constant)">GROUP_AF_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – Eltern Klassenstufe </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af'>group_af</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_forschertage_groups-class_method">
  
    .<strong>update_forschertage_groups</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 435</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_forschertage_groups'>update_forschertage_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:group_ft</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group_ft</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        RETURN u.email AS email, COALESCE(u.group_ft, &#39;&#39;) AS group_ft;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_main_user_info'>main_user_info</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nawi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gewi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>musik</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>medien</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_ft</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_user_info'>user_info</span> <span class='op'>=</span> <span class='id identifier rubyid_main_user_info'>main_user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_info'>user_info</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_ft</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_user_info'>user_info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:group_ft</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@forschertage_recipients</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:groups</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@forschertage_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nawi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gewi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>musik</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>medien</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='cvar'>@@forschertage_recipients</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/ft/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sus</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@forschertage_recipients</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/ft/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>/sus</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Forschertage </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_FT_ICONS-constant" title="GROUP_FT_ICONS (constant)">GROUP_FT_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – SuS </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:entries</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@forschertage_recipients</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>/eltern</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@forschertage_recipients</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/af/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>/eltern</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Forschertage </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_FT_ICONS-constant" title="GROUP_FT_ICONS (constant)">GROUP_FT_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – Eltern </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'> (extern)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:external</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                <span class='symbol'>:entries</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@forschertage_mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>forschertage.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Forschertage </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_FT_ICONS-constant" title="GROUP_FT_ICONS (constant)">GROUP_FT_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – SuS Klassenstufe </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@forschertage_mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>forschertage.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='tstring_content'>.eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Forschertage </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_FT_ICONS-constant" title="GROUP_FT_ICONS (constant)">GROUP_FT_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> – Eltern Klassenstufe </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_mailing_lists-class_method">
  
    .<strong>update_mailing_lists</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316
1317
1318
1319
1320
1321
1322
1323
1324
1325
1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1187</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_mailing_lists'>update_mailing_lists</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_antikenfahrt_groups'>update_antikenfahrt_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_forschertage_groups'>update_forschertage_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_angebote_groups'>update_angebote_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_projekttage_groups'>update_projekttage_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@angebote_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_all_kl'>all_kl</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>=</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@schueler_for_klasse</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klasse.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SuS der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eltern der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='rbrace'>}</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrer der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
                <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='kw'>end</span>
        <span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&gt;</span> <span class='int'>0</span>
            <span class='kw'>if</span> <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>team.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span>
                    <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Klassenleiterteam der Klassenstufe </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                    <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='rbrace'>}</span>
                <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
                    <span class='kw'>if</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
                        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>team.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_all_kl'>all_kl</span> <span class='op'>&lt;&lt;</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Gesamtes Kollegium</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:can_log_in</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_email'>email</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vorstand.gev@gymnasiumsteglitz.de</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sus@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Schülerinnen und Schüler</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='op'>!</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Eltern</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='op'>!</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {ev: true})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ev@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Elternvertreter:innen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kl@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Klassenleiter:innen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_all_kl'>all_kl</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
    <span class='rbrace'>}</span>
    <span class='cvar'>@@shorthands_for_fach</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='comma'>,</span> <span class='id identifier rubyid_shorthands'>shorthands</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Lehrkräfte im Fach </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_shorthands'>shorthands</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@antikenfahrt_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@forschertage_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@projekttage_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_TEST_EMAILS-constant" title="VERTEILER_TEST_EMAILS (constant)">VERTEILER_TEST_EMAILS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
        <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_m'>m</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Verteiler-Test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_DEVELOPMENT_EMAILS-constant" title="VERTEILER_DEVELOPMENT_EMAILS (constant)">VERTEILER_DEVELOPMENT_EMAILS</a></span></span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_projekte'>projekte</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)-[:ASSIGNED_TO]-&gt;(p:Projekt)
</span><span class='tstring_content'>        RETURN u.email, p.nr, p.title;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_nr'>nr</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.title</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:participants</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:organized_by</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN u.email, p.nr;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_nr'>nr</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:organized_by</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_projekte'>projekte</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span>
            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>projekt-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nr'>nr</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Teilnehmer:innen im Projekt »</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (Eltern)</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>«</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='symbol'>:extra_allowed_users</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:organized_by</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/projekttage/votes/assign-result.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_assign_results'>assign_results</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/projekttage/votes/assign-result.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_users_for_error'>users_for_error</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_assign_results'>assign_results</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error_for_email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span><span class='op'>|</span>
            <span class='id identifier rubyid_users_for_error'>users_for_error</span><span class='lbracket'>[</span><span class='id identifier rubyid_error'>error</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_users_for_error'>users_for_error</span><span class='lbracket'>[</span><span class='id identifier rubyid_error'>error</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_users_for_error'>users_for_error</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_error'>error</span><span class='comma'>,</span> <span class='id identifier rubyid_emails'>emails</span><span class='op'>|</span>
            <span class='id identifier rubyid_emails_sorted'>emails_sorted</span> <span class='op'>=</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
                <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
                <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
                <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span>
                <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>projekt-abweichung-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                    <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alle Projektteilnehmer:innen mit Abweichung </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (Eltern)</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                    <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_emails_sorted'>emails_sorted</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='rbrace'>}</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DASHBOARD_SERVICE-constant" title="DASHBOARD_SERVICE (constant)">DASHBOARD_SERVICE</a></span></span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/mailing_lists.yaml.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
            <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='cvar'>@@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
        <span class='kw'>end</span>
        <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_mv'>mv</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/mailing_lists.yaml.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/mailing_lists.yaml</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_projekttage_groups-class_method">
  
    .<strong>update_projekttage_groups</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 503</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_projekttage_groups'>update_projekttage_groups</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@projekttage_mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='gvar'>$neo4j</span><span class='period'>.</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:recipient</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        WHERE NOT (u)-[:VOTED_FOR]-&gt;(:Projekt)
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:recipient</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='int'>10</span><span class='rparen'>)</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_who'>who</span><span class='op'>|</span>
            <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='id identifier rubyid_who'>who</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kein.projekt.gewaehlt</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span>
            <span class='cvar'>@@projekttage_mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Kein Projekt gewählt</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_who'>who</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (Eltern)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='rbrace'>}</span>
            <span class='cvar'>@@projekttage_mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_who'>who</span> <span class='op'>+</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_has_role-class_method">
  
    .<strong>user_has_role</strong>(email, role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 6</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown role: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role'>role</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zeugnis_faecher_for_emails-class_method">
  
    .<strong>zeugnis_faecher_for_emails</strong>(emails)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 50</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zeugnis_faecher_for_emails'>zeugnis_faecher_for_emails</span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_zeugnis_keys'>zeugnis_keys</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_zeugnis_keys'>zeugnis_keys</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zeugnis_key_for_email'>zeugnis_key_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_faecher_wf'>faecher_wf</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_zeugnis_keys'>zeugnis_keys</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
        <span class='const'>FAECHER_FOR_ZEUGNIS</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_SCHULJAHR</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='const'>ZEUGNIS_HALBJAHR</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_fach'>fach</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_faecher_wf'>faecher_wf</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_fach'>fach</span> <span class='kw'>unless</span> <span class='id identifier rubyid_faecher_wf'>faecher_wf</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fach'>fach</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_fach'>fach</span> <span class='kw'>unless</span> <span class='id identifier rubyid_faecher'>faecher</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_fach'>fach</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>+</span> <span class='id identifier rubyid_faecher_wf'>faecher_wf</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zeugnis_key_for_email-class_method">
  
    .<strong>zeugnis_key_for_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 44</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zeugnis_key_for_email'>zeugnis_key_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sesb'>sesb</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:sesb</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sesb'>sesb</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_sesb</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="_include_file-instance_method">
  
    #<strong>_include_file</strong>(name, label)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid__include_file'>_include_file</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_label'>label</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.pdf</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;file-type fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.doc</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.docx</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;file-type fa fa-file-word-o&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.xls</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.xlsx</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;file-type fa fa-file-excel-o&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.ppt</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.pptx</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;file-type fa fa-file-powerpoint-o&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.zip</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_icon'>icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;file-type fa fa-file-zip-o&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_icon'>icon</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;a href=&#39;https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEBSITE_HOST-constant" title="WEBSITE_HOST (constant)">WEBSITE_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/f/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; target=&#39;_blank&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="_include_image-instance_method">
  
    #<strong>_include_image</strong>(slug, mode = nil, caption = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid__include_image'>_include_image</span><span class='lparen'>(</span><span class='id identifier rubyid_slug'>slug</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_caption'>caption</span><span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;image&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#                 io.puts &quot;&lt;img src=&#39;https://#{WEBSITE_HOST}/gen/i/#{slug}-1024.jpg&#39; /&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid__include_lazyload_image'>_include_lazyload_image</span><span class='lparen'>(</span><span class='id identifier rubyid_slug'>slug</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;caption&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_caption'>caption</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_caption'>caption</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_align'>align</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>right</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>left</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;image iw-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'> pull-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_align'>align</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#                 io.puts &quot;&lt;img src=&#39;https://#{WEBSITE_HOST}/gen/i/#{slug}-1024.jpg&#39; /&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid__include_lazyload_image'>_include_lazyload_image</span><span class='lparen'>(</span><span class='id identifier rubyid_slug'>slug</span><span class='comma'>,</span> <span class='symbol'>:cols</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_width'>width</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;caption&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_caption'>caption</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_caption'>caption</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
<span class='comment'>#             &quot;&lt;img src=&#39;https://#{WEBSITE_HOST}/gen/i/#{slug}-1024.jpg&#39; class=&#39;col-md-4 pull-left&#39; /&gt;&quot;
</span>    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="_include_lazyload_image-instance_method">
  
    #<strong>_include_lazyload_image</strong>(slug, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid__include_lazyload_image'>_include_lazyload_image</span><span class='lparen'>(</span><span class='id identifier rubyid_slug'>slug</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>50</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:y</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>50</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:classes</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:lg</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:lg</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>*</span> <span class='int'>9</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:md</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:md</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>*</span> <span class='int'>9</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sm</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:sm</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>/</span> <span class='int'>12</span> <span class='op'>*</span> <span class='int'>9</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:xs</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>100vw</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;picture&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jpg</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_extension'>extension</span><span class='op'>|</span>
            <span class='id identifier rubyid_mime_type'>mime_type</span> <span class='op'>=</span> <span class='id identifier rubyid_extension'>extension</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>webp</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>image/webp</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>image/jpeg</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;source type=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mime_type'>mime_type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;lazy&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_img_multi_attr_lazy'>img_multi_attr_lazy</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEBSITE_HOST-constant" title="WEBSITE_HOST (constant)">WEBSITE_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/gen/i/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_slug'>slug</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;img src=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_slug'>slug</span><span class='embexpr_end'>}</span><span class='tstring_content'>-p.jpg&#39; class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:classes</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;object-position: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:x</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>% </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:y</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&#39; alt=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/picture&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="admin_2fa_hotline_logged_in?-instance_method">
  
    #<strong>admin_2fa_hotline_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_admin_2fa_hotline_logged_in?'>admin_2fa_hotline_logged_in?</span>
    <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:datentresor_hotline</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="admin_logged_in?-instance_method">
  
    #<strong>admin_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:admin</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="advent_calendar_images-instance_method">
  
    #<strong>advent_calendar_images</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2570
2571
2572
2573
2574
2575
2576
2577
2578
2579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2570</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advent_calendar_images'>advent_calendar_images</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>advent-calendar-images.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>advent-calendar-images.txt</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/ac-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wget -O /gen/ac-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>-dl.png https://pixel.hackschule.de/raw/uploads/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>convert /gen/ac-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>-dl.png -scale 1600% /gen/ac-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/ac-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="advents_calendar_date_today-instance_method">
  
    #<strong>advents_calendar_date_today</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns 0 if before Dec 1 returns 1 .. 24 if in range returns 24 if Dec 25 .. 31</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1878
1879
1880
1881
1882
1883
1884
1885
1886
1887
1888</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1878</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advents_calendar_date_today'>advents_calendar_date_today</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span>
    <span class='comment'># if DEVELOPMENT
</span>        <span class='comment'># date = &#39;2021-12-24&#39;
</span>    <span class='comment'># end
</span>    <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2021-12-01</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_date'>date</span> <span class='op'>&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2021-12-31</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='id identifier rubyid_date'>date</span><span class='lbracket'>[</span><span class='int'>8</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='int'>24</span> <span class='kw'>if</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>&gt;</span> <span class='int'>24</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_day'>day</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_sessions-instance_method">
  
    #<strong>all_sessions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 438</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_sessions'>all_sessions</span>
    <span class='id identifier rubyid_sids'>sids</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_sids'>sids</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_sids'>sids</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z,]+$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_sids'>sids</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sid'>sid</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z]+$</span><span class='regexp_end'>/</span></span>
                <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sid'>sid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>                    MATCH (s:Session {sid: $sid})-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>                    RETURN s.sid AS sid, u.email AS email;
</span><span class='heredoc_end'>                END_OF_QUERY
</span>                <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_users'>users</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='comma'>,</span> <span class='symbol'>:method</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:method</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_users'>users</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="already_booked_tablet_sets_for_day-instance_method">
  
    #<strong>already_booked_tablet_sets_for_day</strong>(datum)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all booked tablet sets for a specific day</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_day'>already_booked_tablet_sets_for_day</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_book_tablets</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:datum</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_datum'>datum</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:tablet_set_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:reason</span> <span class='op'>=&gt;</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b.reason</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b.start_time</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b.end_time</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (t:TabletSet)&lt;-[:BOOKED]-(b:Booking {datum: $datum})-[:BOOKED_BY]-&gt;(u:User)
</span><span class='tstring_content'>        OPTIONAL MATCH (b)-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson)
</span><span class='tstring_content'>        RETURN t.id, l.key, b.start_time, b.end_time, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:tablet_set_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:tablet_set_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:reason</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name_dativ</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
            <span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="already_booked_tablet_sets_for_timespan-instance_method">
  
    #<strong>already_booked_tablet_sets_for_timespan</strong>(datum, start_time, end_time)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>check whether we can book a list of tablet sets for a specific time span</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_timespan'>already_booked_tablet_sets_for_timespan</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_book_tablets</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:datum</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span>
        <span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span>
        <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_time'>end_time</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:tablet_set_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:reason</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b.reason</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (t:TabletSet)&lt;-[:BOOKED]-(b:Booking {datum: $datum})-[:BOOKED_BY]-&gt;(u:User)
</span><span class='tstring_content'>        WHERE NOT ((b.end_time &lt;= $start_time) OR (b.start_time &gt;= $end_time))
</span><span class='tstring_content'>        OPTIONAL MATCH (b)-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson)
</span><span class='tstring_content'>        RETURN t.id, l.key, b.reason, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_rows'>rows</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:tablet_set_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:tablet_set_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:reason</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name_dativ</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NN</span><span class='tstring_end'>&#39;</span></span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="book_tablet_set_for_lesson-instance_method">
  
    #<strong>book_tablet_set_for_lesson</strong>(datum, start_time, end_time, tablet_sets = [], lesson_key, offset)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>book a list of tablet sets for a specific lesson, or unbook all tablet sets</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_book_tablet_set_for_lesson'>book_tablet_set_for_lesson</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='comma'>,</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_book_tablets</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='comment'># check if it&#39;s bookable
</span>        <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_timespan'>already_booked_tablet_sets_for_timespan</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_y'>y</span><span class='op'>|</span>
                <span class='id identifier rubyid_y'>y</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
            <span class='comment'># make sure tablet sets exist in database
</span>            <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='op'>|</span>
                <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MERGE (:TabletSet {id: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;})</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_timestamp'>timestamp</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
            <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span>
                <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span>
                <span class='symbol'>:tablet_set_ids</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='comma'>,</span>
                <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span>
                <span class='symbol'>:datum</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span>
                <span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span>
                <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_time'>end_time</span>
            <span class='rbrace'>}</span>
            <span class='comment'># create booking node
</span>            <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                MERGE (l:Lesson {key: $lesson_key})
</span><span class='tstring_content'>                MERGE (i:LessonInfo {offset: $offset})-[:BELONGS_TO]-&gt;(l)
</span><span class='tstring_content'>                MERGE (b:Booking)-[:FOR]-&gt;(i)
</span><span class='tstring_content'>                MERGE (u)&lt;-[:BOOKED_BY]-(b)
</span><span class='tstring_content'>                SET i.updated = $timestamp
</span><span class='tstring_content'>                SET b.updated = $timestamp
</span><span class='tstring_content'>                SET b.datum = $datum
</span><span class='tstring_content'>                SET b.start_time = $start_time
</span><span class='tstring_content'>                SET b.end_time = $end_time
</span><span class='tstring_content'>
</span><span class='tstring_content'>                WITH b
</span><span class='tstring_content'>                MATCH (b)-[r:BOOKED]-&gt;(:TabletSet)
</span><span class='tstring_content'>                DELETE r
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='comment'># connect booked tablet sets to booking node
</span>            <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (l:Lesson {key: $lesson_key})
</span><span class='tstring_content'>                MATCH (i:LessonInfo {offset: $offset})-[:BELONGS_TO]-&gt;(l)
</span><span class='tstring_content'>                MATCH (b:Booking)-[:FOR]-&gt;(i)
</span><span class='tstring_content'>                MATCH (t:TabletSet)
</span><span class='tstring_content'>                WHERE t.id IN $tablet_set_ids
</span><span class='tstring_content'>                MERGE (b)-[:BOOKED]-&gt;(t)
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot book tablet sets because of these:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='symbol'>:unable_to_book_tablet_sets</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="book_tablet_set_for_timespan-instance_method">
  
    #<strong>book_tablet_set_for_timespan</strong>(datum, start_time, end_time, reason, tablet_sets)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>book a list of tablet sets for a specific lesson, or unbook all tablet sets</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_book_tablet_set_for_timespan'>book_tablet_set_for_timespan</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_who_can_manage_tablets!'>require_user_who_can_manage_tablets!</span>
    <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='comment'># check if it&#39;s bookable
</span>        <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_timespan'>already_booked_tablet_sets_for_timespan</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
        <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
            <span class='comment'># make sure tablet sets exist in database
</span>            <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='op'>|</span>
                <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MERGE (:TabletSet {id: &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_set_id'>tablet_set_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;})</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_timestamp'>timestamp</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
            <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:tablet_set_ids</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='comma'>,</span>
                <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span>
                <span class='symbol'>:datum</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span>
                <span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span>
                <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='comma'>,</span>
                <span class='symbol'>:reason</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_reason'>reason</span>
            <span class='rbrace'>}</span>
            <span class='comment'># create booking node
</span>            <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                CREATE (u)&lt;-[:BOOKED_BY]-(b:Booking {datum: $datum, start_time: $start_time, end_time: $end_time, reason: $reason})
</span><span class='tstring_content'>                SET b.updated = $timestamp
</span><span class='tstring_content'>
</span><span class='tstring_content'>                WITH b
</span><span class='tstring_content'>                MATCH (t:TabletSet)
</span><span class='tstring_content'>                WHERE t.id IN $tablet_set_ids
</span><span class='tstring_content'>                CREATE (b)-[:BOOKED]-&gt;(t)
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot book tablet sets because of these:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_conflicting_tablets'>conflicting_tablets</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='symbol'>:unable_to_book_tablet_sets</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bytes_to_str-instance_method">
  
    #<strong>bytes_to_str</strong>(ai_Size)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2252
2253
2254
2255
2256
2257
2258
2259
2260
2261
2262
2263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bytes_to_str'>bytes_to_str</span><span class='lparen'>(</span><span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span> <span class='op'>&lt;</span> <span class='int'>1024</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='embexpr_end'>}</span><span class='tstring_content'> B</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span> <span class='op'>&lt;</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%1.1f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>1024.0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> kB</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span> <span class='op'>&lt;</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%1.1f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> MB</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span> <span class='op'>&lt;</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%1.1f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> GB</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%1.1f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ai_Size'>ai_Size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span> <span class='op'>/</span> <span class='float'>1024.0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> TB</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="caesar-instance_method">
  
    #<strong>caesar</strong>(s, shift)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_caesar'>caesar</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_shift'>shift</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_each_char'>each_char</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
        <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>&gt;=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>&lt;=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Z</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span>
            <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>-</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span>
            <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='id identifier rubyid_shift'>shift</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>26</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_t'>t</span> <span class='op'>+=</span> <span class='id identifier rubyid_c'>c</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_t'>t</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_checkout_books-instance_method">
  
    #<strong>can_checkout_books</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lehrbuchverein.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_checkout_books'>can_checkout_books</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_determine_lehrmittelverein_state_for_email'>determine_lehrmittelverein_state_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_agr_app_logged_in?-instance_method">
  
    #<strong>can_manage_agr_app_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def user_who_can_report_tech_problems_or_better_logged_in?</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:can_manage_tablets</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_check_has_technikamt'>check_has_technikamt</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_agr_app_logged_in?'>can_manage_agr_app_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_agr_app</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_bib_logged_in?-instance_method">
  
    #<strong>can_manage_bib_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_bib_logged_in?'>can_manage_bib_logged_in?</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_bib</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_flag'>flag</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_device_logged_in?'>device_logged_in?</span>
                <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='kw'>false</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_flag'>flag</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_bib_members_logged_in?-instance_method">
  
    #<strong>can_manage_bib_members_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_bib_members</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_bib_payment_logged_in?-instance_method">
  
    #<strong>can_manage_bib_payment_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_bib_payment_logged_in?'>can_manage_bib_payment_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_bib_payment</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_bib_special_access_logged_in?-instance_method">
  
    #<strong>can_manage_bib_special_access_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_bib_special_access_logged_in?'>can_manage_bib_special_access_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_bib_special_access</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_manage_salzh_logged_in?-instance_method">
  
    #<strong>can_manage_salzh_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_manage_salzh_logged_in?'>can_manage_salzh_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_salzh</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_see_all_timetables_logged_in?-instance_method">
  
    #<strong>can_see_all_timetables_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_see_all_timetables_logged_in?'>can_see_all_timetables_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_see_all_timetables</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_has_technikamt-instance_method">
  
    #<strong>check_has_technikamt</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_has_technikamt'>check_has_technikamt</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[:HAS_AMT {amt: &#39;technikamt&#39;}]-&gt;(v:Techpost)
</span><span class='tstring_content'>        RETURN CASE WHEN EXISTS((u)-[:HAS_AMT {amt: &#39;technikamt&#39;}]-&gt;(v)) THEN true ELSE false END AS hasRelation;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hasRelation</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="class_stream_link_for_session_user-instance_method">
  
    #<strong>class_stream_link_for_session_user</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1583
1584
1585
1586
1587
1588
1589
1590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1583</span>

<span class='kw'>def</span> <span class='id identifier rubyid_class_stream_link_for_session_user'>class_stream_link_for_session_user</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#PROVIDE_CLASS_STREAM-constant" title="PROVIDE_CLASS_STREAM (constant)">PROVIDE_CLASS_STREAM</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/jitsi/Klassenstreaming</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
        <span class='kw'>nil</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="color_palette_for_color_scheme-instance_method">
  
    #<strong>color_palette_for_color_scheme</strong>(color_scheme)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_color_palette_for_color_scheme'><span class='object_link'><a href="top-level-namespace.html#color_palette_for_color_scheme-instance_method" title="#color_palette_for_color_scheme (method)">color_palette_for_color_scheme</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_color_scheme'>color_scheme</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_primary_color'>primary_color</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span><span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_light'>light</span> <span class='op'>=</span> <span class='id identifier rubyid_luminance'><span class='object_link'><a href="top-level-namespace.html#luminance-instance_method" title="#luminance (method)">luminance</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>160</span>
    <span class='id identifier rubyid_primary_color_lighter'>primary_color_lighter</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffffff</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.3</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_primary_color_much_lighter'>primary_color_much_lighter</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffffff</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.8</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_primary_color_darker'>primary_color_darker</span> <span class='op'>=</span> <span class='id identifier rubyid_darken'><span class='object_link'><a href="top-level-namespace.html#darken-instance_method" title="#darken (method)">darken</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='comma'>,</span> <span class='float'>0.8</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_primary_color_much_darker'>primary_color_much_darker</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#000000</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.5</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_desaturated_color'>desaturated_color</span> <span class='op'>=</span> <span class='id identifier rubyid_darken'><span class='object_link'><a href="top-level-namespace.html#darken-instance_method" title="#darken (method)">darken</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.9</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_light'>light</span>
        <span class='id identifier rubyid_desaturated_color'>desaturated_color</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffffff</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.1</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_desaturated_color_darker'>desaturated_color_darker</span> <span class='op'>=</span> <span class='id identifier rubyid_darken'><span class='object_link'><a href="top-level-namespace.html#darken-instance_method" title="#darken (method)">darken</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='float'>0.3</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_disabled_color'>disabled_color</span> <span class='op'>=</span> <span class='id identifier rubyid_light'>light</span> <span class='op'>?</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.5</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>192</span><span class='comma'>,</span> <span class='int'>192</span><span class='comma'>,</span> <span class='int'>192</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.5</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_darker_color'>darker_color</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.6</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_shifted_color'>shifted_color</span> <span class='op'>=</span> <span class='id identifier rubyid_shift_hue'><span class='object_link'><a href="top-level-namespace.html#shift_hue-instance_method" title="#shift_hue (method)">shift_hue</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='comma'>,</span> <span class='int'>350</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_main_text_color'>main_text_color</span> <span class='op'>=</span> <span class='id identifier rubyid_light'>light</span> <span class='op'>?</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.7</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.8</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_contrast_color'>contrast_color</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.7</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_color_palette'>color_palette</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:is_light</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_light'>light</span><span class='comma'>,</span>
        <span class='symbol'>:primary</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_primary_color'>primary_color</span><span class='comma'>,</span>
        <span class='symbol'>:primary_color_lighter</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_primary_color_lighter'>primary_color_lighter</span><span class='comma'>,</span>
        <span class='symbol'>:primary_color_much_lighter</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_primary_color_much_lighter'>primary_color_much_lighter</span><span class='comma'>,</span>
        <span class='symbol'>:primary_color_darker</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_primary_color_darker'>primary_color_darker</span><span class='comma'>,</span>
        <span class='symbol'>:primary_color_much_darker</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_primary_color_much_darker'>primary_color_much_darker</span><span class='comma'>,</span>
        <span class='symbol'>:primary_color_dark</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.8</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='symbol'>:disabled</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_disabled_color'>disabled_color</span><span class='comma'>,</span>
        <span class='symbol'>:darker</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_darker_color'>darker_color</span><span class='comma'>,</span>
        <span class='symbol'>:shifted</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_desaturated_color'>desaturated_color</span><span class='comma'>,</span>
        <span class='symbol'>:left</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:right</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span><span class='lbracket'>[</span><span class='int'>13</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:main_text</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_main_text_color'>main_text_color</span><span class='comma'>,</span>
        <span class='symbol'>:contrast</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_contrast_color'>contrast_color</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_color_palette'>color_palette</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_device_token-instance_method">
  
    #<strong>create_device_token</strong>(device, expire_hours)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_device_token'>create_device_token</span><span class='lparen'>(</span><span class='id identifier rubyid_device'>device</span><span class='comma'>,</span> <span class='id identifier rubyid_expire_hours'>expire_hours</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RandomTag.html" title="RandomTag (class)">RandomTag</a></span></span><span class='op'>::</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="RandomTag.html#generate-class_method" title="RandomTag.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='int'>24</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_token'>token</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z]+$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:device</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_device'>device</span><span class='comma'>,</span>
            <span class='symbol'>:token</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span>
            <span class='symbol'>:expires</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_expire_hours'>expire_hours</span> <span class='op'>/</span> <span class='float'>24.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>

    <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        CREATE (t:DeviceToken $data)
</span><span class='tstring_content'>        RETURN t;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_token'>token</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_session-instance_method">
  
    #<strong>create_session</strong>(email, expire_hours)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_session'>create_session</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_expire_hours'>expire_hours</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RandomTag.html" title="RandomTag (class)">RandomTag</a></span></span><span class='op'>::</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="RandomTag.html#generate-class_method" title="RandomTag.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='int'>24</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z]+$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sid'>sid</span><span class='comma'>,</span>
            <span class='symbol'>:expires</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_expire_hours'>expire_hours</span> <span class='op'>/</span> <span class='float'>24.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_ua'>ua</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#USER_AGENT_PARSER-constant" title="USER_AGENT_PARSER (constant)">USER_AGENT_PARSER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HTTP_USER_AGENT</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_usa'>usa</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_segments'>segments</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_os'>os</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_usa'>usa</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> / </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>other</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_usa'>usa</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_usa'>usa</span>
    <span class='kw'>rescue</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
        <span class='id identifier rubyid_other_sid'>other_sid</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:other_sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_other_sid'>other_sid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>            MATCH (s:Session {sid: $other_sid})-[:BELONGS_TO]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>            DETACH DELETE s;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>
    <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        CREATE (s:Session $data)-[:BELONGS_TO]-&gt;(u)
</span><span class='tstring_content'>        RETURN s;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_sid'>sid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="css_for_font-instance_method">
  
    #<strong>css_for_font</strong>(font)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/theme.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_css_for_font'>css_for_font</span><span class='lparen'>(</span><span class='id identifier rubyid_font'>font</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_font'>font</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Alegreya</span><span class='tstring_end'>&#39;</span></span>
        <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>font-family</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AlegreyaSans</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>letter-spacing</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unset</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_font'>font</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Billy</span><span class='tstring_end'>&#39;</span></span>
        <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>font-family</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Billy</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>letter-spacing</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unset</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_font'>font</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Riffic</span><span class='tstring_end'>&#39;</span></span>
        <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>font-family</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Riffic</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>letter-spacing</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.05em</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>else</span>
        <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>font-family</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Roboto</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>letter-spacing</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unset</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_jitsi_rooms-instance_method">
  
    #<strong>current_jitsi_rooms</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_jitsi_rooms'>current_jitsi_rooms</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@current_jitsi_rooms</span> <span class='op'>||=</span> <span class='kw'>nil</span>
    <span class='cvar'>@@current_jitsi_rooms_timestamp</span> <span class='op'>||=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
    <span class='kw'>if</span> <span class='cvar'>@@current_jitsi_rooms</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>&gt;</span> <span class='cvar'>@@current_jitsi_rooms_timestamp</span> <span class='op'>+</span> <span class='int'>10</span>
        <span class='cvar'>@@current_jitsi_rooms_timestamp</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
        <span class='kw'>begin</span>
            <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Refreshing Jitsi presence!</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'>Curl</span><span class='op'>::</span><span class='const'>Easy</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_ALL_ROOMS_URL-constant" title="JITSI_ALL_ROOMS_URL (constant)">JITSI_ALL_ROOMS_URL</a></span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_perform'>perform</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>200</span>
                <span class='cvar'>@@current_jitsi_rooms</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_body_str'>body_str</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rooms</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
                <span class='cvar'>@@current_jitsi_rooms</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='kw'>end</span>
        <span class='kw'>rescue</span>
            <span class='cvar'>@@current_jitsi_rooms</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='cvar'>@@current_jitsi_rooms</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cypher_content-instance_method">
  
    #<strong>cypher_content</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cypher_content'>cypher_content</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>REQUEST_PATH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>provided: [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_provided_password'>provided_password</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.cypher_level, 0) AS cypher_level,
</span><span class='tstring_content'>        u.cypher_seed AS cypher_seed,
</span><span class='tstring_content'>        COALESCE(u.failed_cypher_tries, 0) AS failed_cypher_tries,
</span><span class='tstring_content'>        COALESCE(u.cypher_name, &#39;&#39;) AS cypher_name;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='ivar'>@cypher_level</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cypher_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cypher_seed</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cypher_seed</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cypher_name</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cypher_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
    <span class='id identifier rubyid_failed_cypher_tries'>failed_cypher_tries</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>failed_cypher_tries</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@tries_left</span> <span class='op'>=</span> <span class='int'>3</span> <span class='op'>-</span> <span class='id identifier rubyid_failed_cypher_tries'>failed_cypher_tries</span>
    <span class='kw'>if</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>7</span>
        <span class='ivar'>@tries_left</span> <span class='op'>=</span> <span class='int'>50</span> <span class='op'>-</span> <span class='id identifier rubyid_failed_cypher_tries'>failed_cypher_tries</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@cypher_seed</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
        <span class='ivar'>@cypher_seed</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:cypher_seed</span> <span class='op'>=&gt;</span> <span class='ivar'>@cypher_seed</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            SET u.cypher_seed = $cypher_seed;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_get_next_cypher_password'>get_next_cypher_password</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CYPHER // </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> // level: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_level</span><span class='embexpr_end'>}</span><span class='tstring_content'>, next password: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_next_password</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_next_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(nil)</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='ivar'>@cypher_next_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:cypher_provided</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            SET u.cypher_provided = $cypher_provided;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='ivar'>@cypher_next_password</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='ivar'>@cypher_level</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:cypher_level</span> <span class='op'>=&gt;</span> <span class='ivar'>@cypher_level</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                SET u.cypher_level = $cypher_level,
</span><span class='tstring_content'>                u.failed_cypher_tries = 0
</span><span class='tstring_content'>                REMOVE u.cypher_provided;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>else</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                SET u.failed_cypher_tries = COALESCE(u.failed_cypher_tries, 0) + 1;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='kw'>if</span> <span class='ivar'>@tries_left</span> <span class='op'>&lt;=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                    MATCH (u:User {email: $email})
</span><span class='tstring_content'>                    SET u.cypher_level = 0, u.failed_cypher_tries = 0, u.cypher_name = &#39;&#39;
</span><span class='tstring_content'>                    REMOVE u.cypher_provided;
</span><span class='heredoc_end'>                END_OF_QUERY
</span>            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>REDIRECTING!</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/cyph3r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>302</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_get_next_cypher_password'>get_next_cypher_password</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='comment'># io.puts &quot;&lt;p style=&#39;text-align: left; margin-top: 0;&#39;&gt;&lt;b&gt;#{@session_user[:first_name]}&lt;/b&gt; &amp;lt;#{@session_user[:email]}&amp;gt;&lt;/p&gt;&quot;
</span>        <span class='kw'>if</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#MAX_CYPHER_LEVEL-constant" title="Main::MAX_CYPHER_LEVEL (constant)">MAX_CYPHER_LEVEL</a></span></span>
            <span class='comment'># io.puts &quot;&lt;p style=&#39;float: right; margin-top: 0;&#39;&gt;&lt;a href=&#39;/hackers&#39;&gt;=&amp;gt; Hall of Fame&lt;/a&gt;&lt;/p&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/cypher/hall_of_fame.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User)
</span><span class='tstring_content'>                WHERE COALESCE(u.cypher_level, 0) &gt; 0
</span><span class='tstring_content'>                RETURN u.email, u.cypher_level, COALESCE(u.cypher_name, &#39;&#39;) AS cypher_name
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bisher </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hat</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>haben</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Code Cracker:in</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nen</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; versucht, die Aufgaben zu lösen.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_histogram'>histogram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.cypher_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.cypher_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_names'>names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cypher_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cypher_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>
            <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_histogram'>histogram</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_level'>level</span><span class='op'>|</span>
                <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>in der &lt;b&gt;Hall of Fame&lt;/b&gt;</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_level'>level</span> <span class='op'>+</span> <span class='int'>1</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="#MAX_CYPHER_LEVEL-constant" title="Main::MAX_CYPHER_LEVEL (constant)">MAX_CYPHER_LEVEL</a></span></span>
                    <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>in &lt;b&gt;Level </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_level'>level</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_level'>level</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Person</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_level'>level</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_l'>l</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Davon befinde</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_histogram'>histogram</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> sich </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_join_with_sep'><span class='object_link'><a href="top-level-namespace.html#join_with_sep-instance_method" title="#join_with_sep (method)">join_with_sep</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr style=&#39;margin-bottom: 15px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># io.puts &quot;&lt;p&gt;&quot;
</span>            <span class='comment'># io.puts &quot;Hier kannst du festlegen, ob und wie du in der Hall of Fame erscheinen möchtest:&quot;
</span>            <span class='comment'># io.puts &quot;&lt;/p&gt;&quot;
</span>            <span class='comment'># io.puts &quot;&lt;hr /&gt;&quot;
</span>            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;text-align: left; margin-top: 0;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;name-pref&#39; data-name=&#39;&#39;&gt;[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>] Ich möchte &lt;b&gt;nicht&lt;/b&gt; aufgelistet werden.&lt;/span&gt;&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_possible_names'>possible_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;name-pref&#39; data-name=\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;&gt;[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_name</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>] Ich möchte als &lt;b&gt;»</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>«&lt;/b&gt; erscheinen.&lt;/span&gt;&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;cypher-reset text-danger&#39;&gt;[!] Ich möchte meinen &lt;b&gt;Fortschritt löschen&lt;/b&gt; und von vorn beginnen.&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39; id=&#39;cypher_reset_confirm&#39; style=&#39;display: none;&#39;&gt;&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bist du sicher? &lt;span id=&#39;cypher_reset_confirm_yes&#39;&gt;&lt;b&gt;[Ja]&lt;/b&gt;&lt;/span&gt; &lt;span id=&#39;cypher_reset_confirm_no&#39;&gt;&lt;b&gt;[Nein]&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h2&gt;&lt;b&gt;Hall of Fame&lt;/b&gt;&lt;/h2&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;name&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/cypher/hall_of_fame_foot.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/cypher/title.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#{next_cypher_level}</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lparen'>(</span><span class='ivar'>@cypher_level</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_failed_cypher_tries'>failed_cypher_tries</span> <span class='op'>==</span> <span class='int'>0</span>
                <span class='kw'>if</span> <span class='ivar'>@cypher_level</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Gut gemacht!&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='kw'>if</span> <span class='ivar'>@cypher_level</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;text-danger&#39;&gt;&lt;b&gt;Achtung!&lt;/b&gt; Deine letzte Antwort war leider falsch. Du hast noch &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@tries_left</span><span class='embexpr_end'>}</span><span class='tstring_content'> Versuch</span><span class='embexpr_beg'>#{</span><span class='ivar'>@tries_left</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;, bevor du wieder von vorn beginnen musst.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;text-danger&#39;&gt;&lt;b&gt;Achtung!&lt;/b&gt; Deine letzte Antwort war leider falsch.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/static/cypher/level_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@cypher_level</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.html</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/cypher/form.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="darken-instance_method">
  
    #<strong>darken</strong>(c, f = 0.2)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_darken'><span class='object_link'><a href="top-level-namespace.html#darken-instance_method" title="#darken (method)">darken</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='float'>0.2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hsv'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hsv-instance_method" title="#rgb_to_hsv (method)">rgb_to_hsv</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*=</span> <span class='id identifier rubyid_f'>f</span>
    <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hsv_to_rgb-instance_method" title="#hsv_to_rgb (method)">hsv_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv'>hsv</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_audio_comment-instance_method">
  
    #<strong>delete_audio_comment</strong>(tag)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/comment.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_audio_comment'>delete_audio_comment</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tag'>tag</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9a-zA-Z]+$</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span><span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_tag'>tag</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.ogg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.mp3</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ext'>ext</span><span class='op'>|</span>
            <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/raw/uploads/audio_comment/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ext'>ext</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
                <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELETING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='const'>FileUtils</span><span class='op'>::</span><span class='id identifier rubyid_rm_f'>rm_f</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_session_user_ical_link-instance_method">
  
    #<strong>delete_session_user_ical_link</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/ical.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_session_user_ical_link'>delete_session_user_ical_link</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.ical_token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        WHERE EXISTS(u.ical_token)
</span><span class='tstring_content'>        RETURN u.ical_token;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_token'>token</span><span class='op'>|</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/ical/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_token'>token</span><span class='embexpr_end'>}</span><span class='tstring_content'>.ics</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_path'>path</span>
        <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm'>rm</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        REMOVE u.ical_token;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_session_user_otp_token-instance_method">
  
    #<strong>delete_session_user_otp_token</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/otp.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_session_user_otp_token'>delete_session_user_otp_token</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        REMOVE u.otp_token
</span><span class='tstring_content'>        REMOVE u.otp_token_changed
</span><span class='tstring_content'>        REMOVE u.preferred_login_method;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="desaturate-instance_method">
  
    #<strong>desaturate</strong>(c)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_desaturate'><span class='object_link'><a href="top-level-namespace.html#desaturate-instance_method" title="#desaturate (method)">desaturate</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hsv'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hsv-instance_method" title="#rgb_to_hsv (method)">rgb_to_hsv</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*=</span> <span class='float'>0.7</span>
    <span class='id identifier rubyid_hsv'>hsv</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*=</span> <span class='float'>0.9</span>
    <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hsv_to_rgb-instance_method" title="#hsv_to_rgb (method)">hsv_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv'>hsv</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="determine_lehrmittelverein_state_for_email-instance_method">
  
    #<strong>determine_lehrmittelverein_state_for_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns bits 1 for paid, 2 for zahlungsbefreit, 4 for lehrmittelfreiheit</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lehrbuchverein.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_determine_lehrmittelverein_state_for_email'>determine_lehrmittelverein_state_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email, lmv_no_pay: true})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>+=</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='comment'># result += 4 if [5, 6].include?(((@@user_info[email] || {})[:klasse] || &#39;&#39;).to_i)
</span>    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:jahr</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[:PAID_FOR]-&gt;(j:Lehrbuchvereinsjahr {jahr: $jahr})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="device_logged_in?-instance_method">
  
    #<strong>device_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_device_logged_in?'>device_logged_in?</span>
    <span class='op'>!</span><span class='ivar'>@session_device</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eval_lilypads-instance_method">
  
    #<strong>eval_lilypads</strong>(_content)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 251</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eval_lilypads'>eval_lilypads</span><span class='lparen'>(</span><span class='id identifier rubyid__content'>_content</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid__content'>_content</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>while</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#{</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='int'>2</span>
        <span class='id identifier rubyid_balance'>balance</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_content'>content</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_balance'>balance</span> <span class='op'>&gt;</span> <span class='int'>0</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_balance'>balance</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>}</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_balance'>balance</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_length'>length</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>3</span><span class='rbracket'>]</span>
        <span class='kw'>begin</span>
            <span class='comment'># STDERR.puts code
</span>            <span class='id identifier rubyid_content'>content</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>rescue</span>
            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error while evaluating:</span><span class='tstring_end'>&quot;</span></span>
            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_code'>code</span>
            <span class='id identifier rubyid_raise'>raise</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_content'>content</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="external_user_logged_in?-instance_method">
  
    #<strong>external_user_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def developer_logged_in?</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_external_user_logged_in?'>external_user_logged_in?</span>
    <span class='kw'>return</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="external_users_for_session_user-instance_method">
  
    #<strong>external_users_for_session_user</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/ext_user.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_external_users_for_session_user'>external_users_for_session_user</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:groups</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_create_events</span><span class='rparen'>)</span>
    <span class='comment'># add pre-defined external users
</span>    <span class='cvar'>@@predefined_external_users</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:groups</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span>
    <span class='kw'>end</span>
    <span class='cvar'>@@predefined_external_users</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='kw'>end</span>

    <span class='comment'># add external users from user&#39;s address book
</span>    <span class='id identifier rubyid_ext_users'>ext_users</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:session_email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {email: $session_email})-[:ENTERED_EXT_USER]-&gt;(e:ExternalUser)
</span><span class='tstring_content'>        RETURN e
</span><span class='tstring_content'>        ORDER BY e.name
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_ext_users'>ext_users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:order</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fach_for_lesson_key-instance_method">
  
    #<strong>fach_for_lesson_key</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 207</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fach_for_lesson_key'>fach_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NN</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_available_tablet_sets-instance_method">
  
    #<strong>find_available_tablet_sets</strong>(datum, start_time, end_time, lesson_key = nil, offset = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_available_tablet_sets'>find_available_tablet_sets</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_available_tablet_sets'>available_tablet_sets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='op'>|</span>
        <span class='id identifier rubyid_available_tablet_sets'>available_tablet_sets</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_tablet_id'>tablet_id</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_booked_tablet_sets_timespan'>booked_tablet_sets_timespan</span> <span class='op'>=</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_timespan'>already_booked_tablet_sets_for_timespan</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_booked_tablet_sets_day'>booked_tablet_sets_day</span> <span class='op'>=</span> <span class='id identifier rubyid_already_booked_tablet_sets_for_day'>already_booked_tablet_sets_for_day</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klasse5or6'>klasse5or6</span> <span class='op'>=</span> <span class='kw'>nil</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
        <span class='comment'># consider klasse
</span>        <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_klasse5or6'>klasse5or6</span> <span class='op'>=</span> <span class='id identifier rubyid_klassen'>klassen</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

        <span class='comment'># sort by :prio_unterstufe
</span>        <span class='comment'># available_tablet_sets.sort! do |a, b|
</span>        <span class='comment'>#     a_prio = (!!@@tablet_sets[a][:prio_unterstufe]) ? 1 : 0
</span>        <span class='comment'>#     b_prio = (!!@@tablet_sets[b][:prio_unterstufe]) ? 1 : 0
</span>        <span class='comment'>#     dir = a_prio &lt;=&gt; b_prio
</span>        <span class='comment'>#     if dir == 0
</span>        <span class='comment'>#         a &lt;=&gt; b
</span>        <span class='comment'>#     else
</span>        <span class='comment'>#         dir * (klasse5or6 ? -1 : 1)
</span>        <span class='comment'>#     end
</span>        <span class='comment'># end
</span>
        <span class='comment'># also consider room
</span>        <span class='kw'>begin</span>
            <span class='id identifier rubyid_timetable_date'>timetable_date</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_date_for_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_datum'>datum</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_wday'>wday</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>+</span> <span class='int'>6</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>7</span>
            <span class='id identifier rubyid_raum'>raum</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_timetable_date'>timetable_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='symbol'>:raum</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_available_tablet_sets'>available_tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:only_these_rooms_strict</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:only_these_rooms</span><span class='rbracket'>]</span>
                        <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:only_these_rooms</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_raum'>raum</span><span class='rparen'>)</span>
                    <span class='kw'>else</span>
                        <span class='kw'>true</span>
                    <span class='kw'>end</span>
                <span class='kw'>else</span>
                    <span class='kw'>true</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
            <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>An error occured while trying to determine the room for a lesson: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_content'>, ignoring the room now...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_tablet_sets'>tablet_sets</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_available_tablet_sets'>available_tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_blocked_by'>blocked_by</span> <span class='op'>=</span> <span class='id identifier rubyid_booked_tablet_sets_timespan'>booked_tablet_sets_timespan</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_blocked_by'>blocked_by</span>
                <span class='id identifier rubyid_blocked_by'>blocked_by</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbrace'>}</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:standort</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:standort</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:is_tablet_set</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:blocked_by</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_blocked_by'>blocked_by</span>
        <span class='rbrace'>}</span>
        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_booked_tablet_sets_timespan'>booked_tablet_sets_timespan</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_booked_tablet_sets_timespan'>booked_tablet_sets_timespan</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>=</span> <span class='id identifier rubyid_fach_for_lesson_key'>fach_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz wurde bereits von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; gebucht</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieses Gerät wurde bereits von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; gebucht</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>else</span>
                    <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz wurde bereits von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; gebucht</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieses Gerät wurde bereits von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; gebucht</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:reason</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_booked_tablet_sets_day'>booked_tablet_sets_day</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bookings_before'>bookings_before</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bookings_after'>bookings_after</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_booked_tablet_sets_day'>booked_tablet_sets_day</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_start_time'>start_time</span>
                    <span class='id identifier rubyid_bookings_before'>bookings_before</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_bookings_after'>bookings_after</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_bookings_before'>bookings_before</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_booking'>booking</span> <span class='op'>=</span> <span class='id identifier rubyid_bookings_before'>bookings_before</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
                <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_hh_mm_to_i'>hh_mm_to_i</span><span class='lparen'>(</span><span class='id identifier rubyid_start_time'>start_time</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_hh_mm_to_i'>hh_mm_to_i</span><span class='lparen'>(</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#TABLET_SET_WARNING_BEFORE_MINUTES-constant" title="TABLET_SET_WARNING_BEFORE_MINUTES (constant)">TABLET_SET_WARNING_BEFORE_MINUTES</a></span></span>
                    <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>=</span> <span class='id identifier rubyid_fach_for_lesson_key'>fach_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-clock-o&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz wird bis </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten vor Stundenbeginn noch von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; benötigt</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-clock-o&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieses Gerät wird bis </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten vor Stundenbeginn noch von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; benötigt</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_bookings_after'>bookings_after</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_booking'>booking</span> <span class='op'>=</span> <span class='id identifier rubyid_bookings_after'>bookings_after</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_hh_mm_to_i'>hh_mm_to_i</span><span class='lparen'>(</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_hh_mm_to_i'>hh_mm_to_i</span><span class='lparen'>(</span><span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#TABLET_SET_WARNING_AFTER_MINUTES-constant" title="TABLET_SET_WARNING_AFTER_MINUTES (constant)">TABLET_SET_WARNING_AFTER_MINUTES</a></span></span>
                    <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>=</span> <span class='id identifier rubyid_fach_for_lesson_key'>fach_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-clock-o&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz wird bereits </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten nach Stundenende von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; benötigt</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-clock-o&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieses Gerät wird bereits </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten nach Stundenende von &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; benötigt</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:lesson_key</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_pretty_fach'>pretty_fach</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='op'>!</span><span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:only_these_rooms</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_timetable_date'>timetable_date</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:start_date_for_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_datum'>datum</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_wday'>wday</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>+</span> <span class='int'>6</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>7</span>
                <span class='id identifier rubyid_raum'>raum</span> <span class='op'>=</span> <span class='kw'>nil</span>
                <span class='kw'>begin</span>
                    <span class='id identifier rubyid_raum'>raum</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_timetable_date'>timetable_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='symbol'>:raum</span><span class='rbracket'>]</span>
                <span class='kw'>rescue</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_raum'>raum</span>
                    <span class='kw'>unless</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:only_these_rooms</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_raum'>raum</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz ist weit vom Raum </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_raum'>raum</span><span class='embexpr_end'>}</span><span class='tstring_content'> entfernt. Bitte wählen Sie deshalb – falls möglich – einen anderen Tabletsatz.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='op'>!</span><span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_klasse5or6'>klasse5or6</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_klasse5or6'>klasse5or6</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:prio_unterstufe</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Sie buchen einen Tabletsatz für eine Unterstufenklasse, dieser Tabletsatz ist allerdings für die Unterstufe nicht so leicht zu transportieren. Bitte wählen Sie deshalb – falls möglich – einen anderen Tabletsatz.</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_klasse5or6'>klasse5or6</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:prio_unterstufe</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39;&gt;&lt;i class=&#39;fa fa-warning&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Sie buchen einen Tabletsatz für die Mittel- oder Oberstufe, dieser Tabletsatz ist allerdings für die Unterstufe besonders leicht zu transportieren. Bitte wählen Sie deshalb – falls möglich – einen anderen Tabletsatz.</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_hints'>hints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
                <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-success&#39;&gt;&lt;i class=&#39;fa fa-check&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Dieser Tabletsatz ist eine gute Wahl für Ihre Unterrichtsstunde.</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:hint</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_hints'>hints</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-info&#39;&gt;&lt;i class=&#39;fa fa-info-circle&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:hint</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_hints'>hints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:hint</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_hints'>hints</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br /&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_tablet_sets'>tablet_sets</span><span class='comma'>,</span> <span class='id identifier rubyid_available_tablet_sets'>available_tablet_sets</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="finished_zeugniskonferenzen-instance_method">
  
    #<strong>finished_zeugniskonferenzen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finished_zeugniskonferenzen'>finished_zeugniskonferenzen</span>
    <span class='id identifier rubyid_sha1_list'>sha1_list</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:t1</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m.sha1</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (m:MonitorZeugniskonferenzState)
</span><span class='tstring_content'>        WHERE m.t1 IS NOT NULL
</span><span class='tstring_content'>        RETURN m.sha1;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_sha1_list'>sha1_list</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_sha1_list'>sha1_list</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNISKONFERENZEN-constant" title="ZEUGNISKONFERENZEN (constant)">ZEUGNISKONFERENZEN</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_sha1'>sha1</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_sha1_list'>sha1_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_sha1'>sha1</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_images-instance_method">
  
    #<strong>fix_images</strong>(s)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 230</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fix_images'>fix_images</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>image{[^}]+}</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^image{([^}]+)}$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_slug'>slug</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
        <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
        <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l3</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l4</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l6</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r3</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r4</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
            <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_caption'>caption</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_caption'>caption</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_caption'>caption</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#{</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_include_image(\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_slug'>slug</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;, \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pos'>pos</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;, \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_caption'>caption</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;)}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>file{[^}]+}{[^}]+}</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^file{([^}]+)}{([^}]+)}$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#{_include_file(&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;, &quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;)}</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_jitsi_data-instance_method">
  
    #<strong>gen_jitsi_data</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gen_jitsi_data'>gen_jitsi_data</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ua'>ua</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#USER_AGENT_PARSER-constant" title="USER_AGENT_PARSER (constant)">USER_AGENT_PARSER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HTTP_USER_AGENT</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_browser_icon'>browser_icon</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fa-microphone</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_browser_name'>browser_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Browser</span><span class='tstring_end'>&#39;</span></span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>edge</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>firefox</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>chrome</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>safari</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opera</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_browser_icon'>browser_icon</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span>
            <span class='id identifier rubyid_browser_name'>browser_name</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_os_family'>os_family</span> <span class='op'>=</span> <span class='id identifier rubyid_ua'>ua</span><span class='period'>.</span><span class='id identifier rubyid_os'>os</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:html</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;alert alert-danger&#39;&gt;Der Videochat konnte nicht gefunden werden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_eid'>eid</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_event_stream_jwt'>event_stream_jwt</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lehrerzimmer</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lehrerzimmer</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;&lt;strong&gt;Hinweis:&lt;/strong&gt; Wenn Sie das Lehrerzimmer betreten, wird allen Kolleginnen und Kollegen über dem Stundenplan angezeigt, dass Sie momentan im Lehrerzimmer sind. Das Lehrerzimmer steht nicht nur Lehrkräften, sondern auch unseren Kolleg*innen aus dem Otium und dem Sekretariat zur Verfügung. Für Schülerinnen und Schüler ist der Zutritt nicht möglich.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_path'>path</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>event/</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='comment'># it&#39;s an event!
</span>            <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_eid'>eid</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_organizer_email'>organizer_email</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:eid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eid'>eid</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (e:Event {id: $eid})-[:ORGANIZED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>                WHERE COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>                RETURN e, ou.email;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='id identifier rubyid_organizer_email'>organizer_email</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_room_name_for_event'>room_name_for_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_eid'>eid</span><span class='rparen'>)</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_code'>code</span>
                <span class='comment'># EVENT - EXTERNAL USER WITH CODE
</span>                <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:eid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eid'>eid</span><span class='rparen'>)</span>
<span class='tstring_content'>                    MATCH (u)-[rt:IS_PARTICIPANT]-&gt;(e:Event {id: $eid})-[:ORGANIZED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>                    WHERE (u:ExternalUser OR u:PredefinedExternalUser) AND COALESCE(e.deleted, false) = false AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>                    RETURN e, ou.email, u;
</span><span class='heredoc_end'>                END_OF_QUERY
</span>                <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                    <span class='id identifier rubyid_row_code'>row_code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#EXTERNAL_USER_EVENT_SCRAMBLER-constant" title="EXTERNAL_USER_EVENT_SCRAMBLER (constant)">EXTERNAL_USER_EVENT_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='id identifier rubyid_row_code'>row_code</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_event_stream_jwt'>event_stream_jwt</span> <span class='op'>=</span> <span class='id identifier rubyid_gen_jwt_for_stream'>gen_jwt_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_ext_name'>ext_name</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:stream</span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
                <span class='comment'># EVENT - INTERNAL USER
</span>                <span class='id identifier rubyid_require_user!'>require_user!</span>
                <span class='kw'>begin</span>
                    <span class='comment'># EVENT - INTERNAL USER IS ORGANIZER
</span>                    <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:eid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eid'>eid</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>                        MATCH (e:Event {id: $eid})-[:ORGANIZED_BY]-&gt;(ou:User {email: $email})
</span><span class='tstring_content'>                        WHERE COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>                        RETURN e, ou.email;
</span><span class='heredoc_end'>                    END_OF_QUERY
</span>                <span class='kw'>rescue</span>
                    <span class='comment'># EVENT - INTERNAL USER IS INVITED
</span>                    <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:eid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eid'>eid</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>                        MATCH (u:User {email: $email})-[rt:IS_PARTICIPANT]-&gt;(e:Event {id: $eid})-[:ORGANIZED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>                        WHERE COALESCE(e.deleted, false) = false AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>                        RETURN e, ou.email, u;
</span><span class='heredoc_end'>                    END_OF_QUERY
</span>                <span class='kw'>end</span>
                <span class='id identifier rubyid_event_stream_jwt'>event_stream_jwt</span> <span class='op'>=</span> <span class='id identifier rubyid_gen_jwt_for_stream'>gen_jwt_for_stream</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:stream</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>!=</span> <span class='kw'>nil</span><span class='rparen'>)</span>

            <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
            <span class='id identifier rubyid_event_start'>event_start</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_event_end'>event_end</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b class=&#39;key&#39;&gt;Termin:&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b class=&#39;key&#39;&gt;Eingeladen von:&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_organizer_email'>organizer_email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_event_date'>event_date</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:date</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b class=&#39;key&#39;&gt;Datum:&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS-constant" title="WEEKDAYS (constant)">WEEKDAYS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_event_date'>event_date</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event_date'>event_date</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br /&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b class=&#39;key&#39;&gt;Zeit:&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr&lt;br /&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_event_start'>event_start</span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_EVENT_PRE_ENTRY_TOLERANCE-constant" title="JITSI_EVENT_PRE_ENTRY_TOLERANCE (constant)">JITSI_EVENT_PRE_ENTRY_TOLERANCE</a></span></span> <span class='op'>*</span> <span class='int'>60</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;Sie können den Raum erst </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_EVENT_PRE_ENTRY_TOLERANCE-constant" title="JITSI_EVENT_PRE_ENTRY_TOLERANCE (constant)">JITSI_EVENT_PRE_ENTRY_TOLERANCE</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> Minuten vor Beginn betreten. Bitte laden Sie die Seite dann neu, um in den Raum zu gelangen.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='comment'># room can&#39;t yet be entered (too early)
</span>            <span class='kw'>elsif</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_event_end'>event_end</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_EVENT_POST_ENTRY_TOLERANCE-constant" title="JITSI_EVENT_POST_ENTRY_TOLERANCE (constant)">JITSI_EVENT_POST_ENTRY_TOLERANCE</a></span></span> <span class='op'>*</span> <span class='int'>60</span>
                <span class='comment'># room can&#39;t be entered anymore (too late)
</span>                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-danger&#39;&gt;Der Termin liegt in der Vergangenheit. Sie können den Videochat deshalb nicht mehr betreten.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
            <span class='comment'># it&#39;s a lesson, only allow between 07:00 and 18:00
</span>            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_require_user!'>require_user!</span>
            <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_room_name'>room_name</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstream</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
                <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_homeschooling_for_user'><span class='object_link'><a href="#get_homeschooling_for_user-class_method" title="Main.get_homeschooling_for_user (method)">get_homeschooling_for_user</a></span></span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_room_name'>room_name</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstream</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-danger&#39;&gt;Du bist momentan nicht für den Klassenstream freigeschaltet, da du in Gruppe </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:group2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> eingeteilt bist und auch nicht als »zu Hause« markiert bist. Deine Klassenleiterin oder dein Klassenleiter kann dich freischalten.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_can_enter_room'>can_enter_room</span>
                    <span class='id identifier rubyid_now_s'>now_s</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_now_s'>now_s</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>07:00</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_now_s'>now_s</span> <span class='op'>&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>18:00</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;Der </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROVIDE_CLASS_STREAM-constant" title="PROVIDE_CLASS_STREAM (constant)">PROVIDE_CLASS_STREAM</a></span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstream</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stream</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> ist nur von 07:00 bis 18:00 Uhr geöffnet.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
                    <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_decode_www_form'>decode_www_form</span><span class='lparen'>(</span><span class='id identifier rubyid_ext_name'>ext_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span>
                    <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Kursraum</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_timetable_id'>timetable_id</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_tablet_id'>tablet_id</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_id</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='lparen'>(</span><span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:school_streaming</span><span class='rbracket'>]</span>
                        <span class='comment'># determine teacher who has booked the tablet now
</span>                        <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:tablet_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_today'>today</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                            MATCH (t:Tablet {id: $tablet_id})&lt;-[:WHICH]-(b:Booking {datum: $today, confirmed: true})-[:FOR]-&gt;(i:LessonInfo)-[:BELONGS_TO]-&gt;(l:Lesson)
</span><span class='tstring_content'>                            RETURN b, i, l
</span><span class='heredoc_end'>                        END_OF_QUERY
</span>                        <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_found_teachers'>found_teachers</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
                            <span class='id identifier rubyid_booking'>booking</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_lesson'>lesson</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson'>lesson</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_lesson_data'>lesson_data</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:datum</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_end_time'>end_time</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:datum</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booking'>booking</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_time'>start_time</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#STREAMING_TABLET_BOOKING_TIME_PRE-constant" title="STREAMING_TABLET_BOOKING_TIME_PRE (constant)">STREAMING_TABLET_BOOKING_TIME_PRE</a></span></span> <span class='op'>/</span> <span class='float'>24.0</span> <span class='op'>/</span> <span class='float'>60.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_end_time'>end_time</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_time'>start_time</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#STREAMING_TABLET_BOOKING_TIME_POST-constant" title="STREAMING_TABLET_BOOKING_TIME_POST (constant)">STREAMING_TABLET_BOOKING_TIME_POST</a></span></span> <span class='op'>/</span> <span class='float'>24.0</span> <span class='op'>/</span> <span class='float'>60.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_end_time'>end_time</span>
                                <span class='id identifier rubyid_found_teachers'>found_teachers</span> <span class='op'>|=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_data'>lesson_data</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_found_teachers'>found_teachers</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                            <span class='comment'># force timetable_id to teacher who&#39;s currently running the lesson
</span>                            <span class='id identifier rubyid_timetable_id'>timetable_id</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_found_teachers'>found_teachers</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_klassenraum_logged_in?'>klassenraum_logged_in?</span>
                    <span class='id identifier rubyid_timetable_id'>timetable_id</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_breakout_room_name'>breakout_room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
                <span class='comment'># TODO: use code from get_jitsi_room_name_for_lesson_key
</span>                <span class='id identifier rubyid_p_ymd'>p_ymd</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_p_yw'>p_yw</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_timetable_path'>timetable_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/w/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timetable_id'>timetable_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p_yw'>p_yw</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json.gz</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='kw'>nil</span>
                <span class='comment'># debug timetable_path
</span>                <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipReader</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_timetable_path'>timetable_path</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
                    <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                    <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span>
                            <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span> <span class='op'>&amp;&amp;</span>
                            <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>datum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_p_ymd'>p_ymd</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>||</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
                            <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_jitsi</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
                <span class='id identifier rubyid_now_time'>now_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
                <span class='id identifier rubyid_old_timetable_size'>old_timetable_size</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
                <span class='comment'># unless admin_logged_in?
</span>                    <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                        <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_LESSON_POST_ENTRY_TOLERANCE-constant" title="JITSI_LESSON_POST_ENTRY_TOLERANCE (constant)">JITSI_LESSON_POST_ENTRY_TOLERANCE</a></span></span> <span class='op'>*</span> <span class='int'>60</span>
                        <span class='id identifier rubyid_now_time'>now_time</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_t'>t</span>
                    <span class='kw'>end</span>
                <span class='comment'># end
</span>                <span class='kw'>if</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_old_timetable_size'>old_timetable_size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;Dieser Jitsi-Raum ist heute nicht mehr geöffnet.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;Dieser Jitsi-Raum ist heute nicht geöffnet.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_tablet_logged_in?'>tablet_logged_in?</span>
                        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-info&#39;&gt;Falls Sie Jitsi gerade erst aktiviert haben sollten, versuchen Sie bitte, die Seite neu zu laden, da es manchmal ein paar Sekunden dauern kann, bis der Raum tatsächlich aktiviert ist.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='kw'>else</span>
                    <span class='comment'># check if we have streaming restrictions for this lesson
</span>                    <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

                    <span class='comment'># debug lesson_info.to_yaml
</span>
                    <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_stream_allowed_for_date_lesson_key_and_email'>stream_allowed_for_date_lesson_key_and_email</span><span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-info&#39;&gt;Du bist für diesen Jitsi-Raum leider nicht freigeschaltet.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_LESSON_PRE_ENTRY_TOLERANCE-constant" title="JITSI_LESSON_PRE_ENTRY_TOLERANCE (constant)">JITSI_LESSON_PRE_ENTRY_TOLERANCE</a></span></span> <span class='op'>*</span> <span class='int'>60</span>
                        <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>label_lehrer_lang</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klassen</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                        <span class='kw'>unless</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakout_rooms</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                                <span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RandomTag.html" title="RandomTag (class)">RandomTag</a></span></span><span class='op'>::</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="RandomTag.html#generate-class_method" title="RandomTag.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='int'>24</span><span class='rparen'>)</span>
                            <span class='kw'>else</span>
                                <span class='comment'># SuS is logged in, generate a presence token if we have roaming breakout rooms
</span>                                <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakout_rooms_roaming</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                                    <span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RandomTag.html" title="RandomTag (class)">RandomTag</a></span></span><span class='op'>::</span><span class='id identifier rubyid_generate'><span class='object_link'><a href="RandomTag.html#generate-class_method" title="RandomTag.generate (method)">generate</a></span></span><span class='lparen'>(</span><span class='int'>24</span><span class='rparen'>)</span>
                                <span class='kw'>end</span>
                            <span class='kw'>end</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_presence_token'>presence_token</span>
                                <span class='id identifier rubyid_query_data'>query_data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                                    <span class='symbol'>:token</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_presence_token'>presence_token</span><span class='comma'>,</span>
                                    <span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_offset</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                    <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#PRESENCE_TOKEN_EXPIRY_TIME-constant" title="PRESENCE_TOKEN_EXPIRY_TIME (constant)">PRESENCE_TOKEN_EXPIRY_TIME</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                                <span class='rbrace'>}</span>
                                <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span>
                                    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Generating presence token</span><span class='tstring_end'>&quot;</span></span>
                                    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_query_data'>query_data</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
                                <span class='kw'>end</span>
                                <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='id identifier rubyid_query_data'>query_data</span><span class='rparen'>)</span>
<span class='tstring_content'>                                    MATCH (u:User {email: $email}), (i:LessonInfo {offset: $offset})-[:BELONGS_TO]-&gt;(l:Lesson {key: $lesson_key})
</span><span class='tstring_content'>                                    CREATE (n:PresenceToken {token: $token, expiry: $timestamp})
</span><span class='tstring_content'>                                    CREATE (i)&lt;-[:FOR]-(n)-[:BELONGS_TO]-&gt;(u)
</span><span class='tstring_content'>                                    RETURN n;
</span><span class='heredoc_end'>                                END_OF_QUERY
</span>                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_breakout_room_name'>breakout_room_name</span>
                            <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_breakout_room_name'>breakout_room_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>end</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_now_time'>now_time</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_t'>t</span>
                            <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>else</span>
                            <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span> <span class='op'>-</span> <span class='id identifier rubyid_now_time'>now_time</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>60.0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
                            <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timediff'>timediff</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minute</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>/</span> <span class='int'>60</span><span class='embexpr_end'>}</span><span class='tstring_content'> Stunde</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>/</span> <span class='int'>60</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> und </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>%</span> <span class='int'>60</span><span class='embexpr_end'>}</span><span class='tstring_content'> Minute</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>%</span> <span class='int'>60</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>&gt;</span> <span class='int'>60</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>1</span>
                                <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>einer Minute</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>2</span>
                                <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zwei Minuten</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>3</span>
                                <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drei Minuten</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>4</span>
                                <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vier Minuten</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_timediff'>timediff</span> <span class='op'>==</span> <span class='int'>5</span>
                                <span class='id identifier rubyid_tds'>tds</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fünf Minuten</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>end</span>
                            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;Der Jitsi-Raum &lt;strong&gt;»</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>«&lt;/strong&gt; ist erst ab </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr geöffnet. Du kannst ihn in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tds'>tds</span><span class='embexpr_end'>}</span><span class='tstring_content'> betreten.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_can_enter_room'>can_enter_room</span> <span class='op'>=</span> <span class='kw'>false</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_unescape'>unescape</span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_can_enter_room'>can_enter_room</span>
            <span class='comment'># room can be entered now
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_ext_name'>ext_name</span>
                <span class='id identifier rubyid_temp_name'>temp_name</span> <span class='op'>=</span> <span class='id identifier rubyid_ext_name'>ext_name</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
                    <span class='id identifier rubyid_temp_name'>temp_name</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_ext_name'>ext_name</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Sie können dem Videochat jetzt als &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_temp_name'>temp_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; beitreten.&lt;/p&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-secondary&#39;&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Ich habe die &lt;a href=&#39;/api/jitsi_terms&#39;&gt;Nutzerordnung&lt;/a&gt; und die &lt;a href=&#39;/api/jitsi_dse&#39;&gt;Datenschutzerklärung&lt;/a&gt; zur Kenntnis genommen und willige ein.&lt;/p&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_remove_accents'><span class='object_link'><a href="top-level-namespace.html#remove_accents-instance_method" title="#remove_accents (method)">remove_accents</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\:\?#\[\]@!$&amp;\\&#39;()*+,;=&gt;&lt;\/&quot;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%20</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_jwt'>jwt</span> <span class='op'>=</span> <span class='id identifier rubyid_gen_jwt_for_room'>gen_jwt_for_room</span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='comma'>,</span> <span class='id identifier rubyid_eid'>eid</span><span class='comma'>,</span> <span class='id identifier rubyid_ext_name'>ext_name</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;go_div&#39;&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># edge firefox chrome safari opera internet-explorer
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_os_family'>os_family</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ios</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_os_family'>os_family</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>macosx</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-success&#39; href=&#39;org.jitsi.meet://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_HOST-constant" title="JITSI_HOST (constant)">JITSI_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jwt'>jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-apple&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Jitsi-Raum mit Jitsi Meet betreten (iPhone und iPad)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;font-size: 90%;&#39;&gt;&lt;em&gt;Installieren Sie bitte die Jitsi Meet-App aus dem &lt;a href=&#39;https://apps.apple.com/de/app/jitsi-meet/id1165103905&#39; target=&#39;_blank&#39;&gt;App Store&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>unless</span> <span class='id identifier rubyid_browser_icon'>browser_icon</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>safari</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-outline-secondary&#39; href=&#39;https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_HOST-constant" title="JITSI_HOST (constant)">JITSI_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>presence_token=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jwt'>jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_icon'>browser_icon</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Jitsi-Raum mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_name'>browser_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> betreten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_browser_icon'>browser_icon</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>safari</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;font-size: 90%;&#39;&gt;&lt;em&gt;Falls Sie einen Mac verwenden: Leider funktioniert Jitsi Meet nicht mit Safari. Verwenden Sie bitte einen anderen Web-Browser wie &lt;a href=&#39;https://www.google.com/intl/de_de/chrome/&#39; target=&#39;_blank&#39;&gt;Google Chrome&lt;/a&gt; oder &lt;a href=&#39;https://www.mozilla.org/de/firefox/new/&#39; target=&#39;_blank&#39;&gt;Firefox&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_os_family'>os_family</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>android</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-success&#39; href=&#39;intent://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_HOST-constant" title="JITSI_HOST (constant)">JITSI_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jwt'>jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>#Intent;scheme=org.jitsi.meet;package=org.jitsi.meet;end&#39;&gt;&lt;i class=&#39;fa fa-microphone&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Jitsi-Raum mit Jitsi Meet für Android betreten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;font-size: 90%;&#39;&gt;&lt;em&gt;Installieren Sie bitte die Jitsi Meet-App aus dem &lt;a href=&#39;https://play.google.com/store/apps/details?id=org.jitsi.meet&#39; target=&#39;_blank&#39;&gt;Google Play Store&lt;/a&gt; oder via &lt;a href=&#39;https://f-droid.org/en/packages/org.jitsi.meet/&#39; target=&#39;_blank&#39; style=&#39;&#39;&gt;F&amp;#8209;Droid&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-outline-secondary&#39; href=&#39;https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_HOST-constant" title="JITSI_HOST (constant)">JITSI_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>presence_token=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jwt'>jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_icon'>browser_icon</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Jitsi-Raum mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_name'>browser_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> betreten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-success&#39; href=&#39;https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_HOST-constant" title="JITSI_HOST (constant)">JITSI_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_name'>room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>presence_token=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_presence_token'>presence_token</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jwt'>jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_icon'>browser_icon</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Jitsi-Raum mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_browser_name'>browser_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> betreten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event_stream_jwt'>event_stream_jwt</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Falls Sie im Jitsi-Raum &lt;strong&gt;Verbindungsprobleme&lt;/strong&gt; oder &lt;strong&gt;Zeitverzögerungen&lt;/strong&gt; erleben sollten, probieren Sie bitte den Livestream, der für diesen Termin bereitgestellt wird. Sie finden dort einen Chat, über den Sie Wortmeldungen und Fragen senden können.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-warning&#39; href=&#39;/livestream?jwt=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event_stream_jwt'>event_stream_jwt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-video-camera&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Zum Livestream…&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gen_jitsi_data failed for path [</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_e'>e</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:html</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;alert alert-danger&#39;&gt;Der Videochat konnte nicht gefunden werden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_jwt_for_room-instance_method">
  
    #<strong>gen_jwt_for_room</strong>(room = &#39;&#39;, eid = nil, user = nil, email = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gen_jwt_for_room'>gen_jwt_for_room</span><span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_eid'>eid</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:aud</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPAUD-constant" title="JWT_APPAUD (constant)">JWT_APPAUD</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:iss</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPISS-constant" title="JWT_APPISS (constant)">JWT_APPISS</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:sub</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_SUB-constant" title="JWT_SUB (constant)">JWT_SUB</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:room</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_room'>room</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='comma'>,</span>
        <span class='symbol'>:exp</span> <span class='op'>=&gt;</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> 00:00:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>24</span> <span class='op'>*</span> <span class='int'>60</span> <span class='op'>*</span> <span class='int'>60</span><span class='comma'>,</span>
        <span class='symbol'>:moderator</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span> <span class='kw'>if</span> <span class='id identifier rubyid_email'>email</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
        <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='ivar'>@session_user</span>
        <span class='comment'># don&#39;t generate JWT if user is on negative list (/data/schueler/disable-jitsi.txt)
</span>        <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:jitsi_disabled</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no jitsi for you</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
            <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span>
            <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Kursraum</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_klassenraum_logged_in?'>klassenraum_logged_in?</span>
            <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenraum</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_tablet_logged_in?'>tablet_logged_in?</span>
            <span class='kw'>if</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassen_stream</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Klassenstreaming-Tablet </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassen_stream</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:moderator</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_use_user'>use_user</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:display_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Tablet</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:avatar</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/128</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_eid'>eid</span>
            <span class='id identifier rubyid_organizer_email'>organizer_email</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:eid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eid'>eid</span><span class='comma'>,</span> <span class='symbol'>:session_email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>                MATCH (e:Event {id: $eid})-[:ORGANIZED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>                WHERE COALESCE(e.deleted, false) = false
</span><span class='tstring_content'>                RETURN ou.email;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:moderator</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_organizer_email'>organizer_email</span> <span class='op'>==</span> <span class='id identifier rubyid_use_user'>use_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Generated Jitsi token for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:room</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>||</span> <span class='kw'>true</span>

    <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='const'>JWT</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span> <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPKEY-constant" title="JWT_APPKEY (constant)">JWT_APPKEY</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HS256</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_header_fields'>header_fields</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:typ</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>JWT</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_token'>token</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_jwt_for_stream-instance_method">
  
    #<strong>gen_jwt_for_stream</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gen_jwt_for_stream'>gen_jwt_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='symbol'>:aud</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPAUD_STREAM-constant" title="JWT_APPAUD_STREAM (constant)">JWT_APPAUD_STREAM</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:iss</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPISS-constant" title="JWT_APPISS (constant)">JWT_APPISS</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:sub</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_SUB-constant" title="JWT_SUB (constant)">JWT_SUB</a></span></span><span class='comma'>,</span>
        <span class='symbol'>:exp</span> <span class='op'>=&gt;</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> 00:00:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>24</span> <span class='op'>*</span> <span class='int'>60</span> <span class='op'>*</span> <span class='int'>60</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:context</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='const'>JWT</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span> <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JWT_APPKEY_STREAM-constant" title="JWT_APPKEY_STREAM (constant)">JWT_APPKEY_STREAM</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_algorithm'>algorithm</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HS256</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_header_fields'>header_fields</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:typ</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>JWT</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_token'>token</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_poll_data-instance_method">
  
    #<strong>gen_poll_data</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988
989
990</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 943</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gen_poll_data'>gen_poll_data</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/poll/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_prid'>prid</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_prid'>prid</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u)-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>        WHERE (u:ExternalUser OR u:PredefinedExternalUser) AND COALESCE(pr.deleted, false) = false AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>        RETURN pr, ou.email, u, p;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_row_code'>row_code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#EXTERNAL_USER_EVENT_SCRAMBLER-constant" title="EXTERNAL_USER_EVENT_SCRAMBLER (constant)">EXTERNAL_USER_EVENT_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_code'>code</span> <span class='op'>==</span> <span class='id identifier rubyid_row_code'>row_code</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/poll_not_found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>302</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ext_name'>ext_name</span> <span class='op'>=</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll'>poll</span> <span class='op'>=</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_end_time'>end_time</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:organizer</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:organizer_icon</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-fill</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:prid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prid'>prid</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:external_user_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ext_name'>ext_name</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_start_time'>start_time</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:disable_launch_button</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Die Umfrage öffnet erst am</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr (in &lt;span class=&#39;moment-countdown&#39; data-target-timestamp=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00&#39; data-before-label=&#39;&#39; data-after-label=&#39;&#39;&gt;&lt;/span&gt;).</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_end_time'>end_time</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:disable_launch_button</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Die Umfrage ist bereits beendet.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:disable_launch_button</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sie können noch bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr teilnehmen (die Umfrage &lt;span class=&#39;moment-countdown&#39; data-target-timestamp=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00&#39; data-before-label=&#39;läuft noch&#39; data-after-label=&#39;ist vorbei&#39;&gt;&lt;/span&gt;).</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_angebote-instance_method">
  
    #<strong>get_angebote</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/angebote.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_angebote'>get_angebote</span>
    <span class='comment'># first, purge all connections to users which no longer exist
</span>    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (a:Angebot)&lt;-[r:IS_PART_OF]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN DISTINCT u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})-[r:IS_PART_OF]-&gt;(a:Angebot)
</span><span class='tstring_content'>                DELETE r;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:info</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:recipient</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:owner</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (a:Angebot)-[:DEFINED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>        WITH a, ou
</span><span class='tstring_content'>        OPTIONAL MATCH (u:User)-[r:IS_PART_OF]-&gt;(a)
</span><span class='tstring_content'>        RETURN a, u.email, ou.email
</span><span class='tstring_content'>        ORDER BY a.created DESC, a.id;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp_order'>temp_order</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_angebote'>angebote</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:aid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:info</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:owner</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:owner</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='rbrace'>}</span>
            <span class='id identifier rubyid_temp_order'>temp_order</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:recipient</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span> <span class='op'>=</span> <span class='id identifier rubyid_temp_order'>temp_order</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:info</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_angebot'>angebot</span><span class='op'>|</span>
        <span class='id identifier rubyid_angebot'>angebot</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
            <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
            <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_angebote_for_email-instance_method">
  
    #<strong>get_angebote_for_email</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/angebote.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_angebote_for_email'>get_angebote_for_email</span>
    <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='id identifier rubyid_angebote'>angebote</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)-[:IS_PART_OF]-&gt;(a:Angebot)-[:DEFINED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>        RETURN u.email, a.name, ou.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_owner'>owner</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a.name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_angebote'>angebote</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_angebote'>angebote</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:owner</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_owner'>owner</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_angebote_for_session_user-instance_method">
  
    #<strong>get_angebote_for_session_user</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/angebote.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_angebote_for_session_user'>get_angebote_for_session_user</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_angebote'>angebote</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[:IS_PART_OF]-&gt;(a:Angebot)-[:DEFINED_BY]-&gt;(ou:User)
</span><span class='tstring_content'>        RETURN a, ou.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_owner'>owner</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_angebot'>angebot</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_owner'>owner</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_angebote'>angebote</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:owner</span> <span class='op'>=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_owner'>owner</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_angebot'>angebot</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_angebote'>angebote</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_jitsi_users_for_lesson-instance_method">
  
    #<strong>get_current_jitsi_users_for_lesson</strong>(lesson_key, offset, user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_jitsi_users_for_lesson'>get_current_jitsi_users_for_lesson</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:lesson_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_offset'>offset</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>i</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MATCH (i:LessonInfo {offset: $offset})-[:BELONGS_TO]-&gt;(l:Lesson {key: $lesson_key})
</span><span class='tstring_content'>        RETURN i;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_jitsi_room_name_for_lesson_key'>get_jitsi_room_name_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not today!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lesson_room_name'>lesson_room_name</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\:\?#\[\]@!$&amp;\\&#39;()*+,;=&gt;&lt;\/&quot;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%20</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>

    <span class='id identifier rubyid_jitsi_rooms'>jitsi_rooms</span> <span class='op'>=</span> <span class='id identifier rubyid_current_jitsi_rooms'>current_jitsi_rooms</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_room_participants'>room_participants</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_breakout_room_index'>breakout_room_index</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_breakout_room_urls'>breakout_room_urls</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:breakout_rooms</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room_name'>room_name</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_room_participants'>room_participants</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_escaped_room_name'>escaped_room_name</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_room_name'>room_name</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\:\?#\[\]@!$&amp;\\&#39;()*+,;=&gt;&lt;\/&quot;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%20</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_escaped_room_name'>escaped_room_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_room_name'>lesson_room_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>%20</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_escaped_room_name'>escaped_room_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_breakout_room_urls'>breakout_room_urls</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_escaped_room_name'>escaped_room_name</span>
        <span class='id identifier rubyid_breakout_room_index'>breakout_room_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_escaped_room_name'>escaped_room_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:room_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_room_name'>room_name</span><span class='comma'>,</span>
            <span class='symbol'>:index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_i'>i</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_lesson_room_participants'>lesson_room_participants</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_present_sus'>present_sus</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_jitsi_rooms'>jitsi_rooms</span>
        <span class='id identifier rubyid_jitsi_rooms'>jitsi_rooms</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
            <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_breakout_room_index'>breakout_room_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>roomName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
                <span class='id identifier rubyid_room_participants'>room_participants</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:index</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>participants</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                    <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtEMail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                    <span class='id identifier rubyid_present_sus'>present_sus</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtEMail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>roomName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_lesson_room_name'>lesson_room_name</span>
                <span class='id identifier rubyid_lesson_room_participants'>lesson_room_participants</span> <span class='op'>=</span> <span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>participants</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                    <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtEMail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                    <span class='id identifier rubyid_present_sus'>present_sus</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtEMail</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jwtName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_missing_sus'>missing_sus</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_present_sus'>present_sus</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
    <span class='lbrace'>{</span><span class='symbol'>:lesson_room</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_room_participants'>lesson_room_participants</span><span class='comma'>,</span>
     <span class='symbol'>:breakout_rooms</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_room_participants'>room_participants</span><span class='comma'>,</span>
     <span class='symbol'>:missing_sus</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id identifier rubyid_missing_sus'>missing_sus</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='comma'>,</span>
     <span class='symbol'>:breakout_room_names</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:breakout_rooms</span><span class='rbracket'>]</span><span class='comma'>,</span>
     <span class='symbol'>:lesson_room_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_lesson_room_name'>lesson_room_name</span><span class='comma'>,</span>
     <span class='symbol'>:breakout_room_index</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_breakout_room_index'>breakout_room_index</span><span class='comma'>,</span>
     <span class='symbol'>:breakout_room_urls</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_breakout_room_urls'>breakout_room_urls</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_status-instance_method">
  
    #<strong>get_current_salzh_status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 375</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_salzh_status'>get_current_salzh_status</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_status'><span class='object_link'><a href="#get_current_salzh_status-class_method" title="Main.get_current_salzh_status (method)">get_current_salzh_status</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_status_for_logged_in_teacher-instance_method">
  
    #<strong>get_current_salzh_status_for_logged_in_teacher</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381
382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_salzh_status_for_logged_in_teacher'>get_current_salzh_status_for_logged_in_teacher</span>
    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_get_current_salzh_status'>get_current_salzh_status</span>
    <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='cvar'>@@schueler_for_teacher</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entries'>entries</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_salzh_sus-instance_method">
  
    #<strong>get_current_salzh_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_salzh_sus'>get_current_salzh_sus</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_current_salzh_sus'><span class='object_link'><a href="#get_current_salzh_sus-class_method" title="Main.get_current_salzh_sus (method)">get_current_salzh_sus</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_current_user_sessions-instance_method">
  
    #<strong>get_current_user_sessions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_current_user_sessions'>get_current_user_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_emails_for_foto_paths-instance_method">
  
    #<strong>get_emails_for_foto_paths</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2943
2944
2945
2946
2947
2948
2949
2950
2951
2952
2953
2954</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2943</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_emails_for_foto_paths'>get_emails_for_foto_paths</span>
    <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        WHERE u.foto_path IS NOT NULL
</span><span class='tstring_content'>        RETURN u.email AS email, u.foto_path AS path;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_gradient-instance_method">
  
    #<strong>get_gradient</strong>(colors, t)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_gradient'><span class='object_link'><a href="top-level-namespace.html#get_gradient-instance_method" title="#get_gradient (method)">get_gradient</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>==</span> <span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_t'>t</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_i'>i</span>
    <span class='id identifier rubyid_f1'>f1</span> <span class='op'>=</span> <span class='float'>1.0</span> <span class='op'>-</span> <span class='id identifier rubyid_f'>f</span>
    <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_html_to_rgb'><span class='object_link'><a href="top-level-namespace.html#html_to_rgb-instance_method" title="#html_to_rgb (method)">html_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_html_to_rgb'><span class='object_link'><a href="top-level-namespace.html#html_to_rgb-instance_method" title="#html_to_rgb (method)">html_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_colors'>colors</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rgb_to_html'><span class='object_link'><a href="top-level-namespace.html#rgb_to_html-instance_method" title="#rgb_to_html (method)">rgb_to_html</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f1'>f1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f1'>f1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f1'>f1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_f'>f</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_gradients-instance_method">
  
    #<strong>get_gradients</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/theme.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_gradients'>get_gradients</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User) 
</span><span class='tstring_content'>        WITH COALESCE(u.color_scheme, &#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@standard_color_scheme</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;) AS scheme
</span><span class='tstring_content'>        RETURN  scheme, count(scheme) AS count ORDER BY count DESC, scheme DESC;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_histogram'>histogram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scheme</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='cvar'>@@standard_color_scheme</span>
        <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scheme</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>18</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scheme</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>18</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>count</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_histogram_style'>histogram_style</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scheme</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='cvar'>@@standard_color_scheme</span>
        <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scheme</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>19</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_histogram_style'>histogram_style</span><span class='lbracket'>[</span><span class='id identifier rubyid_style'>style</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_histogram_style'>histogram_style</span><span class='lbracket'>[</span><span class='id identifier rubyid_style'>style</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>count</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_color_schemes'>color_schemes</span> <span class='op'>=</span> <span class='cvar'>@@color_scheme_colors</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_paint_colors'>paint_colors</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
            <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='comma'>,</span> <span class='int'>255</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='float'>0.3</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_paint_colors'>paint_colors</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_color_palette_for_color_scheme'><span class='object_link'><a href="top-level-namespace.html#color_palette_for_color_scheme-instance_method" title="#color_palette_for_color_scheme (method)">color_palette_for_color_scheme</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>l</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='lbrace'>{</span><span class='symbol'>:color_schemes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_color_schemes'>color_schemes</span><span class='comma'>,</span>
     <span class='symbol'>:style_histogram</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_histogram_style'>histogram_style</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_ha_amt_lesson_keys-instance_method">
  
    #<strong>get_ha_amt_lesson_keys</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lesson.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_ha_amt_lesson_keys'>get_ha_amt_lesson_keys</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[r:HAS_AMT {amt: &#39;hausaufgaben&#39;}]-&gt;(l:Lesson)
</span><span class='tstring_content'>        RETURN l.key;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_hotspot_klassen-instance_method">
  
    #<strong>get_hotspot_klassen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_hotspot_klassen'>get_hotspot_klassen</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_hotspot_klassen'><span class='object_link'><a href="#get_hotspot_klassen-class_method" title="Main.get_hotspot_klassen (method)">get_hotspot_klassen</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_invited_and_accepted_pk5_for_teacher-instance_method">
  
    #<strong>get_invited_and_accepted_pk5_for_teacher</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 618</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_invited_and_accepted_pk5_for_teacher'>get_invited_and_accepted_pk5_for_teacher</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_get_remaining_pk5_projects_for_teacher'>get_remaining_pk5_projects_for_teacher</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_invited'>invited</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:invited</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_accepted'>accepted</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:accepted</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_left'>left</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:left</span><span class='rbracket'>]</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sie haben bisher </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_accepted'>accepted</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>keine</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_accepted'>accepted</span><span class='embexpr_end'>}</span><span class='tstring_content'> Prüfung</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_accepted'>accepted</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> angenommen und </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_invited'>invited</span> <span class='op'>-</span> <span class='id identifier rubyid_accepted'>accepted</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>keine</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id identifier rubyid_invited'>invited</span> <span class='op'>-</span> <span class='id identifier rubyid_accepted'>accepted</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> ausstehende Anfrage</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_invited'>invited</span> <span class='op'>-</span> <span class='id identifier rubyid_accepted'>accepted</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>. Sie können insgesamt höchstens fünf Prüfungen annehmen, also nach aktuellem Stand noch </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_left'>left</span><span class='embexpr_end'>}</span><span class='tstring_content'> Prüfung</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_left'>left</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_jitsi_room_name_for_lesson_key-instance_method">
  
    #<strong>get_jitsi_room_name_for_lesson_key</strong>(lesson_key, user = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 449</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_jitsi_room_name_for_lesson_key'>get_jitsi_room_name_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_p_ymd'>p_ymd</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_p_yw'>p_yw</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_timetable_path'>timetable_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/gen/w/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_id'>user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p_yw'>p_yw</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json.gz</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipReader</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_timetable_path'>timetable_path</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
        <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span>
                <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
                <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>datum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_p_ymd'>p_ymd</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:admin</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
                <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lesson_jitsi</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_now_time'>now_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
    <span class='id identifier rubyid_old_timetable_size'>old_timetable_size</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='symbol'>:admin</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_timetable'>timetable</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
            <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#JITSI_LESSON_POST_ENTRY_TOLERANCE-constant" title="JITSI_LESSON_POST_ENTRY_TOLERANCE (constant)">JITSI_LESSON_POST_ENTRY_TOLERANCE</a></span></span> <span class='op'>*</span> <span class='int'>60</span>
            <span class='id identifier rubyid_now_time'>now_time</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_t'>t</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_room_name'>room_name</span> <span class='op'>=</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>label_lehrer_lang</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_timetable'>timetable</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klassen</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_room_name'>room_name</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_login_stats-instance_method">
  
    #<strong>get_login_stats</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/stats.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_login_stats'>get_login_stats</span>
    <span class='id identifier rubyid_login_seen'>login_seen</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_STATS_D-constant" title="LOGIN_STATS_D (constant)">LOGIN_STATS_D</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span>
        <span class='id identifier rubyid_login_counts'>login_counts</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span> <span class='op'>-</span> <span class='id identifier rubyid_d'>d</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User) WHERE EXISTS(u.last_access) AND u.last_access &gt;= $today
</span><span class='tstring_content'>            RETURN u.email;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_login_counts'>login_counts</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_login_seen'>login_seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_login_seen'>login_seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_login_stats'>login_stats</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:total</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_teacher_count'>teacher_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_sus_count'>sus_count</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_teacher_count'>teacher_count</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_sus_count'>sus_count</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:total</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_teacher_count'>teacher_count</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:total</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sus_count'>sus_count</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_login_seen'>login_seen</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_seen'>seen</span><span class='op'>|</span>
        <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_seen'>seen</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_login_stats'>login_stats</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_monitor_messages-instance_method">
  
    #<strong>get_monitor_messages</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_monitor_messages'>get_monitor_messages</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#MONITOR_MESSAGE_PATH-constant" title="Main::MONITOR_MESSAGE_PATH (constant)">MONITOR_MESSAGE_PATH</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#MONITOR_MESSAGE_PATH-constant" title="Main::MONITOR_MESSAGE_PATH (constant)">MONITOR_MESSAGE_PATH</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='symbol'>:messages</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:images</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span>
    <span class='lbracket'>[</span><span class='symbol'>:messages</span><span class='comma'>,</span> <span class='symbol'>:images</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
            <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_line'>line</span> <span class='kw'>unless</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_monitor_zeugniskonferenzen-instance_method">
  
    #<strong>get_monitor_zeugniskonferenzen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_monitor_zeugniskonferenzen'>get_monitor_zeugniskonferenzen</span>
    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (m:MonitorZeugniskonferenz)
</span><span class='tstring_content'>        RETURN m.key, COALESCE(m.value, FALSE) AS value;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>value</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>flur</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lz</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sek</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_my_pk5-instance_method">
  
    #<strong>get_my_pk5</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_my_pk5'>get_my_pk5</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Pk5)-[:BELONGS_TO]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        WITH p
</span><span class='tstring_content'>        MATCH (p)-[:BELONGS_TO]-&gt;(ou:User)
</span><span class='tstring_content'>        RETURN p, ou.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='lbrace'>{</span>
            <span class='symbol'>:sus</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='rbrace'>}</span>
    <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
                <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft_display_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft_is_confirmed</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft_confirmed_by</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_next_cypher_password-instance_method">
  
    #<strong>get_next_cypher_password</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_next_cypher_password'>get_next_cypher_password</span>
    <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='ivar'>@cypher_seed</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_languages'>languages</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#CYPHER_LANGUAGES-constant" title="Main::CYPHER_LANGUAGES (constant)">CYPHER_LANGUAGES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
    <span class='kw'>if</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line_for_lang'>line_for_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_caesar'>caesar</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line_for_lang_dont_end_on_lang'>line_for_lang_dont_end_on_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_skytale'>skytale</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>2</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line_for_lang'>line_for_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>3</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>4</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>5</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line_for_lang'>line_for_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>6</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>-cypher</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>7</span>
        <span class='id identifier rubyid_pin'>pin</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>provided</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            RETURN COALESCE(u.cypher_provided, &#39;&#39;) AS provided;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>    </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>    </span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span>
            <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
                <span class='id identifier rubyid_t'>t</span> <span class='op'>+=</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>55</span>
                <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_pin'>pin</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_tag'>tag</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Die Überprüfung der PIN dauerte </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_content'> µs.</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_pin'>pin</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>8</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Das naechste Loesungswort lautet </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>elsif</span> <span class='ivar'>@cypher_level</span> <span class='op'>==</span> <span class='int'>9</span>
        <span class='id identifier rubyid_lang'>lang</span> <span class='op'>=</span> <span class='id identifier rubyid_languages'>languages</span><span class='lbracket'>[</span><span class='ivar'>@cypher_level</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
        <span class='comment'># line = line_for_lang(lang)
</span>        <span class='ivar'>@cypher_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_lang'>lang</span>
        <span class='ivar'>@cypher_token</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_next_password-instance_method">
  
    #<strong>get_next_password</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/hack.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_next_password'>get_next_password</span>
    <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='ivar'>@hack_seed</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#NAMES-constant" title="Main::NAMES (constant)">NAMES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='lbracket'>[</span><span class='ivar'>@hack_level</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_number'>number</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>7</span><span class='comma'>,</span><span class='int'>8</span><span class='comma'>,</span><span class='int'>9</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>7</span><span class='comma'>,</span><span class='int'>8</span><span class='comma'>,</span><span class='int'>9</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>*</span> <span class='int'>10</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>7</span><span class='comma'>,</span><span class='int'>8</span><span class='comma'>,</span><span class='int'>9</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_number'>number</span><span class='period'>.</span><span class='id identifier rubyid_to_roman'>to_roman</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number'>number</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>2</span>
        <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#NAMES-constant" title="Main::NAMES (constant)">NAMES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='lbracket'>[</span><span class='ivar'>@hack_level</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>3</span>
        <span class='id identifier rubyid_notes'>notes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cis</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>D</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Es</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fis</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>G</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>As</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>B</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                 <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cis</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>es</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fis</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>g</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>as</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>h</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>

        <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='lparen'>(</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_available_indices'>available_indices</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='lparen'>(</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
        <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>12</span>
        <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>4</span> <span class='op'>:</span> <span class='int'>3</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>12</span>
        <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>7</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='int'>12</span>
        <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_shuffle!'>shuffle!</span>
        <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='id identifier rubyid_available_indices'>available_indices</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_chord'>chord</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='id identifier rubyid_mode'>mode</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Dur</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Moll</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_correct_note'>correct_note</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>

        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_correct_note'>correct_note</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_n0'>n0</span><span class='comma'>,</span> <span class='id identifier rubyid_n1'>n1</span><span class='comma'>,</span> <span class='id identifier rubyid_n2'>n2</span><span class='comma'>,</span> <span class='id identifier rubyid_n3'>n3</span> <span class='op'>=</span> <span class='op'>*</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_correct_note'>correct_note</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span><span class='rparen'>)</span>
        <span class='ivar'>@hack_description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span style=&#39;font-size: 150%;&#39;&gt;&lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_n0'>n0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;, &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_n1'>n1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;, &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_n2'>n2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; oder &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_notes'>notes</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_n3'>n3</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='id identifier rubyid_chord'>chord</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>4</span>
        <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#NAMES-constant" title="Main::NAMES (constant)">NAMES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='lbracket'>[</span><span class='ivar'>@hack_level</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>5</span>
        <span class='id identifier rubyid_space_events'>space_events</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#SPACE_EVENTS-constant" title="Main::SPACE_EVENTS (constant)">SPACE_EVENTS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='id identifier rubyid_date'>date</span> <span class='op'>=</span> <span class='id identifier rubyid_space_events'>space_events</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#SPACE_EVENTS-constant" title="Main::SPACE_EVENTS (constant)">SPACE_EVENTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_date'>date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='ivar'>@hack_description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#SPACE_EVENTS-constant" title="Main::SPACE_EVENTS (constant)">SPACE_EVENTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_date'>date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>__DATE__</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#SPACE_EVENTS-constant" title="Main::SPACE_EVENTS (constant)">SPACE_EVENTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_date'>date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Wie viele Tage sind seitdem vergangen?</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span> <span class='op'>-</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_date'>date</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>6</span>
        <span class='id identifier rubyid_ascii'>ascii</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@#$%&amp;*()[]{}</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='id identifier rubyid_ascii'>ascii</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%02x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ascii'>ascii</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>7</span>
        <span class='id identifier rubyid_primes'>primes</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#PRIMES-constant" title="Main::PRIMES (constant)">PRIMES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='id identifier rubyid_ps'>ps</span> <span class='op'>=</span> <span class='id identifier rubyid_primes'>primes</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_ps'>ps</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='id identifier rubyid_ps'>ps</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid__'>_</span> <span class='op'>*</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span> <span class='op'>*</span> <span class='id identifier rubyid_p'>p</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>8</span>
        <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#NAMES-constant" title="Main::NAMES (constant)">NAMES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='lbracket'>[</span><span class='ivar'>@hack_level</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-Dashboard-Hackers-Passwort</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@hack_next_password</span>
    <span class='kw'>elsif</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>9</span>
        <span class='id identifier rubyid_fruit'>fruit</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#FRUIT-constant" title="Main::FRUIT (constant)">FRUIT</a></span></span><span class='period'>.</span><span class='id identifier rubyid_shuffle'>shuffle</span>
        <span class='ivar'>@hack_next_password</span> <span class='op'>=</span> <span class='id identifier rubyid_fruit'>fruit</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='ivar'>@hack_token</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='ivar'>@hack_next_password</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@hack_next_password</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_omit_ical_types-instance_method">
  
    #<strong>get_omit_ical_types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430
431
432
433
434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_omit_ical_types'>get_omit_ical_types</span>
    <span class='id identifier rubyid_types'>types</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>types</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.omit_ical_types, []) AS types;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_types'>types</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_open_doors_for_user-instance_method">
  
    #<strong>get_open_doors_for_user</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2561
2562
2563
2564
2565
2566
2567
2568</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_open_doors_for_user'>get_open_doors_for_user</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_doors'>doors</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>doors</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.advent_calendar_doors, 0) AS doors;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_doors'>doors</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_poll_run-instance_method">
  
    #<strong>get_poll_run</strong>(prid, external_code = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 4</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_poll_run'>get_poll_run</span><span class='lparen'>(</span><span class='id identifier rubyid_prid'>prid</span><span class='comma'>,</span> <span class='id identifier rubyid_external_code'>external_code</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_external_code'>external_code</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_external_code'>external_code</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u)-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(au:User)
</span><span class='tstring_content'>            WHERE (u:ExternalUser OR u:PredefinedExternalUser) AND COALESCE(p.deleted, false) = false AND COALESCE(pr.deleted, false) = false AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>            RETURN u.email, pr.id, ID(u) AS unid, ID(pr) AS prnid;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_invitation'>invitation</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
            <span class='id identifier rubyid_row_code'>row_code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#EXTERNAL_USER_EVENT_SCRAMBLER-constant" title="EXTERNAL_USER_EVENT_SCRAMBLER (constant)">EXTERNAL_USER_EVENT_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_external_code'>external_code</span> <span class='op'>==</span> <span class='id identifier rubyid_row_code'>row_code</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_invitation'>invitation</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:unid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:prnid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_invitation'>invitation</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>prnid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u)-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(au:User)
</span><span class='tstring_content'>            WHERE ID(u) = $unid AND ID(pr) = $prnid
</span><span class='tstring_content'>            MATCH (ou)-[rt2:IS_PARTICIPANT]-&gt;(pr2:PollRun {id: $prid})-[:RUNS]-&gt;(p2:Poll)-[:ORGANIZED_BY]-&gt;(au2:User)
</span><span class='tstring_content'>            WHERE COALESCE(rt2.deleted, false) = false
</span><span class='tstring_content'>            RETURN u, pr, p, au.email, COUNT(ou) AS total_participants;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>else</span>
        <span class='id identifier rubyid_require_user!'>require_user!</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})-[:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(au:User)
</span><span class='tstring_content'>            WITH pr, p, au
</span><span class='tstring_content'>            MATCH (ou)-[rt2:IS_PARTICIPANT]-&gt;(pr2:PollRun {id: $prid})-[:RUNS]-&gt;(p2:Poll)-[:ORGANIZED_BY]-&gt;(au2:User)
</span><span class='tstring_content'>            WHERE COALESCE(rt2.deleted, false) = false
</span><span class='tstring_content'>            RETURN pr, p, au.email, COUNT(ou) AS total_participants
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>
    <span class='id identifier rubyid_poll'>poll</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll'>poll</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:items</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_poll'>poll</span><span class='comma'>,</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>au.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>total_participants</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_poll_run_results-instance_method">
  
    #<strong>get_poll_run_results</strong>(prid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_poll_run_results'>get_poll_run_results</span><span class='lparen'>(</span><span class='id identifier rubyid_prid'>prid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_create_polls</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
        <span class='comment'># make sure we have the right user unless an admin is logged in
</span>        <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(au:User {email: $email})
</span><span class='tstring_content'>            RETURN au.email;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (pu)-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(au:User)
</span><span class='tstring_content'>        WHERE COALESCE(p.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(pr.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>        RETURN au.email, pr, p, COUNT(pu) AS participant_count;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_participants'>participants</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (pu)-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)
</span><span class='tstring_content'>        WHERE COALESCE(p.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(pr.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>        RETURN labels(pu), pu.email, pu.name
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_participants'>participants</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_participants'>participants</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pu.name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NN</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll'>poll</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:organizer</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>au.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>au.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participant_count</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>participant_count</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_participants'>participants</span>
    <span class='id identifier rubyid_responses'>responses</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_prid'>prid</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:response</span> <span class='op'>=&gt;</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>prs.response</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u)&lt;-[:RESPONSE_BY]-(prs:PollResponse)-[:RESPONSE_TO]-&gt;(pr:PollRun {id: $prid})-[:RUNS]-&gt;(p:Poll)
</span><span class='tstring_content'>        WHERE (u:User OR u:ExternalUser OR u:PredefinedExternalUser)
</span><span class='tstring_content'>        RETURN u.email, prs.response;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_participants'>participants</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_participants'>participants</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_poll'>poll</span><span class='comma'>,</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='comma'>,</span> <span class='id identifier rubyid_responses'>responses</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_projekte-instance_method">
  
    #<strong>get_projekte</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_projekte'>get_projekte</span>
    <span class='id identifier rubyid_projekte'>projekte</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN p, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_parse_projekt_node'>parse_projekt_node</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:organized_by</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:SUPERVISED_BY]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN p, u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_parse_projekt_node'>parse_projekt_node</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:supervised_by</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_projekte_list'>projekte_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_projekte'>projekte</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
        <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:organized_by</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:organized_by</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
        <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:supervised_by</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:supervised_by</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
        <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:klassen_label</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>–</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:klassen_label</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nur </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:klassen_label</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>. – </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_projekte_list'>projekte_list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_projekte_list'>projekte_list</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_projekte_list'>projekte_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_recognized_emails-instance_method">
  
    #<strong>get_recognized_emails</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2843
2844
2845
2846
2847
2848
2849
2850
2851
2852</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2843</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_recognized_emails'>get_recognized_emails</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:session_email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User {email: $session_email})-[r:RECOGNIZED]-&gt;(u2:User)
</span><span class='tstring_content'>        RETURN u2.email, r.ts;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u2.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r.ts</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_remaining_pk5_projects_for_teacher-instance_method">
  
    #<strong>get_remaining_pk5_projects_for_teacher</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 597</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_remaining_pk5_projects_for_teacher'>get_remaining_pk5_projects_for_teacher</span>
    <span class='kw'>return</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_invited'>invited</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_accepted'>accepted</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Pk5)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        WITH DISTINCT p
</span><span class='tstring_content'>        RETURN p;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_invited'>invited</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:betreuende_lehrkraft_confirmed_by</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_accepted'>accepted</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_left'>left</span> <span class='op'>=</span> <span class='int'>5</span> <span class='op'>-</span> <span class='id identifier rubyid_accepted'>accepted</span>
    <span class='lbrace'>{</span><span class='symbol'>:invited</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_invited'>invited</span><span class='comma'>,</span> <span class='symbol'>:accepted</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_accepted'>accepted</span><span class='comma'>,</span> <span class='symbol'>:left</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_left'>left</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sessions_for_user-instance_method">
  
    #<strong>get_sessions_for_user</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


639
640
641
642
643
644
645
646
647
648
649
650
651</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 639</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_sessions'>sessions</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (s:Session)-[:BELONGS_TO]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        RETURN s
</span><span class='tstring_content'>        ORDER BY s.last_access DESC;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
        <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SESSION_SCRAMBLER-constant" title="SESSION_SCRAMBLER (constant)">SESSION_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:method</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_s'>s</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sign_ups_for_public_event-instance_method">
  
    #<strong>get_sign_ups_for_public_event</strong>(event_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/public_event.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_sign_ups_for_public_event'>get_sign_ups_for_public_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_event_key'>event_key</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tracks'>tracks</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__row'>_row</span><span class='op'>|</span>
        <span class='id identifier rubyid__row'>_row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__entry'>_entry</span><span class='op'>|</span>
            <span class='id identifier rubyid_tracks'>tracks</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event_key'>event_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__entry'>_entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:tracks</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tracks'>tracks</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:person</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:track</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.track</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (n:PublicEventPerson)-[:SIGNED_UP_FOR]-&gt;(t:PublicEventTrack)
</span><span class='tstring_content'>        WHERE t.track in $tracks
</span><span class='tstring_content'>        RETURN t.track, n
</span><span class='tstring_content'>        ORDER BY n.timestamp ASC;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:track</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:track</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:person</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sitzplan_music_choice-instance_method">
  
    #<strong>get_sitzplan_music_choice</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


757
758
759
760
761
762</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 757</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_sitzplan_music_choice'>get_sitzplan_music_choice</span>
    <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.music_choice</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>01-preis</span><span class='tstring_end'>&#39;</span></span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN u.music_choice;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_technikamt_users-instance_method">
  
    #<strong>get_technikamt_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_technikamt_users'>get_technikamt_users</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_technikamt_users'><span class='object_link'><a href="#get_technikamt_users-class_method" title="Main.get_technikamt_users (method)">get_technikamt_users</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_test_regime_html-instance_method">
  
    #<strong>get_test_regime_html</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 826</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_test_regime_html'>get_test_regime_html</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_regular_test_day'>regular_test_day</span><span class='op'>|</span>
            <span class='lbracket'>[</span><span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_regular_test_required'>regular_test_required</span><span class='op'>|</span>
                <span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='comma'>,</span> <span class='symbol'>:contact_person</span><span class='comma'>,</span> <span class='symbol'>:hotspot_klasse</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_status'>status</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;span style=&#39;position: relative; top: -1px;&#39; class=&#39;salzh-badge salzh-badge-big bg-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_COLORS-constant" title="SALZH_MODE_COLORS (constant)">SALZH_MODE_COLORS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_status'>status</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_ICONS-constant" title="SALZH_MODE_ICONS (constant)">SALZH_MODE_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_status'>status</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&lt;/span&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_LABEL-constant" title="SALZH_MODE_LABEL (constant)">SALZH_MODE_LABEL</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_status'>status</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_regular_test_required'>regular_test_required</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>notwendig</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nicht notwendig</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_regular_test_day'>regular_test_day</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ja</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nein</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_label_type'>label_type</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_test_list_label_type'><span class='object_link'><a href="#get_test_list_label_type-class_method" title="Main.get_test_list_label_type (method)">get_test_list_label_type</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_regular_test_required'>regular_test_required</span><span class='comma'>,</span> <span class='id identifier rubyid_regular_test_day'>regular_test_day</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_label_type'>label_type</span> <span class='op'>==</span> <span class='symbol'>:enabled</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Vorname Nachname&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_label_type'>label_type</span> <span class='op'>==</span> <span class='symbol'>:disabled</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;color: #aaa;&#39;&gt;(Vorname Nachname)&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_label_type'>label_type</span> <span class='op'>==</span> <span class='symbol'>:strike</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;s style=&#39;color: #000;&#39;&gt;Vorname Nachname&lt;/s&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;???&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_unread_messages-instance_method">
  
    #<strong>get_unread_messages</strong>(now)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/message.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_unread_messages'>get_unread_messages</span><span class='lparen'>(</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='comment'># don&#39;t show messages which are not at least 5 minutes old
</span>    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:now</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c.id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (c)-[ruc:TO]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        WHERE ((c:TextComment AND EXISTS(c.comment)) OR
</span><span class='tstring_content'>                (c:AudioComment AND EXISTS(c.tag)) OR
</span><span class='tstring_content'>                (c:Message AND EXISTS(c.id))) AND
</span><span class='tstring_content'>                c.updated &lt; $now AND COALESCE(ruc.seen, false) = false
</span><span class='tstring_content'>        RETURN c.id
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_voluntary_testing_sus-instance_method">
  
    #<strong>get_voluntary_testing_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 339</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_voluntary_testing_sus'>get_voluntary_testing_sus</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_voluntary_testing_sus'><span class='object_link'><a href="#get_voluntary_testing_sus-class_method" title="Main.get_voluntary_testing_sus (method)">get_voluntary_testing_sus</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gev_logged_in?-instance_method">
  
    #<strong>gev_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gev_logged_in?'>gev_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:admin</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="good_bad_icon-instance_method">
  
    #<strong>good_bad_icon</strong>(flag)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_good_bad_icon'>good_bad_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_flag'>flag</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_flag'>flag</span> <span class='op'>==</span> <span class='kw'>true</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-check text-success&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_flag'>flag</span> <span class='op'>==</span> <span class='kw'>false</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-warning text-danger&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hack_content-instance_method">
  
    #<strong>hack_content</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/hack.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hack_content'>hack_content</span> 
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>REQUEST_PATH</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='id identifier rubyid_provided_password'>provided_password</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.hack_level, 0) AS hack_level, 
</span><span class='tstring_content'>        u.hack_seed AS hack_seed,
</span><span class='tstring_content'>        COALESCE(u.failed_tries, 0) AS failed_tries,
</span><span class='tstring_content'>        COALESCE(u.hack_name, &#39;&#39;) AS hack_name;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='ivar'>@hack_level</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hack_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@hack_seed</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hack_seed</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@hack_name</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hack_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
    <span class='id identifier rubyid_failed_tries'>failed_tries</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>failed_tries</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_tries_left'>tries_left</span> <span class='op'>=</span> <span class='int'>3</span> <span class='op'>-</span> <span class='id identifier rubyid_failed_tries'>failed_tries</span>
    <span class='kw'>if</span> <span class='ivar'>@hack_seed</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
        <span class='ivar'>@hack_seed</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:hack_seed</span> <span class='op'>=&gt;</span> <span class='ivar'>@hack_seed</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            SET u.hack_seed = $hack_seed;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_get_next_password'>get_next_password</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HACK // </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> // level: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_level</span><span class='embexpr_end'>}</span><span class='tstring_content'>, next password: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_next_password</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_next_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(nil)</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='ivar'>@hack_next_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='ivar'>@hack_next_password</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='ivar'>@hack_level</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:hack_level</span> <span class='op'>=&gt;</span> <span class='ivar'>@hack_level</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                SET u.hack_level = $hack_level,
</span><span class='tstring_content'>                u.failed_tries = 0;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>else</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                SET u.failed_tries = COALESCE(u.failed_tries, 0) + 1;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_tries_left'>tries_left</span> <span class='op'>&lt;=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                    MATCH (u:User {email: $email})
</span><span class='tstring_content'>                    SET u.hack_level = 0, u.failed_tries = 0, u.hack_name = &#39;&#39;;
</span><span class='heredoc_end'>                END_OF_QUERY
</span>            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_provided_password'>provided_password</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>                
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/h4ck</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>302</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_get_next_password'>get_next_password</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='comment'># io.puts &quot;&lt;p style=&#39;text-align: left; margin-top: 0;&#39;&gt;&lt;b&gt;#{@session_user[:first_name]}&lt;/b&gt; &amp;lt;#{@session_user[:email]}&amp;gt;&lt;/p&gt;&quot;
</span>        <span class='kw'>if</span> <span class='ivar'>@hack_level</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#MAX_HACK_LEVEL-constant" title="Main::MAX_HACK_LEVEL (constant)">MAX_HACK_LEVEL</a></span></span>
            <span class='comment'># io.puts &quot;&lt;p style=&#39;float: right; margin-top: 0;&#39;&gt;&lt;a href=&#39;/hackers&#39;&gt;=&amp;gt; Hall of Fame&lt;/a&gt;&lt;/p&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/hack/hall_of_fame.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User)
</span><span class='tstring_content'>                WHERE COALESCE(u.hack_level, 0) &gt; 0
</span><span class='tstring_content'>                RETURN u.email, u.hack_level, COALESCE(u.hack_name, &#39;&#39;) AS hack_name
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bisher </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hat</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>haben</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Hacker:in</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nen</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; versucht, die Aufgaben zu lösen.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_histogram'>histogram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.hack_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.hack_level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_names'>names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hack_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hack_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>
            <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_histogram'>histogram</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_level'>level</span><span class='op'>|</span>
                <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>in der &lt;b&gt;Hall of Fame&lt;/b&gt;</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_level'>level</span> <span class='op'>+</span> <span class='int'>1</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="#MAX_HACK_LEVEL-constant" title="Main::MAX_HACK_LEVEL (constant)">MAX_HACK_LEVEL</a></span></span>
                    <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>in &lt;b&gt;Level </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_level'>level</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_level'>level</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Person</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_level'>level</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>en</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_l'>l</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Davon befinde</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_histogram'>histogram</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> sich </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_join_with_sep'><span class='object_link'><a href="top-level-namespace.html#join_with_sep-instance_method" title="#join_with_sep (method)">join_with_sep</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_parts'>parts</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr style=&#39;margin-bottom: 15px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># io.puts &quot;&lt;p&gt;&quot;
</span>            <span class='comment'># io.puts &quot;Hier kannst du festlegen, ob und wie du in der Hall of Fame erscheinen möchtest:&quot;
</span>            <span class='comment'># io.puts &quot;&lt;/p&gt;&quot;
</span>            <span class='comment'># io.puts &quot;&lt;hr /&gt;&quot;
</span>            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_possible_names'>possible_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;text-align: left; margin-top: 0;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;name-pref&#39; data-name=&#39;&#39;&gt;[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>] Ich möchte &lt;b&gt;nicht&lt;/b&gt; aufgelistet werden.&lt;/span&gt;&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_possible_names'>possible_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;name-pref&#39; data-name=\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;&gt;[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_name</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>] Ich möchte als &lt;b&gt;»</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>«&lt;/b&gt; erscheinen.&lt;/span&gt;&lt;br /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;hack-reset text-danger&#39;&gt;[!] Ich möchte meinen &lt;b&gt;Fortschritt löschen&lt;/b&gt; und von vorn beginnen.&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-danger&#39; id=&#39;hack_reset_confirm&#39; style=&#39;display: none;&#39;&gt;&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bist du sicher? &lt;span id=&#39;hack_reset_confirm_yes&#39;&gt;&lt;b&gt;[Ja]&lt;/b&gt;&lt;/span&gt; &lt;span id=&#39;hack_reset_confirm_no&#39;&gt;&lt;b&gt;[Nein]&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h2&gt;&lt;b&gt;Hall of Fame&lt;/b&gt;&lt;/h2&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;name&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/hack/hall_of_fame_foot.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/hack/title.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#{next_hack_level}</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lparen'>(</span><span class='ivar'>@hack_level</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_failed_tries'>failed_tries</span> <span class='op'>==</span> <span class='int'>0</span>
                <span class='kw'>if</span> <span class='ivar'>@hack_level</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Gut gemacht!&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='kw'>if</span> <span class='ivar'>@hack_level</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_tries_left'>tries_left</span> <span class='op'>=</span> <span class='int'>3</span> <span class='op'>-</span> <span class='id identifier rubyid_failed_tries'>failed_tries</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;text-danger&#39;&gt;&lt;b&gt;Achtung!&lt;/b&gt; Deine letzte Antwort war leider falsch. Du hast noch &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tries_left'>tries_left</span><span class='embexpr_end'>}</span><span class='tstring_content'> Versuch</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tries_left'>tries_left</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>e</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;, bevor du wieder von vorn beginnen musst.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p class=&#39;text-danger&#39;&gt;&lt;b&gt;Achtung!&lt;/b&gt; Deine letzte Antwort war leider falsch.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/static/hack/level_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hack_level</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.html</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/static/hack/form.html</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hello-instance_method">
  
    #<strong>hello</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/pry.rb', line 6</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello, world!</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hex_to_rgb-instance_method">
  
    #<strong>hex_to_rgb</strong>(c)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_g'>g</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hh_mm_to_i-instance_method">
  
    #<strong>hh_mm_to_i</strong>(s)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet_set.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hh_mm_to_i'>hh_mm_to_i</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>60</span> <span class='op'>+</span> <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hsv_to_rgb-instance_method">
  
    #<strong>hsv_to_rgb</strong>(c)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hsv_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hsv_to_rgb-instance_method" title="#hsv_to_rgb (method)">hsv_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>360</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>100</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>100</span>
    <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span> <span class='op'>*</span> <span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='id identifier rubyid_h'>h</span> <span class='op'>*</span> <span class='int'>6</span> <span class='op'>-</span> <span class='id identifier rubyid_h_i'>h_i</span>
    <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>1</span> <span class='op'>-</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_q'>q</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>1</span> <span class='op'>-</span> <span class='id identifier rubyid_f'>f</span> <span class='op'>*</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>1</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='int'>1</span> <span class='op'>-</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_q'>q</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>2</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_q'>q</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>3</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_t'>t</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>4</span>
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_q'>q</span> <span class='kw'>if</span> <span class='id identifier rubyid_h_i'>h_i</span> <span class='op'>==</span> <span class='int'>5</span>
    <span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span> <span class='op'>*</span> <span class='int'>255</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_g'>g</span> <span class='op'>*</span> <span class='int'>255</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span> <span class='op'>*</span> <span class='int'>255</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="html_to_rgb-instance_method">
  
    #<strong>html_to_rgb</strong>(x)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_html_to_rgb'><span class='object_link'><a href="top-level-namespace.html#html_to_rgb-instance_method" title="#html_to_rgb (method)">html_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="htmlentities-instance_method">
  
    #<strong>htmlentities</strong>(s)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1817
1818
1819
1820</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1817</span>

<span class='kw'>def</span> <span class='id identifier rubyid_htmlentities'>htmlentities</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='ivar'>@html_entities_coder</span> <span class='op'>||=</span> <span class='const'>HTMLEntities</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@html_entities_coder</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="img_multi_attr_lazy-instance_method">
  
    #<strong>img_multi_attr_lazy</strong>(path, extension, resolutions, lazy = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_img_multi_attr_lazy'>img_multi_attr_lazy</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='comma'>,</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='comma'>,</span> <span class='id identifier rubyid_lazy'>lazy</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_img_multi_attr_lazy_hash'>img_multi_attr_lazy_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='comma'>,</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='comma'>,</span> <span class='id identifier rubyid_lazy'>lazy</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="img_multi_attr_lazy_hash-instance_method">
  
    #<strong>img_multi_attr_lazy_hash</strong>(path, extension, resolutions, lazy = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/website.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_img_multi_attr_lazy_hash'>img_multi_attr_lazy_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_extension'>extension</span><span class='comma'>,</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='comma'>,</span> <span class='id identifier rubyid_lazy'>lazy</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:lg</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:lg</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:md</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:md</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:sm</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='lbracket'>[</span><span class='symbol'>:sm</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:cols</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='int'>12</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>px</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='symbol'>:xs</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>100vw</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_srcset_entries'>srcset_entries</span> <span class='op'>=</span> <span class='cvar'>@@GEN_IMAGE_WIDTHS</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extension'>extension</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_w'>w</span><span class='embexpr_end'>}</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sizes_entries'>sizes_entries</span> <span class='op'>=</span> <span class='cvar'>@@BOOTSTRAP_BREAKPOINTS</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_min_width'>min_width</span><span class='op'>|</span>
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>
        <span class='lbracket'>[</span><span class='symbol'>:xs</span><span class='comma'>,</span> <span class='symbol'>:sm</span><span class='comma'>,</span> <span class='symbol'>:md</span><span class='comma'>,</span> <span class='symbol'>:lg</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
            <span class='id identifier rubyid_entry'>entry</span> <span class='op'>||=</span> <span class='id identifier rubyid_resolutions'>resolutions</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>100vw</span><span class='tstring_end'>&#39;</span></span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(min-width: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min_width'>min_width</span><span class='embexpr_end'>}</span><span class='tstring_content'>px) </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>srcset</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_srcset_entries'>srcset_entries</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sizes</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sizes_entries'>sizes_entries</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iterate_directory-instance_method">
  
    #<strong>iterate_directory</strong>(which, first_key = :last_name, second_key = :first_name, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541
542
543
544
545
546
547
548
549
550
551
552
553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 539</span>

<span class='kw'>def</span> <span class='id identifier rubyid_iterate_directory'>iterate_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='comma'>,</span> <span class='id identifier rubyid_first_key'>first_key</span> <span class='op'>=</span> <span class='symbol'>:last_name</span><span class='comma'>,</span> <span class='id identifier rubyid_second_key'>second_key</span> <span class='op'>=</span> <span class='symbol'>:first_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_email_list'>email_list</span> <span class='op'>=</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_which'>which</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_email_list'>email_list</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='comment'># try lesson key
</span>        <span class='id identifier rubyid_email_list'>email_list</span> <span class='op'>=</span> <span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_which'>which</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_email_list'>email_list</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_email_list'>email_list</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_first_key'>first_key</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_first_key'>first_key</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_second_key'>second_key</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_second_key'>second_key</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_first_key'>first_key</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_first_key'>first_key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iterate_school_days-instance_method">
  
    #<strong>iterate_school_days</strong>(options = {}, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


475
476
477</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 475</span>

<span class='kw'>def</span> <span class='id identifier rubyid_iterate_school_days'>iterate_school_days</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_iterate_school_days'>iterate_school_days</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="klasse_for_sus-instance_method">
  
    #<strong>klasse_for_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


417
418
419
420
421
422
423
424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 417</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klasse_for_sus'>klasse_for_sus</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_tablets</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:teacher</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'><span class='object_link'><a href="#tr_klasse-class_method" title="Main.tr_klasse (method)">tr_klasse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="klassen_for_session_user-instance_method">
  
    #<strong>klassen_for_session_user</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376
377
378
379
380
381
382
383
384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klassen_for_session_user'>klassen_for_session_user</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_can_see_all_timetables_logged_in?'>can_see_all_timetables_logged_in?</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_klasse'>klasse</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_klassen'>klassen</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="klassenleiter_for_klasse_logged_in?-instance_method">
  
    #<strong>klassenleiter_for_klasse_logged_in?</strong>(klasse)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klassenleiter_for_klasse_logged_in?'>klassenleiter_for_klasse_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="klassenleiter_for_klasse_or_admin_logged_in?-instance_method">
  
    #<strong>klassenleiter_for_klasse_or_admin_logged_in?</strong>(klasse)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klassenleiter_for_klasse_or_admin_logged_in?'>klassenleiter_for_klasse_or_admin_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="klassenraum_logged_in?-instance_method">
  
    #<strong>klassenraum_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klassenraum_logged_in?'>klassenraum_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:klassenraum</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kurs_tablet_logged_in?-instance_method">
  
    #<strong>kurs_tablet_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:kurs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lessons_for_session_user_and_klasse-instance_method">
  
    #<strong>lessons_for_session_user_and_klasse</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390
391
392
393
394
395
396
397
398
399
400
401
402</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 388</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lessons_for_session_user_and_klasse'>lessons_for_session_user_and_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='lparen'>(</span><span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_faecher'>faecher</span> <span class='op'>=</span> <span class='id identifier rubyid_faecher'>faecher</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span>
    <span class='kw'>end</span>
    <span class='lbrace'>{</span><span class='symbol'>:fach_order</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_faecher'>faecher</span><span class='comma'>,</span> <span class='symbol'>:fach_tr</span> <span class='op'>=&gt;</span> <span class='cvar'>@@faecher</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="line_for_lang-instance_method">
  
    #<strong>line_for_lang</strong>(lang)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_line_for_lang'>line_for_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Das naechste Loesungswort lautet </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Das Passwort lautet </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Versuch es mal mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wenn du </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_content'> eingibst dann sollte es klappen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_content'> ist das naechste Passwort</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="line_for_lang_dont_end_on_lang-instance_method">
  
    #<strong>line_for_lang_dont_end_on_lang</strong>(lang)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_line_for_lang_dont_end_on_lang'>line_for_lang_dont_end_on_lang</span><span class='lparen'>(</span><span class='id identifier rubyid_lang'>lang</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wenn du </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_content'> eingibst dann sollte es klappen</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_content'> ist das naechste Passwort</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du solltest es mal mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lang'>lang</span><span class='embexpr_end'>}</span><span class='tstring_content'> versuchen</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logout-instance_method">
  
    #<strong>logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


500
501
502
503
504
505
506
507
508
509
510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 500</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logout'>logout</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z,]+$</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_current_sid'>current_sid</span> <span class='op'>=</span> <span class='id identifier rubyid_sid'>sid</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_current_sid'>current_sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z]+$</span><span class='regexp_end'>/</span></span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_current_sid'>current_sid</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (s:Session {sid: $sid})
</span><span class='tstring_content'>                DETACH DELETE s;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_purge_missing_sessions'>purge_missing_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="luminance-instance_method">
  
    #<strong>luminance</strong>(color)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_luminance'><span class='object_link'><a href="top-level-namespace.html#luminance-instance_method" title="#luminance (method)">luminance</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_color'>color</span><span class='rparen'>)</span> 
    <span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_color'>color</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>*</span> <span class='float'>0.299</span> <span class='op'>+</span> <span class='id identifier rubyid_g'>g</span> <span class='op'>*</span> <span class='float'>0.587</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>*</span> <span class='float'>0.114</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mail_addresses_table-instance_method">
  
    #<strong>mail_addresses_table</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mail_addresses_table'>mail_addresses_table</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klassenleiter_logged_in'>klassenleiter_logged_in</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
    <span class='id identifier rubyid_all_homeschooling_users'>all_homeschooling_users</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_all_homeschooling_users'><span class='object_link'><a href="#get_all_homeschooling_users-class_method" title="Main.get_all_homeschooling_users (method)">get_all_homeschooling_users</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_salzh_status'>salzh_status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_salzh_status_for_emails'><span class='object_link'><a href="#get_salzh_status_for_emails-class_method" title="Main.get_salzh_status_for_emails (method)">get_salzh_status_for_emails</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@@schueler_for_klasse</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;div class=&#39;alert alert-warning&#39;&gt;&quot;
</span>        <span class='comment'># io.puts &quot;Bitte überprüfen Sie die &lt;strong&gt;Gruppenzuordnung (A/B)&lt;/strong&gt; und markieren Sie alle Kinder, die aus gesundheitlichen Gründen / Quarantäne nicht in die Schule kommen können, als &lt;strong&gt;»zu Hause«&lt;/strong&gt;.&quot;
</span><span class='comment'>#             io.puts &quot;Auf die Jitsi-Streams können momentan nur SuS zugreifen, die laut ihrer Gruppenzuordnung in der aktuellen Woche zu Hause sind oder explizit als »zu Hause« markiert sind.&quot;
</span>        <span class='comment'># io.puts &quot;&lt;/div&gt;&quot;
</span>        <span class='comment'># if teacher_logged_in?
</span>        <span class='comment'>#     io.puts &quot;&lt;div class=&#39;pull-right&#39; style=&#39;position: relative; top: 10px;&#39;&gt;&quot;
</span>        <span class='comment'>#     [:salzh, :contact_person, :hotspot_klasse].each do |status|
</span>        <span class='comment'>#         salzh_label = &quot;&lt;span style=&#39;margin-left: 2em;&#39;&gt;&lt;span class=&#39;salzh-badge salzh-badge-big bg-#{SALZH_MODE_COLORS[status]}&#39;&gt;&lt;i class=&#39;fa #{SALZH_MODE_ICONS[status]}&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;#{SALZH_MODE_LABEL[status]}&lt;/span&gt;&quot;
</span>        <span class='comment'>#         io.puts salzh_label
</span>        <span class='comment'>#     end
</span>        <span class='comment'>#     io.puts &quot;&lt;/div&gt;&quot;
</span>        <span class='comment'># end
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># &lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;
</span>        <span class='comment'># &lt;table class=&#39;table&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;
</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;klassen_table table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Nr.&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Vorname&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Geburtsdatum&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
        <span class='comment'># io.puts &quot;&lt;th&gt;Status&lt;/th&gt;&quot;
</span>        <span class='comment'># if can_manage_salzh_logged_in?
</span>        <span class='comment'>#     io.puts &quot;&lt;th&gt;Reguläre Testung&lt;/th&gt;&quot;
</span>        <span class='comment'>#     io.puts &quot;&lt;th&gt;Freiwilliges saLzH bis&lt;/th&gt;&quot;
</span>        <span class='comment'># end
</span>        <span class='comment'># if klassenleiter_logged_in
</span>        <span class='comment'>#     io.puts &quot;&lt;th&gt;Freiwillige Testung&lt;/th&gt;&quot;
</span>        <span class='comment'># end
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;th style=&#39;width: 140px;&#39;&gt;Homeschooling&lt;/th&gt;&quot;
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Antikenfahrt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Forschertage&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;A/B&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Letzter Zugriff&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Eltern-E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email_addresses</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>            MATCH (u:User)
</span><span class='tstring_content'>            WHERE u.email IN $email_addresses
</span><span class='tstring_content'>            RETURN u.email, u.last_access, COALESCE(u.group2, &#39;A&#39;) AS group2, COALESCE(u.group_af, &#39;&#39;) AS group_af, COALESCE(u.group_ft, &#39;&#39;) AS group_ft;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='id identifier rubyid_last_access'>last_access</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_group2_for_email'>group2_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_group_af_for_email'>group_af_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_group_ft_for_email'>group_ft_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='id identifier rubyid_last_access'>last_access</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.last_access</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group2</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_group_af_for_email'>group_af_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group_af</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_group_ft_for_email'>group_ft_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group_ft</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='lparen'>(</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
            <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
            <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
            <span class='id identifier rubyid_record'>record</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__'>_</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-md</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_salzh_style'>salzh_style</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_salzh_class'>salzh_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='lbracket'>[</span><span class='symbol'>:contact_person</span><span class='comma'>,</span> <span class='symbol'>:salzh</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_salzh_style'>salzh_style</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>padding: 2px 4px; margin: -2px -4px; display: inline-block; border-radius: 4px;</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_salzh_class'>salzh_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bg-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_COLORS-constant" title="SALZH_MODE_COLORS (constant)">SALZH_MODE_COLORS</a></span></span><span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_salzh_class'>salzh_class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_salzh_style'>salzh_style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_salzh_class'>salzh_class</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_salzh_style'>salzh_style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='comment'># salzh_label = &#39;&#39;
</span>            <span class='comment'># if salzh_status[email][:status]
</span>            <span class='comment'>#     salzh_label = &quot;&lt;span class=&#39;salzh-badge salzh-badge-big bg-#{SALZH_MODE_COLORS[(salzh_status[email] || {})[:status]]}&#39;&gt;&lt;i class=&#39;fa #{SALZH_MODE_ICONS[(salzh_status[email] || {})[:status]]}&#39;&gt;&lt;/i&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;bis #{Date.parse(salzh_status[email][:status_end_date]).strftime(&#39;%d.%m.&#39;)}&quot;
</span>
            <span class='comment'>#     # salzh_label = &quot;&lt;div class=&#39;bg-#{SALZH_MODE_COLORS[(salzh_status[email] || {})[:status]]}&#39; style=&#39;text-align: center; padding: 4px; margin: -4px; border-radius: 4px;&#39;&gt;&lt;i class=&#39;fa #{SALZH_MODE_ICONS[(salzh_status[email] || {})[:status]]}&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;bis #{Date.parse(salzh_status[email][:status_end_date]).strftime(&#39;%d.%m.&#39;)}&lt;/div&gt;&quot;
</span>            <span class='comment'># end
</span>            <span class='comment'># io.puts &quot;&lt;td&gt;#{salzh_label}&lt;/td&gt;&quot;
</span>            <span class='comment'># if can_manage_salzh_logged_in?
</span>            <span class='comment'>#     io.puts &quot;&lt;td&gt;&quot;
</span>            <span class='comment'>#     testing_required = salzh_status[email][:testing_required]
</span>            <span class='comment'>#     if testing_required
</span>            <span class='comment'>#         io.puts &quot;&lt;button class=&#39;btn btn-sm btn-success bu_toggle_testing_required&#39;&gt;&lt;i class=&#39;fa fa-check&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;notwendig&lt;/button&gt;&quot;
</span>            <span class='comment'>#     else
</span>            <span class='comment'>#         io.puts &quot;&lt;button class=&#39;btn btn-sm btn-outline-secondary bu_toggle_testing_required&#39;&gt;&lt;i class=&#39;fa fa-times&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;nicht notwendig&lt;/button&gt;&quot;
</span>            <span class='comment'>#     end
</span>            <span class='comment'>#     io.puts &quot;&lt;/td&gt;&quot;
</span>
            <span class='comment'>#     io.puts &quot;&lt;td&gt;&quot;
</span>            <span class='comment'>#     freiwillig_salzh = salzh_status[email][:freiwillig_salzh]
</span>            <span class='comment'>#     io.puts &quot;&lt;div class=&#39;input-group&#39;&gt;&lt;input type=&#39;date&#39; class=&#39;form-control ti_freiwillig_salzh&#39; value=&#39;#{freiwillig_salzh}&#39; /&gt;&lt;div class=&#39;input-group-append&#39;&gt;&lt;button #{freiwillig_salzh.nil? ? &#39;disabled&#39; : &#39;&#39;} class=&#39;btn #{freiwillig_salzh.nil? ? &#39;btn-outline-secondary&#39; : &#39;btn-danger&#39;} bu_delete_freiwillig_salzh&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&quot;
</span>            <span class='comment'>#     io.puts &quot;&lt;/td&gt;&quot;
</span>            <span class='comment'># end
</span>            <span class='comment'># if klassenleiter_logged_in
</span>            <span class='comment'>#     io.puts &quot;&lt;td&gt;&quot;
</span>            <span class='comment'>#     voluntary_testing = salzh_status[email][:voluntary_testing]
</span>            <span class='comment'>#     if voluntary_testing
</span>            <span class='comment'>#         io.puts &quot;&lt;button class=&#39;btn btn-sm btn-success bu_toggle_voluntary_testing&#39;&gt;&lt;i class=&#39;fa fa-check&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;nimmt teil&lt;/button&gt;&quot;
</span>            <span class='comment'>#     else
</span>            <span class='comment'>#         io.puts &quot;&lt;button class=&#39;btn btn-sm btn-outline-secondary bu_toggle_voluntary_testing&#39;&gt;&lt;i class=&#39;fa fa-times&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;nimmt nicht teil&lt;/button&gt;&quot;
</span>            <span class='comment'>#     end
</span>            <span class='comment'>#     io.puts &quot;&lt;/td&gt;&quot;
</span>            <span class='comment'># end
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># homeschooling_button_disabled = klassenleiter_logged_in ? &#39;&#39; : &#39;disabled&#39;
</span>            <span class='comment'># if all_homeschooling_users.include?(email)
</span>            <span class='comment'>#     io.puts &quot;&lt;td&gt;&lt;button #{homeschooling_button_disabled} class=&#39;btn btn-info btn-xs btn-toggle-homeschooling&#39; data-email=&#39;#{email}&#39;&gt;&lt;i class=&#39;fa fa-home&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;zu Hause&lt;/button&gt;&lt;/td&gt;&quot;
</span>            <span class='comment'># else
</span>            <span class='comment'>#     io.puts &quot;&lt;td&gt;&lt;button #{homeschooling_button_disabled} class=&#39;btn btn-secondary btn-xs btn-toggle-homeschooling&#39; data-email=&#39;#{email}&#39;&gt;&lt;i class=&#39;fa fa-building&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Präsenz&lt;/button&gt;&lt;/td&gt;&quot;
</span>            <span class='comment'># end
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;group-af-button </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_who_can_manage_antikenfahrt_logged_in?'>user_who_can_manage_antikenfahrt_logged_in?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_AF_ICONS-constant" title="GROUP_AF_ICONS (constant)">GROUP_AF_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_af_for_email'>group_af_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;group-ft-button </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#GROUP_FT_ICONS-constant" title="GROUP_FT_ICONS (constant)">GROUP_FT_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_group_ft_for_email'>group_ft_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>❓</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;group2-button group2-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group2_for_email'>group2_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noch nie angemeldet</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_last_access'>last_access</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_days'>days</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span> <span class='op'>-</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_last_access'>last_access</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>0</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heute</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>1</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gestern</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>2</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vorgestern</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>3</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 3 Tagen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>4</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 4 Tagen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>5</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 5 Tagen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>==</span> <span class='int'>6</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 6 Tagen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>&lt;</span> <span class='int'>14</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 1 Woche</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>&lt;</span> <span class='int'>21</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 2 Wochen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>&lt;</span> <span class='int'>28</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 3 Wochen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_days'>days</span> <span class='op'>&lt;</span> <span class='int'>35</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor 4 Wochen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_la_label'>la_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vor mehreren Wochen</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_la_label'>la_label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_record'>record</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;&lt;b&gt;E-Mail an die Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;3&#39;&gt;&lt;b&gt;E-Mail an alle Eltern der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klasse.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;3&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-primary&#39; href=&#39;/show_login_codes/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Live-Anmeldungen der Klasse zeigen&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='comment'># io.puts print_stream_restriction_table(klasse)
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr style=&#39;margin: 3em 0;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Schülerlisten Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#             io.puts &quot;&lt;div style=&#39;text-align: center;&#39;&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/directory_xlsx/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-excel-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Excel-Tabelle herunterladen&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/directory_timetex_pdf/by_last_name/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Timetex-PDF herunterladen&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/directory_timetex_pdf/by_first_name/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Timetex-PDF herunterladen (nach Vornamen sortiert)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/directory_json/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-code-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;JSON herunterladen&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr style=&#39;margin: 3em 0;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Stundenpläne der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> zum Ausdrucken&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Stundenpläne zum Ausdrucken&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Den Hintergrund der Stundenpläne kannst über dein Profil verändern, da immer der Hintergrund aus deinem Dashboard genommen wird.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/get_timetable_pdf_for_klasse/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; target=&#39;_blank&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;PDF herunterladen (</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Seiten)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/get_single_timetable_pdf&#39; target=&#39;_blank&#39; class=&#39;btn btn-primary&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;PDF herunterladen&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/api/get_single_timetable_with_png_addition_pdf&#39; target=&#39;_blank&#39; class=&#39;btn btn-success&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;PDF herunterladen (mit Symbolen)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr style=&#39;margin: 3em 0;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Lehrkräfte der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Kürzel&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Fächer (Wochenstunden)&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_old_is_klassenleiter'>old_is_klassenleiter</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='lparen'>(</span><span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='id identifier rubyid_name_comp'>name_comp</span> <span class='op'>=</span> <span class='kw'>begin</span>
                <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
            <span class='kw'>rescue</span>
                <span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_a_kli'>a_kli</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_b_kli'>b_kli</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_a_kli'>a_kli</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_b_kli'>b_kli</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                    <span class='id identifier rubyid_name_comp'>name_comp</span>
                <span class='kw'>else</span>
                    <span class='int'>1</span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_b_kli'>b_kli</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                    <span class='op'>-</span><span class='int'>1</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_a_kli'>a_kli</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b_kli'>b_kli</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='id identifier rubyid_lehrer'>lehrer</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_lehrer'>lehrer</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='id identifier rubyid_is_klassenleiter'>is_klassenleiter</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rparen'>)</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_old_is_klassenleiter'>old_is_klassenleiter</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_is_klassenleiter'>is_klassenleiter</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;sep user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_old_is_klassenleiter'>old_is_klassenleiter</span> <span class='op'>=</span> <span class='id identifier rubyid_is_klassenleiter'>is_klassenleiter</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_is_klassenleiter'>is_klassenleiter</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (KL)</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#                 io.puts &quot;&lt;td&gt;#{((lehrer[:titel] || &#39;&#39;) + &#39; &#39; + (lehrer[:last_name] || shorthand)).strip}&lt;/td&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lehrer'>lehrer</span><span class='lbracket'>[</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>?</span> <span class='symbol'>:display_name</span> <span class='op'>:</span> <span class='symbol'>:display_name_official</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_hours'>hours</span> <span class='op'>=</span> <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
                <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
                <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hours'>hours</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_lehrer'>lehrer</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_lehrer'>lehrer</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;3&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;b&gt;E-Mail an alle Lehrer/innen der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;3&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matrix_get-instance_method">
  
    #<strong>matrix_get</strong>(path, access_token = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/matrix.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matrix_get'>matrix_get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_matrix_request'>matrix_request</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matrix_login-instance_method">
  
    #<strong>matrix_login</strong>(user, password) {|access_token| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>access_token</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/matrix.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matrix_login'>matrix_login</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='comment'># login
</span>    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_matrix_post'>matrix_post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_matrix/client/r0/login</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span>
        <span class='symbol'>:type</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m.login.password</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span>
        <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_password'>password</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_access_token'>access_token</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>access_token</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_access_token'>access_token</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span>

    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_access_token'>access_token</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_matrix_post'>matrix_post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_matrix/client/r0/logout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matrix_post-instance_method">
  
    #<strong>matrix_post</strong>(path, data = {}, access_token = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/matrix.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matrix_post'>matrix_post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_matrix_request'>matrix_request</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matrix_request-instance_method">
  
    #<strong>matrix_request</strong>(method, path, data = {}, access_token = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/matrix.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matrix_request'>matrix_request</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_access_token'>access_token</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='symbol'>:post</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_methods'>methods</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:get</span> <span class='op'>=&gt;</span> <span class='const'>Curl</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='rparen'>)</span><span class='comma'>,</span>
               <span class='symbol'>:post</span> <span class='op'>=&gt;</span> <span class='const'>Curl</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_methods'>methods</span><span class='lbracket'>[</span><span class='id identifier rubyid_method'>method</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MATRIX_DOMAIN-constant" title="MATRIX_DOMAIN (constant)">MATRIX_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_http'>http</span><span class='op'>|</span>
            <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Authorization</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bearer </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_access_token'>access_token</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_access_token'>access_token</span>
        <span class='kw'>end</span>
        <span class='kw'>begin</span>
            <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_body_str'>body_str</span><span class='rparen'>)</span>
        <span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_body_str'>body_str</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>retry_after_ms</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_sleep'>sleep</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>retry_after_ms</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='float'>1000.0</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>break</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_success'>success</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unable to complete matrix_request: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> / </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_response'>response</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="may_edit_lessons?-instance_method">
  
    #<strong>may_edit_lessons?</strong>(lesson_key)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2492
2493
2494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2492</span>

<span class='kw'>def</span> <span class='id identifier rubyid_may_edit_lessons?'>may_edit_lessons?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:historic_lessons_for_shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mix-instance_method">
  
    #<strong>mix</strong>(a, b, t)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mix'><span class='object_link'><a href="top-level-namespace.html#mix-instance_method" title="#mix (method)">mix</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t1'>t1</span> <span class='op'>=</span> <span class='float'>1.0</span> <span class='op'>-</span> <span class='id identifier rubyid_t'>t</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t1'>t1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t'>t</span><span class='comma'>,</span>
            <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t1'>t1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t'>t</span><span class='comma'>,</span>
            <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t1'>t1</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="monitor_logged_in?-instance_method">
  
    #<strong>monitor_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_monitor_logged_in?'>monitor_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_monitor</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="my_pk5_history-instance_method">
  
    #<strong>my_pk5_history</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_my_pk5_history'>my_pk5_history</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='tstring_content'>            MATCH (eu:User)&lt;-[:BY]-(pc:Pk5Change)-[:TO]-&gt;(p:Pk5)-[:BELONGS_TO]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>            RETURN pc, eu.email
</span><span class='tstring_content'>            ORDER BY pc.ts;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;em&gt;(keine Einträge)&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_current_date'>current_date</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                <span class='id identifier rubyid_pc'>pc</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pc</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_ts'>ts</span> <span class='op'>=</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:ts</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_ts_d'>ts_d</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_ts'>ts</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_entry_date'>entry_date</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS_LONG-constant" title="WEEKDAYS_LONG (constant)">WEEKDAYS_LONG</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_ts_d'>ts_d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>, den </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ts_d'>ts_d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_entry_date'>entry_date</span> <span class='op'>!=</span> <span class='id identifier rubyid_current_date'>current_date</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_date&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry_date'>entry_date</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_current_date'>current_date</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;Vorgang erstellt durch </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_current_date'>current_date</span> <span class='op'>=</span> <span class='id identifier rubyid_entry_date'>entry_date</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update_value</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
                    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='symbol'>:betreuende_lehrkraft</span>
                        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_value'>value</span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PK5_KEY_LABELS-constant" title="PK5_KEY_LABELS (constant)">PK5_KEY_LABELS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> gelöscht durch </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PK5_KEY_LABELS-constant" title="PK5_KEY_LABELS (constant)">PK5_KEY_LABELS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> geändert auf &lt;strong&gt;»</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>«&lt;/strong&gt; durch </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invite_sus</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:other_email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; zur Gruppenprüfung eingeladen durch </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>uninvite_sus</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:other_email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; von der Gruppenprüfung ausgeladen durch </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>accept_invitation</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; hat die Einladung zur Gruppenprüfung angenommen&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>reject_invitation</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; hat die Einladung zur Gruppenprüfung abgelehnt&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>accept_betreuung</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; hat die Betreuung der Prüfung angenommen&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_pc'>pc</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>reject_betreuung</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;history_entry&#39;&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; hat die Betreuung der Prüfung abgelehnt&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_pc'>pc</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nav_items-instance_method">
  
    #<strong>nav_items</strong>(primary_color, now, new_messages_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1890
1891
1892
1893
1894
1895
1896
1897
1898
1899
1900
1901
1902
1903
1904
1905
1906
1907
1908
1909
1910
1911
1912
1913
1914
1915
1916
1917
1918
1919
1920
1921
1922
1923
1924
1925
1926
1927
1928
1929
1930
1931
1932
1933
1934
1935
1936
1937
1938
1939
1940
1941
1942
1943
1944
1945
1946
1947
1948
1949
1950
1951
1952
1953
1954
1955
1956
1957
1958
1959
1960
1961
1962
1963
1964
1965
1966
1967
1968
1969
1970
1971
1972
1973
1974
1975
1976
1977
1978
1979
1980
1981
1982
1983
1984
1985
1986
1987
1988
1989
1990
1991
1992
1993
1994
1995
1996
1997
1998
1999
2000
2001
2002
2003
2004
2005
2006
2007
2008
2009
2010
2011
2012
2013
2014
2015
2016
2017
2018
2019
2020
2021
2022
2023
2024
2025
2026
2027
2028
2029
2030
2031
2032
2033
2034
2035
2036
2037
2038
2039
2040
2041
2042
2043
2044
2045
2046
2047
2048
2049
2050
2051
2052
2053
2054
2055
2056
2057
2058
2059
2060
2061
2062
2063
2064
2065
2066
2067
2068
2069
2070
2071
2072
2073
2074
2075
2076
2077
2078
2079
2080
2081
2082
2083
2084
2085
2086
2087
2088
2089
2090
2091
2092
2093
2094
2095
2096
2097
2098
2099
2100
2101
2102
2103
2104
2105
2106
2107
2108
2109
2110
2111
2112
2113
2114
2115
2116
2117
2118
2119
2120
2121
2122
2123
2124
2125
2126
2127
2128
2129
2130
2131
2132
2133
2134
2135
2136
2137
2138
2139
2140
2141
2142
2143
2144
2145
2146
2147
2148
2149
2150
2151
2152
2153
2154
2155
2156
2157
2158
2159
2160
2161
2162
2163
2164
2165
2166
2167
2168
2169
2170
2171
2172
2173
2174
2175
2176
2177
2178
2179
2180
2181
2182
2183
2184
2185
2186
2187
2188
2189
2190
2191
2192
2193
2194
2195
2196
2197
2198
2199
2200
2201
2202
2203
2204
2205
2206
2207
2208
2209
2210
2211
2212
2213
2214
2215
2216
2217
2218
2219
2220
2221
2222
2223
2224
2225
2226
2227
2228
2229
2230
2231
2232
2233
2234
2235
2236
2237
2238
2239
2240
2241
2242
2243
2244
2245
2246
2247
2248
2249
2250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1890</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nav_items'>nav_items</span><span class='lparen'>(</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='comma'>,</span> <span class='id identifier rubyid_now'>now</span><span class='comma'>,</span> <span class='id identifier rubyid_new_messages_count'>new_messages_count</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_tablet_logged_in?'>tablet_logged_in?</span>
        <span class='id identifier rubyid_tablet_id'>tablet_id</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_id</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_tablet'>tablet</span> <span class='op'>=</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_tablet_id_span'>tablet_id_span</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;tablet-id-indicator&#39; style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:bg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>; color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:fg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_id'>tablet_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
            <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-right: 15px;&#39;&gt;&lt;b&gt;Lehrer-Tablet-Modus&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_id_span'>tablet_id_span</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span>
            <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-right: 15px;&#39;&gt;&lt;b&gt;Kurs-Tablet-Modus&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_id_span'>tablet_id_span</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_klassenraum_logged_in?'>klassenraum_logged_in?</span>
            <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-right: 15px;&#39;&gt;&lt;b&gt;Klassenraum-Modus&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_id_span'>tablet_id_span</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_tablet_logged_in?'>tablet_logged_in?</span>
            <span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:klassen_stream</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_description'>description</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (Klassenstreaming </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:klassen_stream</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:bib_mobile</span>
                <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-right: 15px;&#39;&gt;&lt;b&gt;Tablet-Modus&lt;/b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_description'>description</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_id_span'>tablet_id_span</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_monitor_logged_in?'>monitor_logged_in?</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_new_messages_count_s'>new_messages_count_s</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_external_user_logged_in?'>external_user_logged_in?</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stundenplan</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fa fa-calendar</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:kurse</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:directory</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_receive_messages</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:messages</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_user_is_eligible_for_tresor?'>user_is_eligible_for_tresor?</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:tresor</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_who_can_upload_files_logged_in?'>user_who_can_upload_files_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_who_can_manage_tablets_logged_in?'>user_who_can_manage_tablets_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:admin</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>PK5_CURRENT_KLASSE</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:pk5</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_use_aula_logged_in?'>user_who_can_use_aula_logged_in?</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:aula</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_report_tech_problems_logged_in?'>user_who_can_report_tech_problems_logged_in?</span>
                <span class='kw'>unless</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                    <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:techteam</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_running_phishing_training?'>running_phishing_training?</span>
                <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:phishing</span>
            <span class='kw'>end</span>
            <span class='comment'># nav_items &lt;&lt; :advent_calendar #if advents_calendar_date_today &gt; 0
</span>            <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:profile</span>
            <span class='id identifier rubyid_new_messages_count_s'>new_messages_count_s</span> <span class='op'>=</span> <span class='id identifier rubyid_new_messages_count'>new_messages_count</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
            <span class='id identifier rubyid_new_messages_count_s'>new_messages_count_s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>99+</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_new_messages_count'>new_messages_count</span> <span class='op'>&gt;</span> <span class='int'>99</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_new_messages_count'>new_messages_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/messages&#39; class=&#39;new-messages-indicator-mini&#39;&gt;&lt;i class=&#39;fa fa-comment&#39; style=&#39;color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;&lt;/i&gt;&lt;span&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_messages_count_s'>new_messages_count_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/hilfe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hilfe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fa fa-question-circle</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_nav_items'>nav_items</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Anmelden</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fa fa-sign-in</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_nav_items'>nav_items</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;navbar-toggler&#39; type=&#39;button&#39; data-toggle=&#39;collapse&#39; data-target=&#39;#navbarTogglerDemo02&#39; aria-controls=&#39;navbarTogglerDemo02&#39; aria-expanded=&#39;false&#39; aria-label=&#39;Toggle navigation&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;navbar-toggler-icon&#39;&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;collapse navbar-collapse my-0 flex-grow-0&#39; id=&#39;navbarTogglerDemo02&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;ul class=&#39;navbar-nav mr-auto&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_nav_items'>nav_items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:admin</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item dropdown&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon dropdown-toggle&#39; href=&#39;#&#39; id=&#39;navbarDropdownAdmin&#39; role=&#39;button&#39; data-toggle=&#39;dropdown&#39; aria-haspopup=&#39;true&#39; aria-expanded=&#39;false&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-wrench&#39;&gt;&lt;/i&gt;&lt;/div&gt;Administration</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-menu dropdown-menu-right&#39; aria-labelledby=&#39;navbarDropdownAdmin&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/manage_news&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-newspaper-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;News verwalten&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/manage_calendar&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-calendar&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Termine verwalten&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_upload_files_logged_in?'>user_who_can_upload_files_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_printed_something'>printed_something</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/upload_images&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-photo&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Bilder hochladen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/upload_files&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-file-pdf-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Dateien hochladen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_printed_something'>printed_something</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/manage_monitor&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-tv&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Monitore verwalten&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_printed_something'>printed_something</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/admin&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-wrench&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Administration&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_manage_tablets_logged_in?'>user_who_can_manage_tablets_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/tablets&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-tablet&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Tablets&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/bookings&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-bookmark&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Buchungen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/techpostadmin&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-laptop&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Technikamt (Admin)&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/development&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-code&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Development&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/show_all_login_codes&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-key-modern&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Live-Anmeldungen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/email_accounts&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-envelope&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;E-Mail-Postfächer&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/stats&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-bar-chart&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Statistiken&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_sekretariat_logged_in?'>sekretariat_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/anmeldungen&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-calendar-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Anmeldungen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_printed_something'>printed_something</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:pk5</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/pk5&#39; class=&#39;nav-link nav-icon&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-file-text-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;5. PK&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:advent_calendar</span>
                <span class='kw'>unless</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;bu-launch-adventskalender nav-link nav-icon&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-snowflake-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;Adventskalender&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:profile</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item dropdown&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon dropdown-toggle&#39; href=&#39;#&#39; id=&#39;navbarDropdownProfile&#39; role=&#39;button&#39; data-toggle=&#39;dropdown&#39; aria-haspopup=&#39;true&#39; aria-expanded=&#39;false&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>=</span> <span class='id identifier rubyid_htmlentities'>htmlentities</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbracket'>]</span>
                    <span class='comment'># if @session_user[:group2]
</span>                    <span class='comment'>#     temp &lt;&lt; @session_user[:group2]
</span>                    <span class='comment'># end
</span>                    <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;icon nav_avatar&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-md</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;span class=&#39;menu-user-name&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_name'>display_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-menu dropdown-menu-right&#39; aria-labelledby=&#39;navbarDropdownProfile&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/profil&#39;&gt;&lt;div class=&#39;icon&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-sm</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Profil&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_sessions'>sessions</span> <span class='op'>=</span> <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_sessions'>sessions</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
                        <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>=</span> <span class='id identifier rubyid_htmlentities'>htmlentities</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon switch-session&#39; data-sidindex=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__'>_</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; href=&#39;#&#39;&gt;&lt;div class=&#39;icon&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-sm</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_name'>display_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/login&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Zusätzliche Anmeldung…&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_use_nextcloud</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/login_nc&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-nextcloud&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;In Nextcloud anmelden…&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:dark</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;dropdown-item nav-icon nav-light&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-sun-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Hell&lt;/span&gt;&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;dropdown-item nav-icon nav-dark&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-moon&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Dunkel&lt;/span&gt;&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>

                <span class='id identifier rubyid_printed_divider'>printed_divider</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_gev_logged_in?'>gev_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_printed_divider'>printed_divider</span>
                    <span class='id identifier rubyid_printed_divider'>printed_divider</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/gev&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-users&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Gesamtelternvertretung&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_can_manage_agr_app_logged_in?'>can_manage_agr_app_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_printed_divider'>printed_divider</span>
                    <span class='id identifier rubyid_printed_divider'>printed_divider</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/agr_app&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-mobile&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Altgriechisch-App&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_printed_divider'>printed_divider</span>
                    <span class='id identifier rubyid_printed_divider'>printed_divider</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/lehrbuchverein&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Lehrmittelverein&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_printed_divider'>printed_divider</span>
                    <span class='id identifier rubyid_printed_divider'>printed_divider</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/bibliothek&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Bibliothek&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/projekttage_sus&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-rocket&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Projekttage&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
                        <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='int'>1</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/projekttage_orga&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-rocket&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Projekttage&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                        <span class='kw'>elsif</span> <span class='id identifier rubyid_user_eligible_for_projekt_katalog?'>user_eligible_for_projekt_katalog?</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='int'>2</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/projekttage_sus&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-rocket&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Projekttage&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/pk5_overview&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-file-text-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;5. PK&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
                    <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&lt;</span> <span class='int'>11</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/directory/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-users&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Meine Klasse&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_create_events</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_create_polls</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_use_mailing_lists</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                        <span class='comment'># if can_manage_salzh_logged_in?
</span>                        <span class='comment'>#     io.puts &quot;&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/salzh&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-home&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Testungen&lt;/span&gt;&lt;/a&gt;&quot;
</span>                        <span class='comment'># end
</span>                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/klassenmemory_assign&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-user&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Klassenmemory&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/tests&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-file-text-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Klassenarbeiten&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_create_events</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/events&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-calendar-check-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Termine&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_create_polls</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/polls&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-bar-chart&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Umfragen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='comment'># io.puts &quot;&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/prepare_vote&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-hand-paper-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Abstimmungen&lt;/span&gt;&lt;/a&gt;&quot;
</span>                    <span class='kw'>if</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_use_mailing_lists</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/mailing_lists&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-envelope&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;E-Mail-Verteiler&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/angebote&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-group&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;AGs und Angebote&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/groups&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-group&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Meine Gruppen&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='comment'># if true
</span>                <span class='comment'>#     io.puts &quot;&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/h4ck&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-rocket&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Dashboard Hackers&lt;/span&gt;&lt;/a&gt;&quot;
</span>                <span class='comment'># end
</span>                <span class='comment'># if admin_logged_in?
</span>                <span class='comment'>#     io.puts &quot;&lt;a class=&#39;bu-launch-adventskalender dropdown-item nav-icon&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-snowflake-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Adventskalender&lt;/span&gt;&lt;/a&gt;&quot;
</span>                <span class='comment'># end
</span>                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/hilfe&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-question-circle&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Hilfe&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;#&#39; onclick=&#39;perform_logout();&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-sign-out&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Abmelden&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:kurse</span>
                <span class='kw'>unless</span> <span class='lparen'>(</span><span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:historic_lessons_for_shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item dropdown&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon dropdown-toggle&#39; href=&#39;#&#39; id=&#39;navbarDropdownKurse&#39; role=&#39;button&#39; data-toggle=&#39;dropdown&#39; aria-haspopup=&#39;true&#39; aria-expanded=&#39;false&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;Kurse</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-menu&#39; aria-labelledby=&#39;navbarDropdownKurse&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_taken_lesson_keys'>taken_lesson_keys</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                    <span class='lparen'>(</span><span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
                        <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span>
                            <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/lessons/</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_taken_lesson_keys'>taken_lesson_keys</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:historic_lessons_for_shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_taken_lesson_keys'>taken_lesson_keys</span><span class='rparen'>)</span>
                    <span class='kw'>unless</span> <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                        <span class='id identifier rubyid_lesson_keys_with_data'>lesson_keys_with_data</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:lesson_keys</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l.key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>                            MATCH (l:Lesson)
</span><span class='tstring_content'>                            WHERE l.key IN $lesson_keys
</span><span class='tstring_content'>                            RETURN l.key;
</span><span class='heredoc_end'>                        END_OF_QUERY
</span>                        <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span> <span class='op'>&amp;=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_keys_with_data'>lesson_keys_with_data</span><span class='rparen'>)</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_remaining_lesson_keys'>remaining_lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
                                <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
                                <span class='kw'>if</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span>
                                    <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
                                    <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@faecher</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span>
                                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/lessons/</span><span class='embexpr_beg'>#{</span><span class='const'>CGI</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                                <span class='kw'>end</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:directory</span>
                <span class='id identifier rubyid_remaining_klassen'>remaining_klassen</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
                <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>=</span> <span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_manage_antikenfahrt_logged_in?'>user_who_can_manage_antikenfahrt_logged_in?</span>
                    <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_klassen'>klassen</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item dropdown&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon dropdown-toggle&#39; href=&#39;#&#39; id=&#39;navbarDropdownKlassen&#39; role=&#39;button&#39; data-toggle=&#39;dropdown&#39; aria-haspopup=&#39;true&#39; aria-expanded=&#39;false&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;Klassen</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-menu&#39; aria-labelledby=&#39;navbarDropdownKlassen&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_can_see_all_timetables_logged_in?'>can_see_all_timetables_logged_in?</span>
                    <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>=</span> <span class='cvar'>@@klassen_order</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_klassen'>klassen</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/directory/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_remaining_klassen'>remaining_klassen</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='kw'>unless</span> <span class='id identifier rubyid_remaining_klassen'>remaining_klassen</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-divider&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_remaining_klassen'>remaining_klassen</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/directory/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-address-book&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:techteam</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;/techpost&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-laptop&#39;&gt;&lt;/i&gt;&lt;/div&gt;Technikamt&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:aula</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item dropdown&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon dropdown-toggle&#39; href=&#39;#&#39; id=&#39;navbarDropdownAula&#39; role=&#39;button&#39; data-toggle=&#39;dropdown&#39; aria-haspopup=&#39;true&#39; aria-expanded=&#39;false&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-music&#39;&gt;&lt;/i&gt;&lt;/div&gt;Aulatechnik</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;dropdown-menu dropdown-menu-right&#39; aria-labelledby=&#39;navbarDropdownAula&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/aula_light&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-lightbulb-o&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Licht&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; style=&#39;display: none;&#39; href=&#39;/aula_sound&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-music&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Ton&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;dropdown-item nav-icon&#39; href=&#39;/aula_progress&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-bars&#39;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&#39;label&#39;&gt;Ablauf&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:messages</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_new_messages_count'>new_messages_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;/messages&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-comment&#39;&gt;&lt;/i&gt;&lt;/div&gt;Nachrichten&lt;span class=&#39;new-messages-indicator&#39; style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_primary_color'>primary_color</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;span&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_messages_count_s'>new_messages_count_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;/messages&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-comment&#39;&gt;&lt;/i&gt;&lt;/div&gt;Nachrichten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:tresor</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;/tresor&#39;&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;fa fa-database&#39;&gt;&lt;/i&gt;&lt;/div&gt;Datentresor&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:phishing</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;/phishing&#39;&gt;&lt;div class=&#39;icon&#39;&gt;🦈&lt;/div&gt;Phishing Prävention&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li class=&#39;nav-item text-nowrap&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;nav-link nav-icon&#39; href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;&lt;div class=&#39;icon&#39;&gt;&lt;i class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&lt;/div&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="need_sozialverhalten-instance_method">
  
    #<strong>need_sozialverhalten</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_need_sozialverhalten'>need_sozialverhalten</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='comment'># return true if session user has sozialnoten to enter
</span>    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='cvar'>@@need_sozialverhalten</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_paths_and_values-instance_method">
  
    #<strong>parse_paths_and_values</strong>(paths, values)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344
345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_paths_and_values'>parse_paths_and_values</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_recurse_arrays'>recurse_arrays</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_projekt_node-instance_method">
  
    #<strong>parse_projekt_node</strong>(p)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_projekt_node'>parse_projekt_node</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
    <span class='lbrace'>{</span>
        <span class='symbol'>:nr</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:description</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:photo</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:photo</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:exkursion_hint</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:exkursion_hint</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:extra_hint</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:extra_hint</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:categories</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:categories</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:min_klasse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:max_klasse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:capacity</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:organized_by</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='symbol'>:supervised_by</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_request_data-instance_method">
  
    #<strong>parse_request_data</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1531
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
1547
1548
1549
1550
1551
1552
1553
1554
1555
1556
1557
1558
1559
1560
1561
1562
1563
1564
1565
1566
1567
1568
1569
1570
1571
1572</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1531</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_request_data'>parse_request_data</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_body_length</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>512</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_string_length</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>512</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:required_keys</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:optional_keys</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_value_lengths</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_data_str'>data_str</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_body_length</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='comment'># if @session_user
</span>    <span class='comment'>#     unless [&#39;/api/send_message&#39;, &#39;/api/update_message&#39;, &#39;/api/submit_poll_run&#39;].include?(request.path)
</span>    <span class='comment'>#         begin
</span>    <span class='comment'>#             ip_short = request.ip.to_s.split(&#39;.&#39;).map { |x| sprintf(&#39;%02x&#39;, x.to_i) }.join(&#39;&#39;)
</span>    <span class='comment'>#             STDERR.puts sprintf(&quot;%s [%s] [%s] %s %s&quot;, DateTime.now.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;), ip_short, @session_user[:nc_login], request.path, data_str)
</span>    <span class='comment'>#         rescue
</span>    <span class='comment'>#         end
</span>    <span class='comment'>#     end
</span>    <span class='comment'># end
</span><span class='comment'>#         debug data_str
</span>    <span class='ivar'>@latest_request_body</span> <span class='op'>=</span> <span class='id identifier rubyid_data_str'>data_str</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data_str'>data_str</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data_str'>data_str</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_body_length</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>too_much_data</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='op'>::</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_data_str'>data_str</span><span class='rparen'>)</span>
        <span class='ivar'>@latest_request_body_parsed</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:required_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
            <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_test_request_parameter'>test_request_parameter</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:optional_keys</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_test_request_parameter'>test_request_parameter</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span>
    <span class='kw'>rescue</span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Request was:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_data_str'>data_str</span>
        <span class='id identifier rubyid_raise'>raise</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pending_pk5_invitations_outgoing-instance_method">
  
    #<strong>pending_pk5_invitations_outgoing</strong>(user_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 424</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pending_pk5_invitations_outgoing'>pending_pk5_invitations_outgoing</span><span class='lparen'>(</span><span class='id identifier rubyid_user_email'>user_email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pending_invitations'>pending_invitations</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user_email'>user_email</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='tstring_content'>        MATCH (ou:User {email: $email})&lt;-[:BELONGS_TO]-(p:Pk5)-[r:INVITATION_FOR]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_pending_invitations'>pending_invitations</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pending_invitations'>pending_invitations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du hast &lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; für eine Gruppenprüfung eingeladen.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-danger bu-delete-invitation&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-times&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Einladung zurücknehmen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pick_random_color_scheme-instance_method">
  
    #<strong>pick_random_color_scheme</strong>(go_wild = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2514
2515
2516
2517
2518
2519
2520
2521
2522
2523
2524
2525
2526
2527
2528
2529
2530
2531
2532
2533</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2514</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pick_random_color_scheme'>pick_random_color_scheme</span><span class='lparen'>(</span><span class='id identifier rubyid_go_wild'>go_wild</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>la2c6e80d60aea2c6e80</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNISKONFERENZEN-constant" title="ZEUGNISKONFERENZEN (constant)">ZEUGNISKONFERENZEN</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
    <span class='cvar'>@@default_color_scheme</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_jd'>jd</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_jd'>jd</span>
    <span class='kw'>return</span> <span class='cvar'>@@default_color_scheme</span><span class='lbracket'>[</span><span class='id identifier rubyid_jd'>jd</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='cvar'>@@default_color_scheme</span><span class='lbracket'>[</span><span class='id identifier rubyid_jd'>jd</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_go_wild'>go_wild</span>
        <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>?</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='id identifier rubyid_jd'>jd</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>while</span> <span class='kw'>true</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='cvar'>@@color_scheme_colors</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
        <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_which'>which</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>d</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_which'>which</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ff0040</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_color_scheme'>color_scheme</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_style'>style</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='cvar'>@@default_color_scheme</span><span class='lbracket'>[</span><span class='id identifier rubyid_jd'>jd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_color_scheme'>color_scheme</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="poll_run_results_to_html-instance_method">
  
    #<strong>poll_run_results_to_html</strong>(poll, poll_run, responses, target = :web, only_this_email = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_poll_run_results_to_html'>poll_run_results_to_html</span><span class='lparen'>(</span><span class='id identifier rubyid_poll'>poll</span><span class='comma'>,</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='comma'>,</span> <span class='id identifier rubyid_responses'>responses</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span> <span class='op'>=</span> <span class='symbol'>:web</span><span class='comma'>,</span> <span class='id identifier rubyid_only_this_email'>only_this_email</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_only_this_email'>only_this_email</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Umfrage: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_time_range'>time_range</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>am </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr bis </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_time_range'>time_range</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vom </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr) bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr)</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Diese </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:anonymous</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>anonyme</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>personengebundene</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> Umfrage wurde von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll'>poll</span><span class='lbracket'>[</span><span class='symbol'>:organizer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Herr </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Herrn </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> mit </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participant_count</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Teilnehmern </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time_range'>time_range</span><span class='embexpr_end'>}</span><span class='tstring_content'> durchgeführt.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-info&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participant_count</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Teilnehmern haben </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> die Umfrage beantwortet (</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participant_count</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>%).</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:anonymous</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_missing_responses_from'>missing_responses_from</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Es fehlen Antworten von: &lt;em&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_missing_responses_from'>missing_responses_from</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/em&gt;.</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_item_index'>item_index</span><span class='op'>|</span>
                <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_transform_keys'>transform_keys</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>paragraph</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;em&gt;(Mehrfachnennungen möglich)&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_histogram'>histogram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:answers</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span> <span class='rbrace'>}</span>
                    <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&#39;</span></span>
                            <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
                            <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                                <span class='kw'>unless</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span>
                                    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error evaluating poll: unknown value </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
                                    <span class='kw'>next</span>
                                <span class='kw'>end</span>
                                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
                                <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
                            <span class='kw'>end</span>
                        <span class='kw'>else</span>
                            <span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
                                <span class='kw'>unless</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span>
                                    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error evaluating poll: unknown value </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
                                    <span class='kw'>next</span>
                                <span class='kw'>end</span>
                                <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
                                <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
                    <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_sum'>sum</span> <span class='op'>==</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:answers</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_answer_index'>answer_index</span><span class='op'>|</span> 
                        <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer_index'>answer_index</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;pb-0&#39;&gt;&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:answers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer_index'>answer_index</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;&lt;td style=&#39;text-align: right;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;noborder pdf-space-below&#39;&gt;&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;progress&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;progress-bar progress-bar-striped bg-info&#39; role=&#39;progressbar&#39; style=&#39;width: </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='float'>100.0</span> <span class='op'>/</span> <span class='id identifier rubyid_sum'>sum</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&#39; aria-valuenow=&#39;50&#39; aria-valuemin=&#39;0&#39; aria-valuemax=&#39;100&#39;&gt;&lt;span&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>*</span> <span class='float'>100.0</span> <span class='op'>/</span> <span class='id identifier rubyid_sum'>sum</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/span&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:anonymous</span><span class='rbracket'>]</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer_index'>answer_index</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;em&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_participants_for_answer'>participants_for_answer</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer_index'>answer_index</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>else</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;em&gt;&amp;ndash;&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>textarea</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_first_response'>first_response</span> <span class='op'>=</span> <span class='kw'>true</span>
                    <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_first_response'>first_response</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:anonymous</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>else</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;em&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/em&gt;: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                            <span class='id identifier rubyid_first_response'>first_response</span> <span class='op'>=</span> <span class='kw'>false</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:anonymous</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_only_this_email'>only_this_email</span>
                    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_only_this_email'>only_this_email</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;page-break&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Einzelauswertung: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:participants</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:items</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_item_index'>item_index</span><span class='op'>|</span>
                    <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_transform_keys'>transform_keys</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>paragraph</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:text</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_answer'>answer</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_answer'>answer</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:answers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer'>answer</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>end</span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> &lt;em&gt;(Mehrfachnennungen möglich)&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_answer'>answer</span><span class='op'>|</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:answers</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_answer'>answer</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>end</span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>textarea</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:response</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_item_index'>item_index</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        
<span class='comment'>#             cm = {}
</span><span class='comment'>#             citems = (0...poll_run[:items].size).select do |item_index|
</span><span class='comment'>#                 item = poll_run[:items][item_index].transform_keys(&amp;:to_sym)
</span><span class='comment'>#                 [&#39;radio&#39;, &#39;checkbox&#39;].include?(item[:type])
</span><span class='comment'>#             end.map { |x| x.to_s }
</span><span class='comment'>#             citems.each do |a|
</span><span class='comment'>#                 citems.each do |b|
</span><span class='comment'>#                     next if a == b
</span><span class='comment'>#                     total = 0
</span><span class='comment'>#                     matches = 0
</span><span class='comment'>#                     responses.each do |response|
</span><span class='comment'>#                         # now we&#39;re looking at responses by one person to questions a and b
</span><span class='comment'>#                         va = response[:response][a]
</span><span class='comment'>#                         vb = response[:response][b]
</span><span class='comment'>#                         va = [va] unless va.is_a? Array
</span><span class='comment'>#                         vb = [vb] unless vb.is_a? Array
</span><span class='comment'>#                         va.each do |za|
</span><span class='comment'>#                             key = &quot;#{a}/#{za}&quot;
</span><span class='comment'>#                             cm[key] ||= 0
</span><span class='comment'>#                             cm[key] += 1
</span><span class='comment'>#                             vb.each do |zb|
</span><span class='comment'>#                                 key = &quot;#{a}/#{za}-#{b}/#{zb}&quot;
</span><span class='comment'>#                                 cm[key] ||= 0
</span><span class='comment'>#                                 cm[key] += 1
</span><span class='comment'>#                             end
</span><span class='comment'>#                         end
</span><span class='comment'>#                     end
</span><span class='comment'>#                 end
</span><span class='comment'>#             end
</span><span class='comment'>#             cm_final = {}
</span><span class='comment'>#             cm.keys.each do |k|
</span><span class='comment'>#                 next unless k.include?(&#39;-&#39;)
</span><span class='comment'>#                 match = cm[k]
</span><span class='comment'>#                 total = cm[k.split(&#39;-&#39;).first]
</span><span class='comment'>#                 cm_final[k] = match * 100.0 / total
</span><span class='comment'>#             end
</span><span class='comment'>#             
</span><span class='comment'>#             use_keys = cm_final.keys.select do |x|
</span><span class='comment'>#                 cm_final[x] &gt;= 30.0
</span><span class='comment'>#             end.sort do |a, b|
</span><span class='comment'>#                 cm_final[b] &lt;=&gt; cm_final[a]
</span><span class='comment'>#             end
</span><span class='comment'>#             unless use_keys.empty?
</span><span class='comment'>#                 io.puts &quot;&lt;div class=&#39;page-break&#39;&gt;&lt;/div&gt;&quot;
</span><span class='comment'>#                 io.puts &quot;&lt;h3&gt;Korrelationen&lt;/h3&gt;&quot;
</span><span class='comment'>#                 io.puts &quot;&lt;table class=&#39;table&#39;&gt;&quot;
</span><span class='comment'>#                 use_keys.each do |k|
</span><span class='comment'>#                     k2 = k.split(&#39;-&#39;).map { |x| x.split(&#39;/&#39;) }.flatten
</span><span class='comment'>#                     qa = poll_run[:items][k2[0].to_i][&#39;title&#39;]
</span><span class='comment'>#                     aa = poll_run[:items][k2[0].to_i][&#39;answers&#39;][k2[1].to_i]
</span><span class='comment'>#                     qb = poll_run[:items][k2[2].to_i][&#39;title&#39;]
</span><span class='comment'>#                     ab = poll_run[:items][k2[2].to_i][&#39;answers&#39;][k2[3].to_i]
</span><span class='comment'>#                     io.puts &quot;&lt;tr&gt;&lt;td style=&#39;vertical-align: top;&#39;&gt;#{sprintf(&#39;%3d%%&#39;, cm_final[k])}&lt;/td&gt;&lt;td&gt;&lt;strong&gt;#{qa}&lt;/strong&gt;&lt;br /&gt;#{aa}&lt;br /&gt;&lt;strong&gt;#{qb}&lt;/strong&gt;&lt;br /&gt;#{ab}&lt;/td&gt;&lt;/tr&gt;&quot;
</span><span class='comment'>#                 end
</span><span class='comment'>#                 io.puts &quot;&lt;/table&gt;&quot;
</span><span class='comment'>#             end
</span>        
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_ad_hoc_2fa_panel-instance_method">
  
    #<strong>print_ad_hoc_2fa_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 537</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_ad_hoc_2fa_panel'>print_ad_hoc_2fa_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_admin_2fa_hotline_logged_in?'>admin_2fa_hotline_logged_in?</span>
    <span class='id identifier rubyid_require_admin_2fa_hotline!'>require_admin_2fa_hotline!</span>
    <span class='id identifier rubyid_ts'>ts</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:ts</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ts'>ts</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (ahr:AdHocTwoFaRequest)-[:BELONGS_TO]-&gt;(s:Session)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        WHERE $ts &gt; ahr.ts_expire
</span><span class='tstring_content'>        DETACH DELETE ahr;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (ahr:AdHocTwoFaRequest)-[:BELONGS_TO]-&gt;(s:Session)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN u;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Datentresor-Hotline&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;bu_open_ad_hoc_2fa_request button btn btn-success&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-name=&#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-phone&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;nbsp;&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='comment'># io.puts &quot;&lt;div&gt;&lt;span style=&#39;font-size: 200%; opacity: 0.7; float: left; margin-right: 8px;&#39;&gt;&lt;i class=&#39;fa fa-book&#39;&gt;&lt;/i&gt;&lt;/span&gt;#{n_to_s[@@bib_summoned_books[email].size] || &#39;Mehrere&#39;} Bücher, die du ausgeliehen hast, #{@@bib_summoned_books[email].size == 1 ? &#39;wird&#39; : &#39;werden&#39;} dringend in der Bibliothek benötigt. Bitte bring #{@@bib_summoned_books[email].size == 1 ? &#39;es&#39; : &#39;sie&#39;} zurück und lege #{@@bib_summoned_books[email].size == 1 ? &#39;es&#39; : &#39;sie&#39;} ins &lt;a target=&#39;_blank&#39; href=&#39;https://rundgang.gymnasiumsteglitz.de/#g114&#39;&gt;Rückgaberegal&lt;/a&gt; vor der Bibliothek.&lt;/div&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_admin_dashboard-instance_method">
  
    #<strong>print_admin_dashboard</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_admin_dashboard'>print_admin_dashboard</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:session</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (s:Session)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        RETURN s, u.email
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_all_sessions'>all_sessions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
        <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:session</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_all_homeschooling_users'>all_homeschooling_users</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_all_homeschooling_users'><span class='object_link'><a href="#get_all_homeschooling_users-class_method" title="Main.get_all_homeschooling_users (method)">get_all_homeschooling_users</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_users_with_telephone_number'>users_with_telephone_number</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MATCH (u:User) WHERE u.telephone_number IS NOT NULL RETURN u.email</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_users_with_otp'>users_with_otp</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MATCH (u:User) WHERE u.otp_token IS NOT NULL RETURN u.email</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_twofa_status'>twofa_status</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_users_with_telephone_number'>users_with_telephone_number</span> <span class='op'>|</span> <span class='id identifier rubyid_users_with_otp'>users_with_otp</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_methods'>methods</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_methods'>methods</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-mobile&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;SMS</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_users_with_telephone_number'>users_with_telephone_number</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_methods'>methods</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-qrcode&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;OTP</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_users_with_otp'>users_with_otp</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_twofa_status'>twofa_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_methods'>methods</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> / </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_bolt_connections'>bolt_connections</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CALL dbms.listConnections();</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span style=&#39;float: right;&#39;&gt;SMS Gateway: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sms_gateway_ready?'><span class='object_link'><a href="#sms_gateway_ready%3F-class_method" title="Main.sms_gateway_ready? (method)">sms_gateway_ready?</a></span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>online</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>offline</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> / Aktive Bolt-Verbindungen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bolt_connections'>bolt_connections</span><span class='embexpr_end'>}</span><span class='tstring_content'> / &lt;a href=&#39;/schema&#39;&gt;Schema&lt;/a&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#teachers&#39;&gt;Lehrerinnen und Lehrer&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#sus&#39;&gt;Schülerinnen und Schüler&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#external_users&#39;&gt;Externe Nutzer&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#website&#39;&gt;Website&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#tablets&#39;&gt;Tablets&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#monitor&#39;&gt;Monitor&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;#bibliothek&#39;&gt;Bibliothek&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/sus_ohne_kurse&#39;&gt;SuS ohne Kurse&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/api/all_sus_logo_didact&#39;&gt;LDC: Alle SuS&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/api/all_lul_logo_didact&#39;&gt;LDC: Alle Lehrkräfte&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/api/all_sus_untis&#39;&gt;Untis: Alle SuS&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/api/all_kurse_untis&#39;&gt;Untis: Alle Kurse&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a class=&#39;btn btn-secondary mb-1&#39; href=&#39;/api/get_room_timetable_pdf&#39;&gt;Alle Raumpläne (PDF)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;teachers&#39;&gt;Lehrerinnen und Lehrer&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;th&gt;&lt;/th&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Kürzel&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Vorname&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Stundenplan&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Anmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;2FA&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Sessions&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='comment'># io.puts &quot;&lt;td&gt;#{user_icon(email, &#39;avatar-md&#39;)}&lt;/td&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#USE_MOCK_NAMES-constant" title="USE_MOCK_NAMES (constant)">USE_MOCK_NAMES</a></span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;a class=&#39;btn btn-xs btn-secondary&#39; style=&#39;padding-top: 0.4em;&#39; href=&#39;/timetable/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-calendar&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Stundenplan&lt;/a&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-warning btn-xs btn-impersonate&#39; data-impersonate-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-id-badge&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Anmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_twofa_status'>twofa_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn-sessions btn btn-xs btn-secondary&#39; data-sessions-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Session</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
                <span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SESSION_SCRAMBLER-constant" title="SESSION_SCRAMBLER (constant)">SESSION_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;session-row sessions-</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;display: none;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(unbekanntes Gerät)</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;sus&#39;&gt;Schülerinnen und Schüler&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;th&gt;&lt;/th&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Vorname&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Stundenplan&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Anmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;th&gt;Homeschooling&lt;/th&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;2FA&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Sessions&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th colspan=&#39;7&#39;&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='comment'># io.puts &quot;&lt;td&gt;#{user_icon(email, &#39;avatar-md&#39;)}&lt;/td&gt;&quot;
</span>                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;a class=&#39;btn btn-xs btn-secondary&#39; href=&#39;/timetable/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-calendar&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Stundenplan&lt;/a&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-warning btn-xs btn-impersonate&#39; data-impersonate-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-id-badge&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Anmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='comment'># if all_homeschooling_users.include?(email)
</span>                <span class='comment'>#     io.puts &quot;&lt;td&gt;&lt;button class=&#39;btn btn-info btn-xs btn-toggle-homeschooling&#39; data-email=&#39;#{user[:email]}&#39;&gt;&lt;i class=&#39;fa fa-home&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;zu Hause&lt;/button&gt;&lt;/td&gt;&quot;
</span>                <span class='comment'># else
</span>                <span class='comment'>#     io.puts &quot;&lt;td&gt;&lt;button class=&#39;btn btn-secondary btn-xs btn-toggle-homeschooling&#39; data-email=&#39;#{user[:email]}&#39;&gt;&lt;i class=&#39;fa fa-building&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Präsenz&lt;/button&gt;&lt;/td&gt;&quot;
</span>                <span class='comment'># end
</span>                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_twofa_status'>twofa_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn-sessions btn btn-xs btn-secondary&#39; data-sessions-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Session</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='lparen'>(</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
                    <span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SESSION_SCRAMBLER-constant" title="SESSION_SCRAMBLER (constant)">SESSION_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;session-row sessions-</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;display: none;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;3&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(unbekanntes Gerät)</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;external_users&#39;&gt;Externe Nutzer&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># io.puts &quot;&lt;th&gt;&lt;/th&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Vorname&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;E-Mail-Adresse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Anmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;2FA&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Sessions&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:teacher</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># io.puts &quot;&lt;td&gt;#{user_icon(email, &#39;avatar-md&#39;)}&lt;/td&gt;&quot;
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#USE_MOCK_NAMES-constant" title="USE_MOCK_NAMES (constant)">USE_MOCK_NAMES</a></span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-warning btn-xs btn-impersonate&#39; data-impersonate-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-id-badge&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Anmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_twofa_status'>twofa_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn-sessions btn btn-xs btn-secondary&#39; data-sessions-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Session</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='id identifier rubyid_all_sessions'>all_sessions</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
                <span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SESSION_SCRAMBLER-constant" title="SESSION_SCRAMBLER (constant)">SESSION_SCRAMBLER</a></span></span> <span class='op'>+</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>36</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;session-row sessions-</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;display: none;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39;&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(unbekanntes Gerät)</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scrambled_sid'>scrambled_sid</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;website&#39;&gt;Website&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-secondary bu-refresh-staging&#39;&gt;&lt;i id=&#39;refresh-icon-staging&#39; class=&#39;fa fa-refresh&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Vorschau-Seite aktualisieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-refresh-live&#39;&gt;&lt;i id=&#39;refresh-icon-live&#39; class=&#39;fa fa-refresh&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Live-Seite aktualisieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;tablets&#39;&gt;Tablets&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Mit einem Klick auf diesen Button können Sie dieses Gerät dauerhaft als Lehrer-Tablet anmelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu_login_teacher_tablet&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Lehrer-Tablet-Modus aktivieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte wählen Sie ein order mehrere Kürzel, um dieses Gerät dauerhaft als Kurs-Tablet anzumelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@shorthands</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn-teacher-for-kurs-tablet-login btn btn-xs btn-outline-secondary&#39; data-shorthand=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br /&gt;&lt;br &gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu_login_kurs_tablet&#39; disabled&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Kurs-Tablet-Modus aktivieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte wählen Sie ein Tablet, um dieses Gerät dauerhaft als dieses Tablet anzumelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@tablets</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
            <span class='id identifier rubyid_tablet'>tablet</span> <span class='op'>=</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn-tablet-login btn btn-xs btn-outline-secondary&#39; data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:bg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>; color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:fg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Typ&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Gerät&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Abmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Lehrer-Tablet&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;lehrer.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kurs.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Kurs-Tablet (</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:shorthands</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;kurs.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;monitor&#39;&gt;Monitor&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-monitor&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als Flur-Monitor anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-monitor-sek&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als Sek-Monitor anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-monitor-lz&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als LZ-Monitor anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3 id=&#39;bibliothek&#39;&gt;Bibliothek&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-bib-mobile&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als Bibliotheks-Handy anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-bib-station&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als Bibliotheks-Station anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-login-as-bib-station-with-printer&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Als Bibliotheks-Station mit Labeldrucker anmelden&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_advent_calendar_css-instance_method">
  
    #<strong>print_advent_calendar_css</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2581
2582
2583
2584
2585
2586
2587
2588
2589
2590
2591
2592
2593
2594
2595
2596
2597
2598
2599
2600
2601
2602
2603
2604
2605
2606
2607
2608
2609
2610
2611
2612
2613
2614
2615
2616
2617
2618
2619
2620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2581</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_advent_calendar_css'>print_advent_calendar_css</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='id identifier rubyid_permutation'>permutation</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>18</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>7</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='int'>8</span><span class='comma'>,</span><span class='int'>23</span><span class='comma'>,</span><span class='int'>21</span><span class='comma'>,</span><span class='int'>15</span><span class='comma'>,</span><span class='int'>10</span><span class='comma'>,</span><span class='int'>14</span><span class='comma'>,</span><span class='int'>11</span><span class='comma'>,</span><span class='int'>20</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>9</span><span class='comma'>,</span><span class='int'>17</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>19</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>12</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>22</span><span class='comma'>,</span><span class='int'>16</span><span class='comma'>,</span><span class='int'>13</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_xo'>xo</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='float'>0.5</span><span class='comma'>,</span><span class='float'>1.5</span><span class='comma'>,</span><span class='float'>2.5</span><span class='comma'>,</span><span class='float'>3.5</span><span class='comma'>,</span><span class='float'>4.5</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span><span class='comma'>,</span><span class='float'>0.5</span><span class='comma'>,</span><span class='float'>1.5</span><span class='comma'>,</span><span class='float'>2.5</span><span class='comma'>,</span><span class='float'>3.5</span><span class='comma'>,</span><span class='float'>4.5</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_yo'>yo</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>4</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_images'>images</span> <span class='op'>=</span> <span class='id identifier rubyid_advent_calendar_images'>advent_calendar_images</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>23</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
            <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_permutation'>permutation</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_image'>image</span> <span class='op'>=</span> <span class='id identifier rubyid_images'>images</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_image'>image</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_advents_calendar_date_today'>advents_calendar_date_today</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.door.door</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'> {</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    left: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xo'>xo</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>17.5</span> <span class='op'>+</span> <span class='float'>0.5</span><span class='embexpr_end'>}</span><span class='tstring_content'>vh;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    top: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_yo'>yo</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>17.5</span> <span class='op'>+</span> <span class='float'>0.1</span><span class='embexpr_end'>}</span><span class='tstring_content'>vh;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    width: 17.5vh;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    height: 17.5vh;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.door.door</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'> .flip-card-front {</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    background-image: url(/images/advent-calendar/doors/tiles-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png);</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    background-size: cover;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.door.door</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'> .flip-card-back {</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    background-image: url(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_images'>images</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>);</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    background-size: cover;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@media (orientation: portrait) {</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>23</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
                <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_permutation'>permutation</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.door.door</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'> {</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    left: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_yo'>yo</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>18.277</span> <span class='op'>+</span> <span class='float'>0.1044</span><span class='embexpr_end'>}</span><span class='tstring_content'>vw;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    top: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xo'>xo</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>18.277</span> <span class='op'>+</span> <span class='float'>0.5222</span><span class='embexpr_end'>}</span><span class='tstring_content'>vw;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    width: 18.277vw;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    height: 18.277vw;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_advent_calendar_doors-instance_method">
  
    #<strong>print_advent_calendar_doors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2622
2623
2624
2625
2626
2627
2628
2629
2630
2631
2632
2633
2634
2635
2636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2622</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_advent_calendar_doors'>print_advent_calendar_doors</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='id identifier rubyid_doors'>doors</span> <span class='op'>=</span> <span class='id identifier rubyid_get_open_doors_for_user'>get_open_doors_for_user</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>23</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div data-door=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;door door</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_doors'>doors</span> <span class='op'>&gt;&gt;</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>open</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;flip-card-inner&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;flip-card-front&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;flip-card-back&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_adventskalender_sidepanel-instance_method">
  
    #<strong>print_adventskalender_sidepanel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2673
2674
2675
2676
2677
2678
2679
2680
2681
2682
2683
2684
2685
2686</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2673</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_adventskalender_sidepanel'>print_adventskalender_sidepanel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div&gt;Adventskalender&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button style=&#39;white-space: nowrap;&#39; class=&#39;float-right btn btn-success bu-launch-adventskalender&#39;&gt;Adventskalender öffnen&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_kurse_untis-instance_method">
  
    #<strong>print_all_kurse_untis</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 395</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_kurse_untis'>print_all_kurse_untis</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='cvar'>@@kurse_for_schueler</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
                    <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
                    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='cvar'>@@original_fach_for_lesson_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='cvar'>@@original_fach_for_lesson_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_lesson_key'>lesson_key</span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_lul_logo_didact-instance_method">
  
    #<strong>print_all_lul_logo_didact</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 452</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_lul_logo_didact'>print_all_lul_logo_didact</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='id identifier rubyid_au'>au</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bu'>bu</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_au'>au</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_bu'>bu</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mand</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_shorthand'>shorthand</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Man</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/data/lehrer/extra-ldc-accounts.csv</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
                <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_line'>line</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_sus_logo_didact-instance_method">
  
    #<strong>print_all_sus_logo_didact</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434
435
436
437
438
439
440
441
442
443
444
445</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_sus_logo_didact'>print_all_sus_logo_didact</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                <span class='id identifier rubyid_geburtstag'>geburtstag</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>8</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_geburtstag'>geburtstag</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_sus_untis-instance_method">
  
    #<strong>print_all_sus_untis</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 358</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_sus_untis'>print_all_sus_untis</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geburtstag</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>8</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_parts'>parts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
                <span class='comment'># [&quot;\&quot;Mustermann\&quot;&quot;, &quot;\&quot;Mustermann\&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;\&quot;W\&quot;&quot;, &quot;\&quot;Max\&quot;&quot;, &quot;\&quot;1\&quot;&quot;, &quot;\&quot;5a\&quot;&quot;, &quot;\&quot;1\&quot;&quot;, &quot;&quot;, &quot;\&quot;19670101\&quot;&quot;, &quot;&quot;, &quot;\r&quot;]
</span>                <span class='comment'># io.puts &quot;#{user[:last_name]}\t#{user[:first_name]}\t#{user[:klasse]}\t#{user[:geschlecht]}\t#{geburtstag}&quot;
</span>                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_users-instance_method">
  
    #<strong>print_all_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345
346
347
348
349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_users'>print_all_users</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_all_users_informatik_biber-instance_method">
  
    #<strong>print_all_users_informatik_biber</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 757</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_all_users_informatik_biber'>print_all_users_informatik_biber</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_biber_user_id'>biber_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span>
                <span class='id identifier rubyid_biber_password'>biber_password</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:biber_password</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'><span class='object_link'><a href="#tr_klasse-class_method" title="Main.tr_klasse (method)">tr_klasse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_biber_user_id'>biber_user_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_biber_password'>biber_password</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>male</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>female</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Informatik-Biber Klasse </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'><span class='object_link'><a href="#tr_klasse-class_method" title="Main.tr_klasse (method)">tr_klasse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Informatik-Biber Klasse </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_tr_klasse'><span class='object_link'><a href="#tr_klasse-class_method" title="Main.tr_klasse (method)">tr_klasse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Anmeldung mit schulischer E-Mail-Adresse und 4-stelligem Passwort</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_biber_user_id'>biber_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_email'>email</span>
                <span class='id identifier rubyid_biber_password'>biber_password</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:biber_password</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_biber_password'>biber_password</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_current_monitor_advent_calendar_images-instance_method">
  
    #<strong>print_current_monitor_advent_calendar_images</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2638
2639
2640
2641
2642
2643
2644
2645
2646
2647
2648
2649
2650
2651
2652
2653
2654
2655</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2638</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_current_monitor_advent_calendar_images'>print_current_monitor_advent_calendar_images</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_images'>images</span> <span class='op'>=</span> <span class='id identifier rubyid_advent_calendar_images'>advent_calendar_images</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='id identifier rubyid_advents_calendar_date_today'>advents_calendar_date_today</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='id identifier rubyid_advents_calendar_date_today'>advents_calendar_date_today</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>4</span>
        <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_d'>d</span> <span class='op'>&lt;</span> <span class='int'>0</span>
        <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='int'>19</span> <span class='kw'>if</span> <span class='id identifier rubyid_d'>d</span> <span class='op'>&gt;</span> <span class='int'>19</span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
            <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_d'>d</span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span>
            <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/advent-calendar/doors/tiles-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.png</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_today'>today</span> <span class='op'>-</span> <span class='int'>1</span>
                <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_images'>images</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;img src=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_current_polls-instance_method">
  
    #<strong>print_current_polls</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 881</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_current_polls'>print_current_polls</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='symbol'>:today</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:poll_run</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:poll_title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.title</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:organizer</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:hidden</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hidden</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[rt:IS_PARTICIPANT]-&gt;(pr:PollRun)-[:RUNS]-&gt;(p:Poll)-[:ORGANIZED_BY]-&gt;(a:User)
</span><span class='tstring_content'>        WHERE COALESCE(rt.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(pr.deleted, false) = false
</span><span class='tstring_content'>        AND COALESCE(p.deleted, false) = false
</span><span class='tstring_content'>        AND $today &gt;= pr.start_date
</span><span class='tstring_content'>        AND $today &lt;= pr.end_date
</span><span class='tstring_content'>        AND pr.visible &lt;&gt; &quot;no&quot;
</span><span class='tstring_content'>        RETURN pr, p.title, a.email, COALESCE(rt.hide, FALSE) AS hidden
</span><span class='tstring_content'>        ORDER BY pr.end_date, pr.end_time;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_select!'>select!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_pr'>pr</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:poll_run</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>&gt;=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pr'>pr</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pr'>pr</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_now'>now</span> <span class='op'>&lt;=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pr'>pr</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pr'>pr</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_hidden_entries'>hidden_entries</span> <span class='op'>=</span> <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:hidden</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_hidden_entries'>hidden_entries</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint hint_poll_hidden_indicator&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ausgeblendete Umfragen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hidden_entries'>hidden_entries</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:poll_title</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;a id=&#39;show_hidden_polls&#39; href=&#39;#&#39;&gt;(anzeigen)&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint hint_poll&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:hidden</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>display: none;</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_poll_title'>poll_title</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:poll_title</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_poll_run'>poll_run</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:poll_run</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_organizer'>organizer</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:organizer</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;float: left; width: 36px; height: 36px; margin-right: 15px; position: relative; top: 5px; left: 4px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_organizer'>organizer</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-fill</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_organizer'>organizer</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name_official</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> hat </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sie</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dich</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> zu einer Umfrage eingeladen: &lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_title'>poll_title</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt;. </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sie können</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Du kannst</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr teilnehmen (die Umfrage &lt;span class=&#39;moment-countdown&#39; data-target-timestamp=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>T</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:end_time</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:00&#39; data-before-label=&#39;läuft noch&#39; data-after-label=&#39;ist vorbei&#39;&gt;&lt;/span&gt;).&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button style=&#39;white-space: nowrap;&#39; class=&#39;float-right btn btn-success bu-launch-poll&#39; data-poll-run-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_poll_run'>poll_run</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Zur Umfrage&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_dev_stats-instance_method">
  
    #<strong>print_dev_stats</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/development.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_dev_stats'>print_dev_stats</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dark'>dark</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {dark: true})
</span><span class='tstring_content'>        RETURN COUNT(u) AS userCount;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>
    <span class='id identifier rubyid_new_design'>new_design</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {new_design: true})
</span><span class='tstring_content'>        RETURN COUNT(u) AS userCount;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;User, die Zugriff auf diese Seite haben&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table narrow table-striped&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;User&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>for</span> <span class='id identifier rubyid_tech_admin'>tech_admin</span> <span class='kw'>in</span> <span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='symbol'>:developer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_tech_admin'>tech_admin</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_tech_admin'>tech_admin</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_nc_login'>nc_login</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_tech_admin'>tech_admin</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;img src=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nc_login'>nc_login</span><span class='embexpr_end'>}</span><span class='tstring_content'>/256&#39; class=&#39;icon avatar-md&#39;&gt;&amp;nbsp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_name'>display_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Statistiken&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Anzahl der Nutzer, die das neue Design nutzen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_design'>new_design</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>userCount</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Anzahl der Nutzer, die den Dark-Mode nutzen: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dark'>dark</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>userCount</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Phishing Status&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;code&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;PHISHING_HINT_START = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_HINT_START</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;br&gt;PHISHING_HINT_END = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_HINT_END</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;PHISHING_START = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_START</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;br&gt;PHISHING_END = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_END</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;PHISHING_POLL_RUN_ID = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_POLL_RUN_ID</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;PHISHING_RECEIVING_DATE = &#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_RECEIVING_DATE</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/code&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_email_accounts-instance_method">
  
    #<strong>print_email_accounts</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 536</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_email_accounts'>print_email_accounts</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_all_marked_known'>all_marked_known</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MATCH (n:KnownEmailAddress) RETURN n;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
            <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:known</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_all_marked_known'>all_marked_known</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:scheduled_termination</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:scheduled_termination</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MATCH (n:KnownEmailAddress {known: true}) RETURN n.email;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_email_addresses'>email_addresses</span> <span class='op'>=</span> <span class='cvar'>@@current_email_addresses</span>
        <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_DOMAIN-constant" title="SMTP_DOMAIN (constant)">SMTP_DOMAIN</a></span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                    <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
                    <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'><span class='object_link'><a href="#gen_password_for_email-class_method" title="Main.gen_password_for_email (method)">gen_password_for_email</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='rbrace'>}</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                    <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
                    <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'><span class='object_link'><a href="#gen_password_for_email-class_method" title="Main.gen_password_for_email (method)">gen_password_for_email</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='rbrace'>}</span>
                <span class='id identifier rubyid_eltern_email'>eltern_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_eltern_email'>eltern_email</span>
                <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_eltern_email'>eltern_email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                    <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_eltern_email'>eltern_email</span><span class='comma'>,</span>
                    <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'><span class='object_link'><a href="#gen_password_for_email-class_method" title="Main.gen_password_for_email (method)">gen_password_for_email</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_eltern_email'>eltern_email</span><span class='rparen'>)</span>
                <span class='rbrace'>}</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ev.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
                <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                <span class='symbol'>:last_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Elternvertreter:innen </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
                <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gen_password_for_email'><span class='object_link'><a href="#gen_password_for_email-class_method" title="Main.gen_password_for_email (method)">gen_password_for_email</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span> <span class='op'>+</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
            <span class='rbrace'>}</span>
        <span class='kw'>end</span>
        <span class='cvar'>@@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span> <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span> <span class='rbrace'>}</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ev.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_known_email_association'>known_email_association</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_email_addresses'>email_addresses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:teacher</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:sus</span>
                <span class='kw'>end</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>7</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:parents</span>
            <span class='kw'>elsif</span> <span class='cvar'>@@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:mailing_list</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ev.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ev.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:ev</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_email_addresses'>email_addresses</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
        <span class='id identifier rubyid_unknown_addresses'>unknown_addresses</span> <span class='op'>=</span> <span class='id identifier rubyid_email_addresses'>email_addresses</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span> <span class='id identifier rubyid_known_email_association'>known_email_association</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Fehlende Postfächer&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='comment'># io.puts &quot;&lt;table class=&#39;table&#39;&gt;&quot;
</span>        <span class='comment'># io.puts &quot;&lt;tr&gt;&lt;th&gt;E-Mail-Adresse&lt;/th&gt;&lt;/tr&gt;&quot;
</span>        <span class='comment'># required_email_addresses.each do |email|
</span>        <span class='comment'>#     io.puts &quot;&lt;tr&gt;&quot;
</span>        <span class='comment'>#     io.puts &quot;&lt;td&gt;#{email}&lt;/td&gt;&quot;
</span>        <span class='comment'>#     io.puts &quot;&lt;/tr&gt;&quot;
</span>        <span class='comment'># end
</span>        <span class='comment'># io.puts &quot;&lt;/table&gt;&quot;
</span>        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;pre&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_required_email_addresses'>required_email_addresses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_data_for_required_email_address'>data_for_required_email_address</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>// no data for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/pre&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_today_str'>today_str</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='lbracket'>[</span><span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_known'>known</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_known'>known</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Bekannte Postfächer&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Unbekannte / nicht mehr benötigte Postfächer&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th&gt;E-Mail-Adresse&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_unknown_addresses'>unknown_addresses</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_all_marked_known'>all_marked_known</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_known'>known</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_classes'>classes</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_today_str'>today_str</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_classes'>classes</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bg-warning</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_classes'>classes</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bg-danger</span><span class='tstring_end'>&#39;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_classes'>classes</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(Löschung zum </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_known'>known</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-warning bu-mark-unknown-address&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Unbekannt&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-success bu-mark-known-address&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Bekannt&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>unless</span> <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-danger bu-mark-for-termination&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-weeks=&#39;4&#39;&gt;Löschen in 4 Wochen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-danger bu-mark-for-termination&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-weeks=&#39;1&#39;&gt;Löschen in 1 Woche&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_all_termination_dates'>all_termination_dates</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-warning bu-unmark-for-termination&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Nicht löschen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>

            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_email_field-instance_method">
  
    #<strong>print_email_field</strong>(io, email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2265
2266
2267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;input-group&#39;&gt;&lt;input type=&#39;text&#39; class=&#39;form-control&#39; readonly value=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;min-width: 100px;&#39; /&gt;&lt;div class=&#39;input-group-append&#39;&gt;&lt;button class=&#39;btn btn-secondary btn-clipboard&#39; data-clipboard-action=&#39;copy&#39; title=&#39;Eintrag in die Zwischenablage kopieren&#39; data-clipboard-text=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-clipboard&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_free_projekt_spots-instance_method">
  
    #<strong>print_free_projekt_spots</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 618</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_free_projekt_spots'>print_free_projekt_spots</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_projekte'>projekte</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

        <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>            MATCH (u:User)-[:ASSIGNED_TO]-&gt;(p:Projekt)
</span><span class='tstring_content'>            RETURN u.email, p.nr, p;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_nr'>nr</span><span class='op'>|</span>
            <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Freie Plätze in anderen Projekten&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Wenn du lieber in ein anderes Projekt wechseln möchtest, schreib einfach eine E-Mail bis &lt;strong&gt;Mittwoch, den 10. Juli um 16:00 Uhr&lt;/strong&gt; an &lt;a href=&#39;mailto:</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEBSITE_MAINTAINER_EMAIL-constant" title="WEBSITE_MAINTAINER_EMAIL (constant)">WEBSITE_MAINTAINER_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEBSITE_MAINTAINER_EMAIL-constant" title="WEBSITE_MAINTAINER_EMAIL (constant)">WEBSITE_MAINTAINER_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;. Momentan sind noch folgende Plätze frei:&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm table-striped&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Projekt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Freie Plätze&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;nur </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Klasse&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. – </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Klasse&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> frei&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_gev_table-instance_method">
  
    #<strong>print_gev_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/gev.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_gev_table'>print_gev_table</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_gev_logged_in?'>gev_logged_in?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.ev_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {ev: true})
</span><span class='tstring_content'>        RETURN u.email, u.ev_name;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_gev'>gev</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name_for_email'>name_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_gev'>gev</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_name_for_email'>name_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_gev'>gev</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
                <span class='id identifier rubyid_to'>to</span> <span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='symbol'>:gev</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
                <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>

                <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Elternsprecher entfernt</span><span class='tstring_end'>&quot;</span></span>

                <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Hallo!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Eltern von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name_for_email'>name_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>) wurden als Elternsprecher entfernt, da die Schülerin / der Schüler nicht mehr an der Schule ist.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Viele Grüße,&lt;br /&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEBSITE_MAINTAINER_NAME-constant" title="WEBSITE_MAINTAINER_NAME (constant)">WEBSITE_MAINTAINER_NAME</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_email'>email</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>                MATCH (u:User {email: $email})
</span><span class='tstring_content'>                REMOVE u.ev
</span><span class='tstring_content'>                REMOVE u.ev_name;
</span><span class='heredoc_end'>            END_OF_QUERY
</span>            <span class='id identifier rubyid_gev'>gev</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_gev'>gev</span> <span class='op'>=</span> <span class='id identifier rubyid_gev'>gev</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
        <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Elternvertreter:innen&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_gev'>gev</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Eltern von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;input type=&#39;text&#39; class=&#39;form-control ti_name&#39; value=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name_for_email'>name_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;/&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger bu-remove-ev&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Löschen&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_lehrbuchverein_table-instance_method">
  
    #<strong>print_lehrbuchverein_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lehrbuchverein.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_lehrbuchverein_table'>print_lehrbuchverein_table</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_can_manage_bib_payment_logged_in?'>can_manage_bib_payment_logged_in?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User {lmv_no_pay: true})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_no_pay'>no_pay</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_no_pay'>no_pay</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:jahr</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (u:User)-[:PAID_FOR]-&gt;(j:Lehrbuchvereinsjahr {jahr: $jahr})
</span><span class='tstring_content'>        RETURN u.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_paid'>paid</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_paid'>paid</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Vorname&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Bezahlt für </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span> <span class='op'>%</span> <span class='int'>100</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Zahlungsbefreit&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Selbstzahler&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_all_schueler'>all_schueler</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_all_schueler'>all_schueler</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='comment'># all_schueler.sort! do |a, b|
</span>        <span class='comment'>#     @@user_info[a][:last_name] == @@user_info[b][:last_name] ?
</span>        <span class='comment'>#     (@@user_info[a][:first_name] &lt;=&gt; @@user_info[b][:first_name]) :
</span>        <span class='comment'>#     (@@user_info[a][:last_name] &lt;=&gt; @@user_info[b][:last_name])
</span>        <span class='comment'># end
</span>        <span class='id identifier rubyid_all_schueler'>all_schueler</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_mitglieder'>mitglieder</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_state'>state</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_paid'>paid</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_state'>state</span> <span class='op'>+=</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_no_pay'>no_pay</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
            <span class='comment'># state += 4 if [5, 6].include?(((@@user_info[email] || {})[:klasse] || &#39;&#39;).to_i)
</span>            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:last_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:first_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_can_manage_bib_members_logged_in?'>can_manage_bib_members_logged_in?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>&gt;&gt;</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-success</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu_toggle_paid&#39;&gt;bezahlt für </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LEHRBUCHVEREIN_JAHR-constant" title="LEHRBUCHVEREIN_JAHR (constant)">LEHRBUCHVEREIN_JAHR</a></span></span> <span class='op'>%</span> <span class='int'>100</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>&gt;&gt;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>&gt;&gt;</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-primary</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu_toggle_no_pay&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span> <span class='op'>&amp;</span> <span class='int'>4</span> <span class='op'>==</span> <span class='int'>4</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;zahlungsbefreit&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-danger</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu_no_book_for_you disabled&#39;&gt;Selbstzahler&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_lehrerzimmer_panel-instance_method">
  
    #<strong>print_lehrerzimmer_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2273
2274
2275
2276
2277
2278
2279
2280
2281
2282
2283
2284
2285
2286
2287
2288
2289
2290
2291
2292
2293
2294
2295
2296
2297
2298
2299
2300
2301
2302
2303
2304
2305
2306
2307
2308
2309
2310
2311
2312
2313
2314
2315
2316
2317
2318
2319
2320
2321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_lehrerzimmer_panel'>print_lehrerzimmer_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint lehrerzimmer-panel&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hide-sm&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;padding-top: 7px;&#39;&gt;Momentan im Jitsi-Lehrerzimmer:&amp;nbsp;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_rooms'>rooms</span> <span class='op'>=</span> <span class='id identifier rubyid_current_jitsi_rooms'>current_jitsi_rooms</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_nobody_here'>nobody_here</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_rooms'>rooms</span>
            <span class='id identifier rubyid_rooms'>rooms</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>roomName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lehrerzimmer</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_room'>room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>participants</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
                        <span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>displayName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>herr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frau</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dr.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>displayName</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>herr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frau</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dr.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
                    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_participant'>participant</span><span class='op'>|</span>
                        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_participant'>participant</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_users'>users</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
                        <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;btn btn-xs ttc&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_nobody_here'>nobody_here</span> <span class='op'>=</span> <span class='kw'>false</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_nobody_here'>nobody_here</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;em&gt;niemand&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hide-non-sm&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:teacher</span><span class='rbracket'>]</span>
<span class='comment'>#                     io.puts &quot;&lt;span class=&#39;btn btn-xs ttc&#39;&gt;#{@@user_info[email][:shorthand]}&lt;/span&gt;&quot;
</span>                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-right: 5px; display: inline-block; position: relative; top: 5px; background-image: url(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/128), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mO88h8AAq0B1REmZuEAAAAASUVORK5CYII=);&#39; class=&#39;avatar-md&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/jitsi/Lehrerzimmer&#39; target=&#39;_blank&#39; style=&#39;white-space: nowrap;&#39; class=&#39;float-right btn btn-success&#39;&gt;&lt;i class=&#39;fa fa-microphone&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Lehrerzimmer&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_lesson_keys_history-instance_method">
  
    #<strong>print_lesson_keys_history</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/admin.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_lesson_keys_history'>print_lesson_keys_history</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_start_dates'>start_dates</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_start_dates'>start_dates</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_start_date'>start_date</span><span class='op'>|</span>
            <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:timetables</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
                <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:stunden</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dow'>dow</span><span class='comma'>,</span> <span class='id identifier rubyid_info2'>info2</span><span class='op'>|</span>
                    <span class='id identifier rubyid_info2'>info2</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stunde'>stunde</span><span class='comma'>,</span> <span class='id identifier rubyid_info3'>info3</span><span class='op'>|</span>
                        <span class='id identifier rubyid_klassen'>klassen</span> <span class='op'>=</span> <span class='id identifier rubyid_info3'>info3</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_lehrer'>lehrer</span> <span class='op'>=</span> <span class='id identifier rubyid_info3'>info3</span><span class='lbracket'>[</span><span class='symbol'>:lehrer</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_fach'>fach</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:fach</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_klassen'>klassen</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                            <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                            <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                            <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                            <span class='id identifier rubyid_lehrer'>lehrer</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span>
                                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_l'>l</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&gt;</span> <span class='int'>10</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped table-sm&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;ab&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fach'>fach</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_start_dates'>start_dates</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_start_date'>start_date</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_date'>start_date</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fach'>fach</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_fach'>fach</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_start_date'>start_date</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_light_structure-instance_method">
  
    #<strong>print_light_structure</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>post &#39;/api/create_aula_lights&#39; do</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require_user_who_can_use_aula!'>require_user_who_can_use_aula!</span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_request_data'>parse_request_data</span><span class='lparen'>(</span><span class='symbol'>:required_keys</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:dmx</span><span class='comma'>,</span> <span class='symbol'>:number</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:dmx</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:dmx</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:desk</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:desk</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>    CREATE (e:AulaLight)
</span><span class='tstring_content'>    SET e.dmx = $dmx
</span><span class='heredoc_end'>END_OF_QUERY
</span><span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='symbol'>:result</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lefromage</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/aula.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_light_structure'>print_light_structure</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_who_can_use_aula!'>require_user_who_can_use_aula!</span>
    <span class='id identifier rubyid_file_path'>file_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/aula_light/current_config.txt</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_current_config'>current_config</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_current_config'>current_config</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_current_config'>current_config</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_login_ranking-instance_method">
  
    #<strong>print_login_ranking</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/stats.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_login_ranking'>print_login_ranking</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stats'>stats</span> <span class='op'>=</span> <span class='id identifier rubyid_get_login_stats'>get_login_stats</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_klassen_stats'>klassen_stats</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='id identifier rubyid_klassen_stats'>klassen_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>100</span> <span class='op'>*</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_STATS_D-constant" title="LOGIN_STATS_D (constant)">LOGIN_STATS_D</a></span></span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_STATS_D-constant" title="LOGIN_STATS_D (constant)">LOGIN_STATS_D</a></span></span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:klasse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='comma'>,</span> <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
<span class='tstring_content'>                MERGE (n:KlasseKomplett {klasse: $klasse})
</span><span class='tstring_content'>                ON CREATE SET n.timestamp = $timestamp
</span><span class='heredoc_end'>            END_OF_QUERY
</span>        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_klassen_ranking'>klassen_ranking</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n.klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MERGE (n:KlasseKomplett)
</span><span class='tstring_content'>        RETURN n.klasse
</span><span class='tstring_content'>        ORDER BY n.timestamp ASC;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;text-align: center;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;em&gt;Die ersten Klassen sind komplett im Dashboard angemeldet.&lt;br /&gt;Herzlichen Glückwunsch an die Klassen </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_join_with_sep'><span class='object_link'><a href="top-level-namespace.html#join_with_sep-instance_method" title="#join_with_sep (method)">join_with_sep</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_klassen_ranking'>klassen_ranking</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;b&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;/b&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>!&lt;/em&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_klassen_stats'>klassen_stats</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='id identifier rubyid_va'>va</span> <span class='op'>=</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%020d%020d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1000</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_klassen_ranking'>klassen_ranking</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_klassen_stats'>klassen_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_vb'>vb</span> <span class='op'>=</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%020d%020d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1000</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_klassen_ranking'>klassen_ranking</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_klassen_stats'>klassen_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_vb'>vb</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_va'>va</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
            <span class='id identifier rubyid_place'>place</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_percent'>percent</span> <span class='op'>=</span> <span class='id identifier rubyid_klassen_stats'>klassen_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_bgcol'>bgcol</span> <span class='op'>=</span> <span class='id identifier rubyid_get_gradient'><span class='object_link'><a href="top-level-namespace.html#get_gradient-instance_method" title="#get_gradient (method)">get_gradient</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#cc0000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#f4951b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffe617</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#80bc42</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_percent'>percent</span> <span class='op'>/</span> <span class='float'>100.0</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_star_span'>star_span</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_STATS_D-constant" title="LOGIN_STATS_D (constant)">LOGIN_STATS_D</a></span></span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_stats'>stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>complete</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_star_span'>star_span</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-star&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_place'>place</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;ranking </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_c'>c</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bgcol'>bgcol</span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_star_span'>star_span</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;span class=&#39;klasse&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;span class=&#39;percent&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_percent'>percent</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;place&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_place'>place</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_place'>place</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_mailing_list-instance_method">
  
    #<strong>print_mailing_list</strong>(io, list_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 791</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='cvar'>@@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;list_email_label&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-align: right;&#39;&gt;&lt;button data-list-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_list_email'>list_email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-warning btn-sm bu-toggle-adresses&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Adressen&amp;nbsp;&amp;nbsp;&lt;i class=&#39;fa fa-chevron-down&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody style=&#39;display: none;&#39; class=&#39;list_email_emails&#39; data-list-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_list_email'>list_email</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_an'>an</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^eltern\.</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_bn'>bn</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^eltern\.</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
        <span class='id identifier rubyid_an'>an</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_bn'>bn</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_emails'>emails</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_email'>email</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>7</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eltern von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Bei Verteiler-Ausfall (bitte in BCC)&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;2&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>; </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_mailing_lists-instance_method">
  
    #<strong>print_mailing_lists</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 830</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_mailing_lists'>print_mailing_lists</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='cvar'>@@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='rparen'>)</span>
        <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th colspan=&#39;3&#39;&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klasse.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_list_email'>list_email</span><span class='op'>|</span>
                <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gr</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>it</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group_af'>group_af</span><span class='op'>|</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.eltern</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_extra'>extra</span><span class='op'>|</span>
                        <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>antikenfahrt.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_af'>group_af</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extra'>extra</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>if</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nawi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gewi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>musik</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>medien</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='op'>|</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.eltern</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_extra'>extra</span><span class='op'>|</span>
                        <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>forschertage.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extra'>extra</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>if</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span>
                            <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th colspan=&#39;3&#39;&gt;Klassenleiter-Teams&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>team.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kl@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kl@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th colspan=&#39;3&#39;&gt;Gesamte Schule&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sus@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ev@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_list_email'>list_email</span><span class='op'>|</span>
            <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th colspan=&#39;3&#39;&gt;Forschertage&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gewi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>medien</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>musik</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nawi</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='op'>|</span>
                <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.eltern</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_extra'>extra</span><span class='op'>|</span>
                    <span class='id identifier rubyid_list_email'>list_email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>forschertage.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group_ft'>group_ft</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_extra'>extra</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th colspan=&#39;3&#39;&gt;Weitere E-Mail-Verteiler&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_remaining_mailing_lists'>remaining_mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
                <span class='id identifier rubyid_ia'>ia</span> <span class='op'>=</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_ib'>ib</span> <span class='op'>=</span> <span class='cvar'>@@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_ia'>ia</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_ib'>ib</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_list_email'>list_email</span><span class='op'>|</span>
                <span class='id identifier rubyid_print_mailing_list'>print_mailing_list</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_list_email'>list_email</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_maze_defs-instance_method">
  
    #<strong>print_maze_defs</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 729</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_maze_defs'>print_maze_defs</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_room_heights'>room_heights</span> <span class='op'>=</span> <span class='lbracket'>[</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='rbracket'>]</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_font'>font</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>maze-font-processed.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_cypher_content'>cypher_content</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_word'>word</span> <span class='op'>=</span> <span class='ivar'>@cypher_next_password</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^A-Z]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_bitmap'>bitmap</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_depth'>depth</span> <span class='op'>=</span> <span class='int'>7</span>
        <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_height'>height</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_z0'>z0</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_z1'>z1</span> <span class='op'>=</span> <span class='int'>3</span>
        <span class='id identifier rubyid_tz'>tz</span> <span class='op'>=</span> <span class='int'>2</span>
        <span class='id identifier rubyid_x0'>x0</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_y0'>y0</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_y1'>y1</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_sections'>sections</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_tunnel_length'>tunnel_length</span> <span class='op'>=</span> <span class='int'>16</span>
        <span class='lbracket'>[</span><span class='symbol'>:test</span><span class='comma'>,</span> <span class='symbol'>:for_real</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_mode'>mode</span><span class='op'>|</span>
            <span class='id identifier rubyid_ox'>ox</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_oy'>oy</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='symbol'>:for_real</span>
                <span class='id identifier rubyid_x0'>x0</span> <span class='op'>-=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_y0'>y0</span> <span class='op'>-=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_x1'>x1</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_y1'>y1</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='id identifier rubyid_x1'>x1</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span> <span class='op'>+</span> <span class='int'>1</span>
                <span class='id identifier rubyid_height'>height</span> <span class='op'>=</span> <span class='id identifier rubyid_y1'>y1</span> <span class='op'>-</span> <span class='id identifier rubyid_y0'>y0</span> <span class='op'>+</span> <span class='int'>1</span>
                <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_depth'>depth</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_z'>z</span><span class='op'>|</span>
                    <span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                    <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_height'>height</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_y'>y</span><span class='op'>|</span>
                        <span class='id identifier rubyid_level'>level</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_width'>width</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_bitmap'>bitmap</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_level'>level</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_word'>word</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i0'>i0</span><span class='op'>|</span>
                <span class='id identifier rubyid_z0'>z0</span> <span class='op'>=</span> <span class='id identifier rubyid_room_heights'>room_heights</span><span class='lbracket'>[</span><span class='id identifier rubyid_i0'>i0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_z1'>z1</span> <span class='op'>=</span> <span class='id identifier rubyid_room_heights'>room_heights</span><span class='lbracket'>[</span><span class='id identifier rubyid_i0'>i0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_tz'>tz</span> <span class='op'>=</span> <span class='id identifier rubyid_room_heights'>room_heights</span><span class='lbracket'>[</span><span class='id identifier rubyid_i0'>i0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
    
                <span class='id identifier rubyid_i1'>i1</span> <span class='op'>=</span> <span class='id identifier rubyid_i0'>i0</span> <span class='op'>+</span> <span class='int'>1</span>
                <span class='id identifier rubyid_c0'>c0</span> <span class='op'>=</span> <span class='id identifier rubyid_word'>word</span><span class='lbracket'>[</span><span class='id identifier rubyid_i0'>i0</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_c1'>c1</span> <span class='op'>=</span> <span class='id identifier rubyid_word'>word</span><span class='lbracket'>[</span><span class='id identifier rubyid_i1'>i1</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cells</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pair'>pair</span><span class='op'>|</span>
                    <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='id identifier rubyid_pair'>pair</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_ox'>ox</span>
                    <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_pair'>pair</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_oy'>oy</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='symbol'>:test</span>
                        <span class='id identifier rubyid_x0'>x0</span> <span class='op'>||=</span> <span class='id identifier rubyid_x'>x</span>
                        <span class='id identifier rubyid_x0'>x0</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_x0'>x0</span>
                        <span class='id identifier rubyid_x1'>x1</span> <span class='op'>||=</span> <span class='id identifier rubyid_x'>x</span>
                        <span class='id identifier rubyid_x1'>x1</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_x1'>x1</span>
                        <span class='id identifier rubyid_y0'>y0</span> <span class='op'>||=</span> <span class='id identifier rubyid_y'>y</span>
                        <span class='id identifier rubyid_y0'>y0</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='kw'>if</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_y0'>y0</span>
                        <span class='id identifier rubyid_y1'>y1</span> <span class='op'>||=</span> <span class='id identifier rubyid_y'>y</span>
                        <span class='id identifier rubyid_y1'>y1</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span> <span class='kw'>if</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_y1'>y1</span>
                    <span class='kw'>else</span>
                        <span class='lparen'>(</span><span class='id identifier rubyid_z0'>z0</span><span class='op'>..</span><span class='id identifier rubyid_z1'>z1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_z'>z</span><span class='op'>|</span>
                            <span class='id identifier rubyid_bitmap'>bitmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_z'>z</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_y0'>y0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_z'>z</span> <span class='op'>==</span> <span class='id identifier rubyid_tz'>tz</span>
                                <span class='kw'>if</span> <span class='id identifier rubyid_i0'>i0</span> <span class='op'>==</span> <span class='int'>0</span>
                                    <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_ox'>ox</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_oy'>oy</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                                        <span class='id identifier rubyid_bitmap'>bitmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_z'>z</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_y0'>y0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>
                                    <span class='kw'>end</span>
                                    <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_ox'>ox</span> <span class='op'>-</span> <span class='int'>1</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_oy'>oy</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                                        <span class='id identifier rubyid_bitmap'>bitmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_z'>z</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_y0'>y0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>B</span><span class='tstring_end'>&#39;</span></span>
                                    <span class='kw'>end</span>
                                <span class='kw'>end</span>
                                <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_ox'>ox</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_oy'>oy</span> <span class='op'>==</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                                    <span class='kw'>if</span> <span class='id identifier rubyid_i0'>i0</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                                        <span class='id identifier rubyid_sections'>sections</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span> <span class='op'>-</span> <span class='id identifier rubyid_tunnel_length'>tunnel_length</span> <span class='op'>+</span> <span class='int'>2</span> <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='symbol'>:for_real</span>
                                    <span class='kw'>end</span>
                                    <span class='id identifier rubyid_sections'>sections</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span> <span class='op'>+</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='symbol'>:for_real</span>
                                <span class='kw'>end</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_i1'>i1</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_word'>word</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
                    <span class='lparen'>(</span><span class='int'>1</span><span class='op'>...</span><span class='id identifier rubyid_tunnel_length'>tunnel_length</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dx'>dx</span><span class='op'>|</span>
                        <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_dx'>dx</span> <span class='op'>+</span> <span class='id identifier rubyid_ox'>ox</span>
                        <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_oy'>oy</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='symbol'>:for_real</span>
                            <span class='id identifier rubyid_bitmap'>bitmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_tz'>tz</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_y0'>y0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x0'>x0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_ox'>ox</span> <span class='op'>+=</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c1'>c1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_tunnel_length'>tunnel_length</span>
                    <span class='id identifier rubyid_oy'>oy</span> <span class='op'>+=</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c0'>c0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>exit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_font'>font</span><span class='lbracket'>[</span><span class='id identifier rubyid_c1'>c1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>entry</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_sections'>sections</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_bitmap'>bitmap</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;script type=&quot;text/plain&quot; id=&quot;level&quot;&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_bitmap'>bitmap</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_level'>level</span><span class='op'>|</span>
            <span class='id identifier rubyid_level'>level</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_each_char'>each_char</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>13</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
                    <span class='kw'>elsif</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>13</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>+</span> <span class='int'>13</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_ord'>ord</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_c'>c</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/script&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;script type=&quot;text/plain&quot; id=&quot;level_sectors&quot;&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_sections'>sections</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/script&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_password_field-instance_method">
  
    #<strong>print_password_field</strong>(io, password)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2269
2270
2271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_password_field'>print_password_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;input-group&#39;&gt;&lt;input type=&#39;password&#39; class=&#39;form-control&#39; readonly value=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_password'>password</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;min-width: 50px;&#39; /&gt;&lt;div class=&#39;input-group-append&#39;&gt;&lt;button class=&#39;btn btn-secondary btn-clipboard&#39; data-clipboard-action=&#39;copy&#39; title=&#39;Eintrag in die Zwischenablage kopieren&#39; data-clipboard-text=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_password'>password</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-clipboard&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_pending_pk5_invitations_incoming-instance_method">
  
    #<strong>print_pending_pk5_invitations_incoming</strong>(user_email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/pk5.rb', line 399</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_pending_pk5_invitations_incoming'>print_pending_pk5_invitations_incoming</span><span class='lparen'>(</span><span class='id identifier rubyid_user_email'>user_email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pending_invitations'>pending_invitations</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user_email'>user_email</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
<span class='tstring_content'>        MATCH (ou:User)&lt;-[:BELONGS_TO]-(p:Pk5)-[r:INVITATION_FOR]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        RETURN ou.email, ID(p) AS id;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_pending_invitations'>pending_invitations</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_invitations'>invitations</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_pending_invitations'>pending_invitations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
            <span class='id identifier rubyid_invitations'>invitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_invitations'>invitations</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ou.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_invitations'>invitations</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_emails'>emails</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du hast eine Einladung von &lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_join_with_sep'><span class='object_link'><a href="top-level-namespace.html#join_with_sep-instance_method" title="#join_with_sep (method)">join_with_sep</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; für eine Gruppenprüfung erhalten.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-success bu-accept-invitation&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-check&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Einladung annehmen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-danger bu-reject-invitation&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-times&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Einladung ablehnen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_phishing_groups_table-instance_method">
  
    #<strong>print_phishing_groups_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/phishing.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_phishing_groups_table'>print_phishing_groups_table</span>
  <span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>maennlich:</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>weiblich:</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>

  <span class='cvar'>@@user_info</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:teacher</span><span class='rparen'>)</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='kw'>elsif</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:schueler</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
          <span class='id identifier rubyid_gruppe'>gruppe</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;=</span> <span class='int'>6</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;=</span> <span class='int'>8</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;=</span> <span class='int'>10</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_gruppe'>gruppe</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='kw'>elsif</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_gruppe'>gruppe</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='kw'>end</span>
      <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>=</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>6</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>8</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>10</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:geschlecht</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='symbol'>:maennlich</span> <span class='op'>:</span> <span class='symbol'>:weiblich</span>

  <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;
      Du warst für die Statistik in folgender der zehn Gruppen: &lt;b&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_current_group'>current_group</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>männlich</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_current_gender'>current_gender</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/b&gt;
      &lt;div class=&#39;row&#39;&gt;
          &lt;div class=&#39;col-md-12&#39;&gt;
              &lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;
              &lt;table class=&#39;table narrow&#39;&gt;
                  &lt;thead&gt;
                      &lt;tr&gt;
                          &lt;th&gt;Geschlecht&lt;/th&gt;
                          &lt;th&gt;Klassenstufe&lt;/th&gt;
                          &lt;th&gt;&lt;/th&gt;
                          &lt;th&gt;&lt;/th&gt;
                          &lt;th&gt;&lt;/th&gt;
                          &lt;th&gt;&lt;/th&gt;
                      &lt;/tr&gt;
                  &lt;/thead&gt;
                  &lt;tbody&gt;
                      &lt;tr&gt;
                          &lt;td&gt;männlich (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;5/6 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;7/8 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;9/10 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;11/12 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:maennlich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Lehrkraft (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:maennlich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                      &lt;/tr&gt;
                      &lt;tr&gt;
                          &lt;td&gt;weiblich (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:weiblich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;5/6 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>5/6</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:weiblich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;7/8 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7/8</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:weiblich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;9/10 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>9/10</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:weiblich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;11/12 (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>11/12</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                          &lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marked</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_gender'>current_gender</span> <span class='op'>==</span> <span class='symbol'>:weiblich</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_group'>current_group</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Lehrkraft (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nutzerzahlen'>nutzerzahlen</span><span class='lbracket'>[</span><span class='symbol'>:weiblich</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrkraft</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;
                      &lt;/tr&gt;
                  &lt;/tbody&gt;
              &lt;/table&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
      &lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
      <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_phishing_mail-instance_method">
  
    #<strong>print_phishing_mail</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/phishing.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_phishing_mail'>print_phishing_mail</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_us'>us</span> <span class='op'>=</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;text-comment&#39;&gt;
    &lt;div class=&#39;from&#39;&gt;
        &lt;h4&gt;&lt;mark title=&#39;Rechtschreibfehler&#39;&gt;Dein&lt;/mark&gt; E-Mail-Adresse wurde für eine Löschung markiert&lt;/h4&gt;
        &lt;p&gt;
            &lt;b&gt;Dashboard Gymnasium Steglitz&lt;/b&gt; &amp;lt;noreply@&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&amp;gt;&lt;br&gt;
            &lt;b&gt;Via&lt;/b&gt; &#39;&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&#39;&lt;br&gt;
            &lt;b&gt;An&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Antworten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Allen antworten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-success&#39;&gt;Weiterleiten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-danger&#39;&gt;Löschen&lt;/button&gt;
        &lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&#39;message&#39;&gt;
        &lt;p&gt;Hallo!&lt;/p&gt;
        &lt;p&gt;Da Deine E-Mail-Adresse in der Datenbank nicht mehr vorkommt, wurde &lt;mark title=&#39;Rechtschreibfehler&#39;&gt;es&lt;/mark&gt; für eine &lt;b&gt;Löschung&lt;/b&gt; markiert.&lt;/p&gt;
        &lt;p&gt;&lt;mark title=&#39;Drohung&#39; class=&#39;threat&#39;&gt;Bitte melde &lt;mark title=&#39;Rechtschreibfehler&#39;&gt;dich sich&lt;/mark&gt; über diesen &lt;a href=&#39;phishing&#39;&gt;Link&lt;/a&gt; im Dashboard an, wenn du den Vorgang abbrechen möchtest.&lt;/mark&gt;&lt;/p&gt;
        &lt;p&gt;Der Link ist personalisiert und enthält persönliche Infos, gib diesen Link auf keinen Fall weiter.&lt;/p&gt;
        &lt;p&gt;Wenn du alle Schritte richtig gemacht hast leuchtet dieser &lt;mark title=&#39;Rechtschreibfehler&#39;&gt;Hacken&lt;/mark&gt; grün auf: ☑️&lt;/p&gt;
    &lt;/div&gt;
    &lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_ms1'>ms1</span> <span class='op'>=</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;text-comment&#39;&gt;
                &lt;div class=&#39;from&#39;&gt;
                    &lt;h4&gt;Deine E-Mail-Adresse wurde für eine Löschung markiert&lt;/h4&gt;
                    &lt;p&gt;
                        &lt;b&gt;Dashboard Gymnasium Steglitz&lt;/b&gt; &amp;lt;noreply@&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&amp;gt;&lt;br&gt;
                        &lt;b&gt;Via&lt;/b&gt; &#39;&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&#39;&lt;br&gt;
                        &lt;b&gt;An&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br&gt;
                    &lt;/p&gt;
                    &lt;p&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Allen antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-success&#39;&gt;Weiterleiten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-danger&#39;&gt;Löschen&lt;/button&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&#39;message&#39;&gt;
                    &lt;p&gt;Hallo!&lt;/p&gt;
                    &lt;p&gt;Da Deine E-Mail-Adresse in der Datenbank nicht mehr vorkommt, wurde sie für eine &lt;b&gt;Löschung&lt;/b&gt; markiert.&lt;/p&gt;
                    &lt;p&gt;&lt;mark title=&#39;Drohung&#39; class=&#39;threat&#39;&gt;Bitte melde &lt;mark title=&#39;Rechtschreibfehler&#39;&gt;dich sich&lt;/mark&gt; über diesen &lt;a href=&#39;phishing&#39;&gt;Link&lt;/a&gt; im Dashboard an, wenn du den Vorgang abbrechen möchtest.&lt;/mark&gt;&lt;/p&gt;
                    &lt;p&gt;Der Link ist personalisiert und enthält persönliche Infos, gib diesen Link auf keinen Fall weiter.&lt;/p&gt;
                    &lt;p&gt;Viele Grüße,&lt;br&gt;Dashboard Gymnasium Steglitz&lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_ms2'>ms2</span> <span class='op'>=</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;text-comment&#39;&gt;
                &lt;div class=&#39;from&#39;&gt;
                    &lt;h4&gt;Deine E-Mail-Adresse wurde für eine Löschung markiert&lt;/h4&gt;
                    &lt;p&gt;
                        &lt;b&gt;Dashboard Gymnasium Steglitz&lt;/b&gt; &amp;lt;noreply@&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&amp;gt;&lt;br&gt;
                        &lt;b&gt;Via&lt;/b&gt; &#39;&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&#39;&lt;br&gt;
                        &lt;b&gt;An&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br&gt;
                    &lt;/p&gt;
                    &lt;p&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Allen antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-success&#39;&gt;Weiterleiten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-danger&#39;&gt;Löschen&lt;/button&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&#39;message&#39;&gt;
                    &lt;p&gt;Hallo!&lt;/p&gt;
                    &lt;p&gt;Da Deine E-Mail-Adresse in der Datenbank nicht mehr vorkommt, wurde sie für eine &lt;b&gt;Löschung&lt;/b&gt; markiert.&lt;/p&gt;
                    &lt;p&gt;&lt;mark title=&#39;Drohung&#39; class=&#39;threat&#39;&gt;Bitte melde dich über diesen &lt;a href=&#39;phishing&#39;&gt;Link&lt;/a&gt; im Dashboard an, wenn du den Vorgang abbrechen möchtest.&lt;/mark&gt;&lt;/p&gt;
                    &lt;p&gt;Der Link ist personalisiert und enthält persönliche Infos, gib diesen Link auf keinen Fall weiter.&lt;/p&gt;
                    &lt;p&gt;Viele Grüße,&lt;br&gt;Dashboard Gymnasium Steglitz&lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_os'>os</span> <span class='op'>=</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;text-comment&#39;&gt;
                &lt;div class=&#39;from&#39;&gt;
                    &lt;h4&gt;Deine E-Mail-Adresse wurde für eine Löschung markiert&lt;/h4&gt;
                    &lt;p&gt;
                        &lt;b&gt;Dashboard Gymnasium Steglitz&lt;/b&gt; &amp;lt;noreply@&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&amp;gt;&lt;br&gt;
                        &lt;b&gt;Via&lt;/b&gt; &#39;&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&#39;&lt;br&gt;
                        &lt;b&gt;An&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br&gt;
                    &lt;/p&gt;
                    &lt;p&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Allen antworten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-success&#39;&gt;Weiterleiten&lt;/button&gt;
                        &lt;button class=&#39;btn btn-outline-danger&#39;&gt;Löschen&lt;/button&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div class=&#39;message&#39;&gt;
                    &lt;p&gt;Hallo!&lt;/p&gt;
                    &lt;p&gt;Da Deine E-Mail-Adresse in der Datenbank nicht mehr vorkommt, wurde sie für eine &lt;b&gt;Löschung&lt;/b&gt; markiert.&lt;/p&gt;
                    &lt;p&gt;&lt;mark title=&#39;Drohung&#39; class=&#39;threat&#39;&gt;Bitte melde dich über diesen &lt;a href=&#39;phishing&#39;&gt;Link&lt;/a&gt; im Dashboard an, wenn du den Vorgang abbrechen möchtest.&lt;/mark&gt;&lt;/p&gt;
                    &lt;p&gt;Der Link ist personalisiert und enthält persönliche Infos, gib diesen Link auf keinen Fall weiter.&lt;/p&gt;
                    &lt;p&gt;Viele Grüße,&lt;br&gt;Dashboard Gymnasium Steglitz&lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_teacher'>teacher</span> <span class='op'>=</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;text-comment&#39;&gt;
    &lt;div class=&#39;from&#39;&gt;
        &lt;h4&gt;Ihre E-Mail-Adresse wurde für eine Löschung markiert&lt;/h4&gt;
        &lt;p&gt;
            &lt;b&gt;Dashboard Gymnasium Steglitz&lt;/b&gt; &amp;lt;noreply@&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&amp;gt;&lt;br&gt;
            &lt;b&gt;Via&lt;/b&gt; &#39;&lt;mark title=&#39;Keine offizielle Schul-Domain&#39;&gt;steglitzdashboard.de&lt;/mark&gt;&#39;&lt;br&gt;
            &lt;b&gt;An&lt;/b&gt; </span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;br&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Antworten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-primary&#39;&gt;Allen antworten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-success&#39;&gt;Weiterleiten&lt;/button&gt;
            &lt;button class=&#39;btn btn-outline-danger&#39;&gt;Löschen&lt;/button&gt;
        &lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&#39;message&#39;&gt;
        &lt;p&gt;Hallo!&lt;/p&gt;
        &lt;p&gt;Da Ihre E-Mail-Adresse in der Datenbank nicht mehr vorkommt, wurde sie für eine &lt;b&gt;Löschung&lt;/b&gt; markiert.&lt;/p&gt;
        &lt;p&gt;&lt;mark title=&#39;Drohung&#39; class=&#39;threat&#39;&gt;Bitte melden Sie sich über diesen &lt;a href=&#39;[link]&#39;&gt;Link&lt;/a&gt; im Dashboard an, wenn Sie den Vorgang abbrechen möchten.&lt;/mark&gt;&lt;/p&gt;
        &lt;p&gt;Der Link ist personalisiert und enthält persönliche Infos, geben Sie diesen Link auf keinen Fall weiter.&lt;/p&gt;
        &lt;p&gt;Viele Grüße&lt;br&gt;Dashboard Gymnasium Steglitz&lt;/p&gt;
    &lt;/div&gt;
    &lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_running_phishing_training?'>running_phishing_training?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_us'>us</span>
            <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_ms1'>ms1</span>
            <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_ms2'>ms2</span>
            <span class='kw'>elsif</span> <span class='lbracket'>[</span><span class='int'>11</span><span class='comma'>,</span> <span class='int'>12</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_os'>os</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_teacher'>teacher</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_phishing_panel-instance_method">
  
    #<strong>print_phishing_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 683</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_phishing_panel'>print_phishing_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_running_phishing_training_hint?'>running_phishing_training_hint?</span>
        <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Phishing Prävention&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Statistiken zu der E-Mail vom </span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_RECEIVING_DATE</span><span class='embexpr_end'>}</span><span class='tstring_content'> sind nun online.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;a href=&#39;/phishing&#39; class=&#39;btn btn-primary&#39;&gt;Phishing Prävention&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du kannst auch an unserer Umfrage teilnehmen.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;button class=&#39;btn btn-success bu-launch-poll&#39; data-poll-run-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'>PHISHING_POLL_RUN_ID</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Zur Umfrage&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projekt_assigned_sus-instance_method">
  
    #<strong>print_projekt_assigned_sus</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 341</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projekt_assigned_sus'>print_projekt_assigned_sus</span>
    <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        RETURN p;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_sus'>sus</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:nr</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)-[r:ASSIGNED_TO]-&gt;(p:Projekt {nr: $nr})
</span><span class='tstring_content'>        RETURN u.email, r;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:schueler</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_sus'>sus</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sus'>sus</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_ia'>ia</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_ib'>ib</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_ia'>ia</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>7</span>
        <span class='id identifier rubyid_ib'>ib</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>7</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_ia'>ia</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_ib'>ib</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_ia'>ia</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_ib'>ib</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_ia'>ia</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_ib'>ib</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die folgenden Schülerinnen und Schüler nehmen an deinem Projekt teil. Unten in der Tabelle findest du E-Mail-Verteiler, die du nutzen kannst, um alle Teilnehmer:innen und / oder deren Eltern zu erreichen. Nutze deine schulische E-Mail-Adresse, um die Verteiler zu verwenden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Nr.&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th style=&#39;width: 30em;&#39;&gt;E-Mail&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_sus'>sus</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div class=&#39;icon nav_avatar&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avatar-md</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_prefix'>prefix</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;user_row&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39;&gt;&lt;em&gt;E-Mail-Verteiler: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eltern.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Alle Eltern eurer Teilnehmer:innen</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Alle Teilnehmer:innen</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/em&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>projekt-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_DOMAIN-constant" title="MAILING_LIST_DOMAIN (constant)">MAILING_LIST_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projekt_interesse-instance_method">
  
    #<strong>print_projekt_interesse</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projekt_interesse'>print_projekt_interesse</span>
    <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        RETURN p;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_votes'>votes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:nr</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (u:User)-[r:VOTED_FOR]-&gt;(p:Projekt {nr: $nr})
</span><span class='tstring_content'>        RETURN u.email, r;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:schueler</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
        <span class='id identifier rubyid_vote'>vote</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:vote</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klassenstufe/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vote/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klassenstufe&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='op'>..</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;Σ&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_ndash'>ndash</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-muted&#39;&gt;&amp;ndash;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_CODEPOINTS-constant" title="PROJEKT_VOTE_CODEPOINTS (constant)">PROJEKT_VOTE_CODEPOINTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_LABELS-constant" title="PROJEKT_VOTE_LABELS (constant)">PROJEKT_VOTE_LABELS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='op'>..</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vote/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Σ&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='op'>..</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klassenstufe/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projekt_interesse_stats-instance_method">
  
    #<strong>print_projekt_interesse_stats</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projekt_interesse_stats'>print_projekt_interesse_stats</span>
    <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>        MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>        RETURN p;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>        <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/projekttage/votes/project-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ts_data'>ts_data</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_ts_data'>ts_data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/projekttage/votes/ts.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Vorschau deiner Projektgruppe&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Aktuell würde deine Projektgruppe ungefähr wie folgt aussehen:&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;ul style=&#39;list-style: disc; margin-left: 1.5em;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_m</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Teilnehmer:innen, davon </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_m</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Jungen und </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Mädchen&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;Klassenstufen:&lt;ul style=&#39;list-style: disc; margin-left: 1.5em;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>5</span><span class='rparen'>)</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>9</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Kind</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>er</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> aus der </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Klasse&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;Motivation:&lt;ul style=&#39;list-style: disc; margin-left: 1.5em;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Kind</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>er</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> mit der Wahl: </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_CODEPOINTS-constant" title="PROJEKT_VOTE_CODEPOINTS (constant)">PROJEKT_VOTE_CODEPOINTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> »</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_LABELS-constant" title="PROJEKT_VOTE_LABELS (constant)">PROJEKT_VOTE_LABELS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>«&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_m</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>10</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Hinweis: Du kannst die Motivation deiner Teilnehmer:innen erhöhen, indem du ggfs. deinen Titel, deinen Werbetext und / oder dein Projektbild aktualisierst.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte beachte, dass sich die Zusammensetzung deiner Gruppe noch ändern wird, abhängig vom weiteren Wahlverhalten, Umwahlen oder Anpassungen in eurem Projekt.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bisher haben </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_voted</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_total</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Schülerinnen und Schülern ihre Projekte gewählt:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;progress&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_voted</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_total</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;bg-success progress-bar progress-bar-striped progress-bar-animated&#39; role=&#39;progressbar&#39; style=&#39;width: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='embexpr_end'>}</span><span class='tstring_content'>%;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projekttage_assignment_summary-instance_method">
  
    #<strong>print_projekttage_assignment_summary</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 667</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projekttage_assignment_summary'>print_projekttage_assignment_summary</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_color_for_error'>color_for_error</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#4aa03f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#fad31c</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#f4951b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#bc2326</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_projekte'>projekte</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_assign_results'>assign_results</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/projekttage/votes/assign-result.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>            MATCH (u:User)-[:ASSIGNED_TO]-&gt;(p:Projekt)
</span><span class='tstring_content'>            RETURN u.email, p.nr, p;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_nr'>nr</span><span class='op'>|</span>
            <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Freie Plätze&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm table-striped&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Projekt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Freie Plätze&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_projekte'>projekte</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;nur </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Klasse&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:min_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. – </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:max_klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Klasse&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_sus_for_projekt'>sus_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_nr'>nr</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> frei&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
            <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='int'>7</span> <span class='kw'>if</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;</span> <span class='int'>10</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm table-striped&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th style=&#39;text-align: right;&#39;&gt;Nr.&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Projekt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
                <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='id identifier rubyid_assign_results'>assign_results</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error_for_email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-align: right;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_content'>.&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-align: center;&#39;&gt;&lt;span style=&#39;color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_color_for_error'>color_for_error</span><span class='lbracket'>[</span><span class='id identifier rubyid_error'>error</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;⬤&lt;/span&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekte'>projekte</span><span class='lbracket'>[</span><span class='id identifier rubyid_projekt_for_email'>projekt_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projekttage_vote_summary-instance_method">
  
    #<strong>print_projekttage_vote_summary</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 414</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projekttage_vote_summary'>print_projekttage_vote_summary</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_votes'>votes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
<span class='tstring_content'>            MATCH (u:User)-[r:VOTED_FOR]-&gt;(p:Projekt)
</span><span class='tstring_content'>            RETURN u.email, r, p.nr;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>            <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_emails'>emails</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:schueler</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
            <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_vote'>vote</span> <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:vote</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klassenstufe'>klassenstufe</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p.nr</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>votes_by_email/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>

        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>votes_by_email/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>10</span> <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>10</span>
                <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>votes_by_klasse/</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='int'>0</span>
                <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Projizierte Zusammensetzung der Projektgruppen&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Aus dieser Tabelle lässt sich ganz gut ablesen, welche Projekte gut ankommen und welche eher weniger.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Projekt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_CODEPOINTS-constant" title="PROJEKT_VOTE_CODEPOINTS (constant)">PROJEKT_VOTE_CODEPOINTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_ndash'>ndash</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-muted&#39;&gt;&amp;ndash;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_ts_data'>ts_data</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>begin</span>
            <span class='id identifier rubyid_ts_data'>ts_data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/projekttage/votes/ts.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>rescue</span>
            <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_all_project_data'>all_project_data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_get_projekte'>get_projekte</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
            <span class='id identifier rubyid_all_project_data'>all_project_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='kw'>begin</span>
                <span class='id identifier rubyid_all_project_data'>all_project_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/internal/projekttage/votes/project-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='kw'>rescue</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_get_projekte'>get_projekte</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='id identifier rubyid_score_for_project'>score_for_project</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_all_project_data'>all_project_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_score_for_project'>score_for_project</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_all_project_data'>all_project_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_projekt'>projekt</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='id identifier rubyid_project_data'>project_data</span> <span class='op'>=</span> <span class='id identifier rubyid_all_project_data'>all_project_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>klasse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span> <span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_vote'>vote</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span> <span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_m</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_m</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>geschlecht_w</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Projizierte Fehlerverteilung&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Aus den projizierten Gruppen ergibt sich eine Fehlerverteilung. Der Fehler bei einer Projektzuordnung berechnet sich aus der Differenz zwischen dem höchsten Level, welches von einem SuS gewählt wurde und dem gewählten Level des zugeordneten Projekts. Wenn also jemand Projekt A mit drei Sternen gewählt hat und Projekt B bekommt, dass er gar nicht gewählt hat (0 Sterne), dann ist dieser Fehler 3 – kleinere Fehler sind also besser. Die Fehlerverteilung wird mit der Zeit schlechter, weil mehr SuS ihre Wahl getroffen haben.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bisher haben </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_voted</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> von </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_total</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> Schülerinnen und Schülern ihre Projekte gewählt:</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;progress mb-3&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_voted</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>email_count_total</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;bg-success progress-bar progress-bar-striped progress-bar-animated&#39; role=&#39;progressbar&#39; style=&#39;width: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='embexpr_end'>}</span><span class='tstring_content'>%;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Fehler&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_error'>error</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;min-width: 3.5em; text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Anteil&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_error'>error</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%1.2f%%</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ts_data'>ts_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>errors</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_error'>error</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>100.0</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Projektinteresse&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Projekt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_CODEPOINTS-constant" title="PROJEKT_VOTE_CODEPOINTS (constant)">PROJEKT_VOTE_CODEPOINTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_ndash'>ndash</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;text-muted&#39;&gt;&amp;ndash;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_get_projekte'>get_projekte</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
            <span class='lparen'>(</span><span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_b'>b</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&lt;=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span>
        <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_projekt'>projekt</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span> <span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_vote'>vote</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span> <span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:nr</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span> <span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Interesse pro Klassenstufe&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Klassenstufe&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th style=&#39;text-align: center;&#39; class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Klassenstufe</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vote'>vote</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_CODEPOINTS-constant" title="PROJEKT_VOTE_CODEPOINTS (constant)">PROJEKT_VOTE_CODEPOINTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#PROJEKT_VOTE_LABELS-constant" title="PROJEKT_VOTE_LABELS (constant)">PROJEKT_VOTE_LABELS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
                <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+=</span> <span class='id identifier rubyid_votes'>votes</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vote'>vote</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_sum'>sum</span> <span class='kw'>if</span> <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Σ</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cbl</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;Anzahl der gewählten Projekte pro Klasse&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-sm&#39; style=&#39;width: unset;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Ausgewählte Projekte&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;keins&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>10</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_count'>count</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>10</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>&lt;=</span> <span class='int'>9</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WK</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>10</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_count'>count</span><span class='op'>|</span>
                <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>votes_by_klasse/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_votes_for_projekt'>votes_for_projekt</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_ndash'>ndash</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td class=&#39;cbl&#39; style=&#39;text-align: center;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>

        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_projektwahl_countdown_panel-instance_method">
  
    #<strong>print_projektwahl_countdown_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 621</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_projektwahl_countdown_panel'>print_projektwahl_countdown_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_user_eligible_for_projektwahl?'>user_eligible_for_projektwahl?</span>
        <span class='id identifier rubyid_vote_count'>vote_count</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MATCH (u:User {email: $email})-[:VOTED_FOR]-&gt;(p:Projekt) RETURN COUNT(p) AS count;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>count</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_vote_count'>vote_count</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>3</span>
                <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Wähle deine Lieblingsprojekte!&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du findest den Projektkatalog im Menü unter »Projekttage«.</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>11</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span>
            <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>                    MATCH (p:Projekt)-[:ORGANIZED_BY]-&gt;(u:User {email: $email})
</span><span class='tstring_content'>                    RETURN p;
</span><span class='heredoc_end'>                END_OF_QUERY
</span>                <span class='kw'>unless</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_projekt'>projekt</span> <span class='op'>=</span> <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>p</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:photo</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                    <span class='id identifier rubyid_emoji'>emoji</span> <span class='op'>=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>😭</span><span class='words_sep'> </span><span class='tstring_content'>🥲</span><span class='words_sep'> </span><span class='tstring_content'>😄</span><span class='tstring_end'>)</span></span><span class='lbracket'>[</span><span class='id identifier rubyid_count'>count</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>2</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:ts_updated</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='int'>3600</span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Dein Angebot für die Projekttage&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span style=&#39;font-size: 300%; float: right; margin-left: 10px; margin-bottom: 10px;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_emoji'>emoji</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du hast noch keinen Werbetext für dein Projekt eingegeben und auch kein Bild hochgeladen. Bitte trage diese Informationen unter »Projekttage« nach und hilf mit, dass dieser arme Smiley wieder glücklich wird.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
                                <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_projekt'>projekt</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du hast zwar schon ein Bild hochgeladen, aber noch keinen Werbetext geschrieben. You can do it!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                                <span class='kw'>else</span>
                                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du hast zwar schon einen Werbetext geschrieben, aber noch kein Bild hochgeladen. You can do it!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                                <span class='kw'>end</span>
                            <span class='kw'>elsif</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>2</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Danke, dass du alle Informationen eingetragen hast!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                            <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;</span> <span class='int'>2</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;a href=&#39;/projekttage_orga&#39; class=&#39;btn btn-success&#39; style=&#39;white-space: normal;&#39;&gt;Lass uns diesen Smiley wieder glücklich machen!&lt;/a&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_public_event_table-instance_method">
  
    #<strong>print_public_event_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/public_event.rb', line 196</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_public_event_table'>print_public_event_table</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_refresh_public_event_config'>refresh_public_event_config</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ts'>ts</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y-%m-%dT%H:%M</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Es sind momentan keine Veranstaltungen geplant, bitte versuchen Sie es später noch einmal.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_event_index'>event_index</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event_index'>event_index</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_not_yet'>not_yet</span> <span class='op'>=</span> <span class='kw'>false</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:not_before</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:not_before</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_not_yet'>not_yet</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_not_yet'>not_yet</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:not_before_description</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:not_before_description</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_sign_ups'>sign_ups</span> <span class='op'>=</span> <span class='id identifier rubyid_get_sign_ups_for_public_event'>get_sign_ups_for_public_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:auto_rows</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39; data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;display: none;&#39; class=&#39;event-title&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-narrow narrow th-middle&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_colspan'>colspan</span> <span class='op'>=</span> <span class='int'>1</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;width: 180px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_colspan'>colspan</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;width: auto;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th colspan=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colspan'>colspan</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                    <span class='id identifier rubyid_printed_row'>printed_row</span> <span class='op'>=</span> <span class='kw'>false</span>
                    <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                        <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:booking_text</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
                        <span class='kw'>while</span> <span class='kw'>true</span>
                            <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                            <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='int'>1</span>
                            <span class='id identifier rubyid_balance'>balance</span> <span class='op'>=</span> <span class='int'>1</span>
                            <span class='kw'>while</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_balance'>balance</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                                <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_balance'>balance</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>}</span><span class='tstring_end'>&#39;</span></span>
                                <span class='id identifier rubyid_balance'>balance</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{</span><span class='tstring_end'>&#39;</span></span>
                                <span class='id identifier rubyid_length'>length</span> <span class='op'>+=</span> <span class='int'>1</span>
                            <span class='kw'>end</span>
                            <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span>
                            <span class='kw'>begin</span>
                                <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>rescue</span>
                                <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error while evaluating for </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='ivar'>@session_user</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
                                <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_code'>code</span>
                                <span class='id identifier rubyid_raise'>raise</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:deadline</span><span class='rbracket'>]</span>
                            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_ts'>ts</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:deadline</span><span class='rbracket'>]</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>false</span>
                        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_not_yet'>not_yet</span>
                            <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                        <span class='kw'>unless</span> <span class='id identifier rubyid_printed_row'>printed_row</span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_printed_row'>printed_row</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;width: 5.3em;&#39; class=&#39;btn </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-info</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu-book-public-event&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;&lt;div style=&#39;display: none;&#39; class=&#39;booking-text&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_text'>text</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_printed_row'>printed_row</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39; data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;display: none;&#39; class=&#39;event-title&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-narrow narrow th-middle&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_colspan'>colspan</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;width: 180px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_colspan'>colspan</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;width: auto;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th colspan=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colspan'>colspan</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                        <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:booking_text</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
                        <span class='kw'>while</span> <span class='kw'>true</span>
                            <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                            <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='int'>1</span>
                            <span class='id identifier rubyid_balance'>balance</span> <span class='op'>=</span> <span class='int'>1</span>
                            <span class='kw'>while</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_balance'>balance</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                                <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_balance'>balance</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>}</span><span class='tstring_end'>&#39;</span></span>
                                <span class='id identifier rubyid_balance'>balance</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>{</span><span class='tstring_end'>&#39;</span></span>
                                <span class='id identifier rubyid_length'>length</span> <span class='op'>+=</span> <span class='int'>1</span>
                            <span class='kw'>end</span>
                            <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='rbracket'>]</span>
                            <span class='kw'>begin</span>
                                <span class='id identifier rubyid_text'>text</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                            <span class='kw'>rescue</span>
                                <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error while evaluating for </span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='ivar'>@session_user</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
                                <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='id identifier rubyid_code'>code</span>
                                <span class='id identifier rubyid_raise'>raise</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>false</span>
                        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_not_yet'>not_yet</span>
                            <span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-outline-secondary</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-info</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> bu-book-public-event&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booked_out'>booked_out</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;&lt;div style=&#39;display: none;&#39; class=&#39;booking-text&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_text'>text</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_roles-instance_method">
  
    #<strong>print_roles</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 731</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_roles'>print_roles</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped table-narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Beschreibung&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Aktiv&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Ursprung&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Nutzer&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_role'>role</span><span class='comma'>,</span> <span class='id identifier rubyid_description'>description</span><span class='op'>|</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_description'>description</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;i class=&#39;fa fa-check text-success&#39;&gt;&lt;/i&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:role_transitive_origin</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:role_transitive_origin</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;direkt gesetzt&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;i class=&#39;fa fa-times text-danger&#39;&gt;&lt;/i&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:developer</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn-toggle-tr-below btn btn-xs btn-warning&#39; style=&#39;width: 8em;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Nutzer&amp;nbsp;&amp;nbsp;&lt;i class=&#39;fa fa-chevron-down&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr style=&#39;display: none;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;4&#39; style=&#39;font-style: italic; font-size: 90%;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='id identifier rubyid_role'>role</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_salzh_panel-instance_method">
  
    #<strong>print_salzh_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 400</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_salzh_panel'>print_salzh_panel</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
        <span class='id identifier rubyid_salzh_status'>salzh_status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_salzh_status_for_emails'><span class='object_link'><a href="#get_salzh_status_for_emails-class_method" title="Main.get_salzh_status_for_emails (method)">get_salzh_status_for_emails</a></span></span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_end_date'>end_date</span> <span class='op'>=</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='symbol'>:status_end_date</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:salzh</span>
                <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span>
                <span class='kw'>while</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='cvar'>@@holiday_dates</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_p'>p</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;strong&gt;Unterricht im saLzH&lt;/strong&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du bist &lt;strong&gt;bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; für das schulisch angeleite Lernen zu Hause (saLzH) eingetragen. Bitte schau regelmäßig in deinem Stunden&amp;shy;plan nach, ob du Aufgaben in der Nextcloud oder im Lernraum bekommst oder ob Stunden per Jitsi durch&amp;shy;geführt werden. &lt;strong&gt;Ab dem </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; erwarten wir dich wieder in der Schule.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:contact_person</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;strong&gt;Kontaktperson&lt;/strong&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du bist &lt;strong&gt;bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; als Kontakt&amp;shy;person markiert. Das heißt, dass du weiterhin in die Schule kommen darfst, aber einige Regeln beachten musst. Falls du freiwillig zu Hause bleiben möchtest, müssen deine Eltern dem Sekretariat &lt;a href=&#39;mailto:sekretariat@gymnasiumsteglitz.de&#39;&gt;per E-Mail Bescheid geben&lt;/a&gt;. Die folgenden Regeln gelten für dich:&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;ul style=&#39;padding-left: 1.5em;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;tägliche Testung vor Beginn der Schultages (ein Test vom Vortag, z. B. aus einem Schnell&amp;shy;test&amp;shy;zentrum, kann nicht akzeptiert werden)&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;du bekommst von deiner Tutorin / deinem Tutor am Freitag für jeden Tag des Wochenendes, an du noch Kontakt&amp;shy;person bist, einen Schnelltest mit nach Hause&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;du bekommst von deiner Klassen&amp;shy;leitung (</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@klassenleiter</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_last_name</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> oder </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>) am Freitag für jeden Tag des Wochenendes, an du noch Kontakt&amp;shy;person bist, einen Schnelltest mit nach Hause&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;falls du Symptome (Husten, Fieber, Kopfschmerzen, …) zeigst, darfst du das Schulhaus nicht mehr betreten&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;du darfst nicht mehr am gemeinsamen Essen in der Mensa teilnehmen&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;während des Sport&amp;shy;unter&amp;shy;richts (Umkleide, Sport in der Halle) musst du durch&amp;shy;gehend eine Maske tragen – ist dies aufgrund der körperlichen Betätigung nicht möglich, nimmst du nicht am Sportunterricht teil&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_salzh_status'>salzh_status</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:hotspot_klasse</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;strong&gt;Klasse mit erhöhtem Infektionsaufkommen&lt;/strong&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Da in deiner Klasse momentan ein erhöhtes Infektionsgeschehen herrscht, wirst du &lt;strong&gt;bis zum </span><span class='embexpr_beg'>#{</span><span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; täglich getestet.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_get_current_salzh_status_for_logged_in_teacher'>get_current_salzh_status_for_logged_in_teacher</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_hide_explanations'>hide_explanations</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hide</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>            MATCH (u:User {email: $email})
</span><span class='tstring_content'>            RETURN COALESCE(u.hide_salzh_panel_explanation, false) AS hide;
</span><span class='heredoc_end'>        END_OF_QUERY
</span>        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># io.puts &quot;&lt;p&gt;&lt;strong&gt;&lt;div style=&#39;display: inline-block; padding: 4px; margin: -4px; border-radius: 4px&#39; class=&#39;bg-warning&#39;&gt;SuS im saLzH&lt;/div&gt;&lt;/strong&gt;&lt;/p&gt;&quot;
</span>            <span class='id identifier rubyid_contact_person_count'>contact_person_count</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_salzh_count'>salzh_count</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_all_klassen'>all_klassen</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_entry_for_email'>entry_for_email</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='id identifier rubyid_entries'>entries</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> 
                <span class='id identifier rubyid_entry_for_email'>entry_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:contact_person</span>
                    <span class='id identifier rubyid_contact_person_count'>contact_person_count</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:salzh</span>
                    <span class='id identifier rubyid_salzh_count'>salzh_count</span> <span class='op'>+=</span> <span class='int'>1</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_all_klassen'>all_klassen</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_all_klassen'>all_klassen</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_spans'>spans</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_contact_person_count'>contact_person_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_spans'>spans</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_contact_person_count'>contact_person_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;nbsp;SuS, die Kontaktpersonen sind</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_salzh_count'>salzh_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_spans'>spans</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_salzh_count'>salzh_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>&amp;nbsp;SuS im saLzH</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sie haben momentan </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spans'>spans</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;strong&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;/strong&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin: 0 -10px 0 -10px; overflow-x: clip;&#39;&gt;&lt;table class=&#39;table table-sm narrow&#39; style=&#39;width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th&gt;Klasse&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_all_klassen'>all_klassen</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='id identifier rubyid_all_klassen'>all_klassen</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='symbol'>:salzh</span><span class='comma'>,</span> <span class='symbol'>:contact_person</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_entry_for_email'>entry_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_first_row'>first_row</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr class=&#39;klasse-click-row&#39; data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;td&gt;Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='lbracket'>[</span><span class='symbol'>:contact_person</span><span class='comma'>,</span> <span class='symbol'>:salzh</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_status'>status</span><span class='op'>|</span>
                            <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_status'>status</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span class=&#39;salzh-badge salzh-badge-big bg-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='symbol'>:contact_person</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>warning</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>danger</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;span&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_email_for_klasse_and_status'>email_for_klasse_and_status</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_status'>status</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/span&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody style=&#39;display: none;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='kw'>false</span>
                    <span class='id identifier rubyid_badge'>badge</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span style=&#39;position: relative; top: -1px;&#39; class=&#39;salzh-badge salzh-badge-big bg-</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_COLORS-constant" title="SALZH_MODE_COLORS (constant)">SALZH_MODE_COLORS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_entry_for_email'>entry_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SALZH_MODE_ICONS-constant" title="SALZH_MODE_ICONS (constant)">SALZH_MODE_ICONS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_entry_for_email'>entry_for_email</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/i&gt;&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td colspan=&#39;2&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_badge'>badge</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='kw'>unless</span> <span class='id identifier rubyid_first_row'>first_row</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p style=&#39;cursor: pointer;&#39; onclick=\&quot;$(&#39;#salzh_explanation&#39;).slideDown();\&quot;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;Was bedeutet das?&lt;/strong&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div id=&#39;salzh_explanation&#39; style=&#39;display: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hide_explanations'>hide_explanations</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>block</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_salzh_count'>salzh_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;&lt;span class=&#39;bg-danger&#39; style=&#39;padding: 0.2em 0.5em; font-weight: bold; border-radius: 0.25em; color: #fff;&#39;&gt;saLzH:&lt;/span&gt;&lt;/strong&gt; Es handelt sich um SuS, die aus unter&amp;shy;schied&amp;shy;lichen Gründen im saLzH sind (z. B. positiv getestet / als Kontaktperson nach Rückmeldung der Eltern bestätigt freiwillig im saLzH / Aussetzung der Präsenz&amp;shy;pflicht). Bitte ermöglichen Sie diesen SuS eine Teilnahme am Unterricht.</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_contact_person_count'>contact_person_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;strong&gt;&lt;span class=&#39;bg-warning&#39; style=&#39;padding: 0.2em 0.5em; font-weight: bold; border-radius: 0.25em;&#39;&gt;Kontaktpersonen:&lt;/span&gt;&lt;/strong&gt; Diese SuS wurden als Kontaktperson identifiziert, besuchen aber trotzdem weiterhin die Schule. Für sie gilt:</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;ul style=&#39;padding-left: 1.5em;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;tägliche Testung vor Beginn der Schultages (ein Test vom Vortag, z. B. aus einem Schnelltestzentrum, kann bei diesen SuS nicht akzeptiert werden)&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;durch die Klassenleitung wird am Freitag für jeden Tag des Wochenendes, der in diesen Status fällt, ein Schnelltest mitgegeben&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;zeigen diese Kinder Symptome (Husten, Fieber, Kopfschmerzen, …), dürfen sie das Schulhaus nicht mehr betreten&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;am gemeinsamen Essen in der Mensa darf nicht mehr teilgenommen werden&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;li&gt;während des Sportunterrichts (Umkleide, Sport in der Halle) muss durchgehend eine Maske getragen werden – ist dies aufgrund der körperlichen Betätigung nicht möglich, nehmen diese Kinder nicht am Sportunterricht teil&lt;/li&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/ul&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs btn-outline-secondary&#39; id=&#39;bu_minimize_salzh_explanation&#39;&gt;Diese Information minimieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_salzh_protocol_table-instance_method">
  
    #<strong>print_salzh_protocol_table</strong>(week_delta = 0)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 910</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_salzh_protocol_table'>print_salzh_protocol_table</span><span class='lparen'>(</span><span class='id identifier rubyid_week_delta'>week_delta</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_holiday_dates'>holiday_dates</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@ferien_feiertage</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_temp1'>temp1</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_temp1'>temp1</span>
            <span class='id identifier rubyid_holiday_dates'>holiday_dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_temp0'>temp0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='const'>Dir</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/salzh_protocol/*.txt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
            <span class='id identifier rubyid_datum'>datum</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>

            <span class='comment'># skip weekends
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rparen'>)</span>

            <span class='comment'># skip holidays
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_holiday_dates'>holiday_dates</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>

            <span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
            <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_datum'>datum</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>-=</span> <span class='id identifier rubyid_week_delta'>week_delta</span> <span class='op'>*</span> <span class='int'>7</span>
        <span class='id identifier rubyid_cw'>cw</span> <span class='op'>=</span> <span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%-V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_d0'>d0</span> <span class='op'>=</span> <span class='id identifier rubyid_now'>now</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_d0'>d0</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>!=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_d0'>d0</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_d1'>d1</span> <span class='op'>=</span> <span class='id identifier rubyid_d0'>d0</span> <span class='op'>+</span> <span class='int'>4</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-striped table-sm narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th rowspan=&#39;2&#39;&gt;Klasse&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th rowspan=&#39;2&#39;&gt;Name&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th colspan=&#39;5&#39;&gt;KW </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cw'>cw</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d0'>d0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d1'>d1</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th rowspan=&#39;2&#39;&gt;Gesamt&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Mo&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Di&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Mi&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Do&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Fr&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
            <span class='id identifier rubyid_iterate_directory'>iterate_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
                    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_d0'>d0</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_flag'>flag</span> 
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;i class=&#39;fa fa-home&#39;&gt;&lt;/i&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_salzh_protocol_table_overview-instance_method">
  
    #<strong>print_salzh_protocol_table_overview</strong>(week_delta = 0)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 853</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_salzh_protocol_table_overview'>print_salzh_protocol_table_overview</span><span class='lparen'>(</span><span class='id identifier rubyid_week_delta'>week_delta</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_holiday_dates'>holiday_dates</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='cvar'>@@ferien_feiertage</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_temp1'>temp1</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_temp1'>temp1</span>
            <span class='id identifier rubyid_holiday_dates'>holiday_dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_temp0'>temp0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_temp0'>temp0</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_week'>week</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
        <span class='id identifier rubyid_now'>now</span> <span class='op'>-=</span> <span class='id identifier rubyid_week_delta'>week_delta</span> <span class='op'>*</span> <span class='int'>7</span>
        <span class='id identifier rubyid_cw'>cw</span> <span class='op'>=</span> <span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%-V</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_d0'>d0</span> <span class='op'>=</span> <span class='id identifier rubyid_now'>now</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_d0'>d0</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>!=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_d0'>d0</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_d1'>d1</span> <span class='op'>=</span> <span class='id identifier rubyid_d0'>d0</span> <span class='op'>+</span> <span class='int'>4</span>
        <span class='const'>Dir</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/internal/salzh_protocol/*.txt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
            <span class='id identifier rubyid_datum'>datum</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>

            <span class='comment'># skip weekends
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rparen'>)</span>

            <span class='comment'># skip holidays
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_holiday_dates'>holiday_dates</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_datum'>datum</span><span class='rparen'>)</span>

            <span class='comment'># skip if not current week
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_datum'>datum</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_d0'>d0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_datum'>datum</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_d1'>d1</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

            <span class='id identifier rubyid_emails'>emails</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
            <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_datum'>datum</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_datum'>datum</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
                <span class='id identifier rubyid_week'>week</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-striped table-sm narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;KW </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cw'>cw</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d0'>d0</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;ndash; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d1'>d1</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_week'>week</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> SuS&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w(</span><span class='tstring_content'>Mo</span><span class='words_sep'> </span><span class='tstring_content'>Di</span><span class='words_sep'> </span><span class='tstring_content'>Mi</span><span class='words_sep'> </span><span class='tstring_content'>Do</span><span class='words_sep'> </span><span class='tstring_content'>Fr</span><span class='tstring_end'>)</span></span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_d0'>d0</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_d0'>d0</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> SuS&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_self_test_panel-instance_method">
  
    #<strong>print_self_test_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 1065</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_self_test_panel'>print_self_test_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#EXCLUDE_FROM_SELF_TEST_REPORT-constant" title="EXCLUDE_FROM_SELF_TEST_REPORT (constant)">EXCLUDE_FROM_SELF_TEST_REPORT</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_days'>days</span> <span class='op'>=</span> <span class='id identifier rubyid_self_tests_this_week'>self_tests_this_week</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noch nicht</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_days_label'>days_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
            <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bereits </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>×</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_days_label'>days_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (am </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_join_with_sep'><span class='object_link'><a href="top-level-namespace.html#join_with_sep-instance_method" title="#join_with_sep (method)">join_with_sep</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> und </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sie haben sich in dieser Woche &lt;strong&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/strong&gt; getestet</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_days_label'>days_label</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:datum</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> class=&#39;bu-add-self-test btn btn-success btn-sm float-right&#39;&gt;&lt;i class=&#39;fa fa-pencil&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Testung protokollieren…&lt;/button&gt;&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_semi_public_links-instance_method">
  
    #<strong>print_semi_public_links</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2464
2465
2466
2467
2468
2469
2470
2471
2472
2473
2474
2475
2476
2477
2478
2479
2480
2481
2482
2483
2484
2485
2486
2487
2488
2489
2490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2464</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_semi_public_links'>print_semi_public_links</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='comment'># return &#39;&#39; unless teacher_logged_in?
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h2 style=&#39;margin-bottom: 30px; margin-top: 30px;&#39;&gt;Schulinterne Links&lt;/h2&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th&gt;Website&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Passwort&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#SEMI_PUBLIC_LINKS-constant" title="SEMI_PUBLIC_LINKS (constant)">SEMI_PUBLIC_LINKS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_link'>link</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='symbol'>:condition</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;a href=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; target=&#39;_blank&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_email_field'>print_email_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print_password_field'>print_password_field</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_sessions-instance_method">
  
    #<strong>print_sessions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 658</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_sessions'>print_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped table-narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Gültig bis&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Zuletzt verwendet&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Gerät&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Art&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Abmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_sessions'>sessions</span> <span class='op'>=</span> <span class='id identifier rubyid_get_current_user_sessions'>get_current_user_sessions</span><span class='lparen'>(</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:expires</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:expires</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d'>d</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:last_access</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:last_access</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%d.%m.%Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d'>d</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-overflow: ellipsis;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='ivar'>@used_session</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;i class=\&#39;text-success fa fa-check\&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unbekanntes Gerät</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='ivar'>@used_session</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;div style=\&#39;font-size: 85%; margin-top: -5px;\&#39;&gt;(dieses Gerät)&lt;/div&gt;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_METHODS-constant" title="LOGIN_METHODS (constant)">LOGIN_METHODS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:method</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&amp;ndash;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-danger btn-xs btn-purge-session&#39; data-purge-session=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-sign-out&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Gerät abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td colspan=&#39;5&#39;&gt;&lt;button class=&#39;float-right btn btn-danger btn-xs btn-purge-session&#39; data-purge-session=&#39;_all&#39;&gt;&lt;i class=&#39;fa fa-sign-out&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Alle Geräte abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_stats-instance_method">
  
    #<strong>print_stats</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/stats.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_stats'>print_stats</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='id identifier rubyid_login_stats'>login_stats</span> <span class='op'>=</span> <span class='id identifier rubyid_get_login_stats'>get_login_stats</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Gruppe&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;jemals&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;letzte 4 Wochen&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;letzte Woche&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;heute&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:sus</span><span class='comma'>,</span> <span class='symbol'>:lehrer</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='cvar'>@@klassen_order</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
            <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='symbol'>:sus</span>
                <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Schülerinnen und Schüler</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='symbol'>:lehrer</span>
                <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lehrerinnen und Lehrer</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='const'><span class='object_link'><a href="top-level-namespace.html#LOGIN_STATS_D-constant" title="LOGIN_STATS_D (constant)">LOGIN_STATS_D</a></span></span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_login_stats'>login_stats</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_percent'>percent</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:total</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                <span class='id identifier rubyid_bgcol'>bgcol</span> <span class='op'>=</span> <span class='id identifier rubyid_get_gradient'><span class='object_link'><a href="top-level-namespace.html#get_gradient-instance_method" title="#get_gradient (method)">get_gradient</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#cc0000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#f4951b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffe617</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#80bc42</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_percent'>percent</span> <span class='op'>/</span> <span class='float'>100.0</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;span style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bgcol'>bgcol</span><span class='embexpr_end'>}</span><span class='tstring_content'>; padding: 4px 8px; margin: 0; border-radius: 3px;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_percent'>percent</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_stream_restriction_table-instance_method">
  
    #<strong>print_stream_restriction_table</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/lesson.rb', line 492</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_stream_restriction_table'>print_stream_restriction_table</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lesson_keys'>lesson_keys</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@lessons_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
        <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:klassen</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_lesson_keys'>lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-warning&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Falls Sie einschränken möchten, welche Kinder in Ihrem Unterricht am Streaming teilnehmen dürfen, können Sie dies hier tun. Standardmäßig ist der Stream, falls Sie ihn aktivieren, für alle Kinder aktiviert. Sie können zwei Einschränkungen vornehmen: a) nur für Kinder, die planmäßig gerade nicht in der Schule sind + Kinder, die dauerhaft zu Hause sind (»nicht für Wechselgruppe in Präsenz«) oder b) nur für Kinder, die dauerhaft zu Hause, also oben als »zu Hause« markiert sind (»nur für Dauer-saLzH«).</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table stream-restriction-table&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th style=&#39;text-align: left;&#39;&gt;Fach&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Montag&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Dienstag&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Mittwoch&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Donnerstag&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Freitag&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_lesson_keys'>lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_restrictions'>restrictions</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_get_stream_restriction_for_lesson_key'>get_stream_restriction_for_lesson_key</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td style=&#39;text-align: left;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_lesson_info'>lesson_info</span> <span class='op'>=</span> <span class='cvar'>@@lessons</span><span class='lbracket'>[</span><span class='symbol'>:lesson_keys</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_info'>lesson_info</span><span class='lbracket'>[</span><span class='symbol'>:pretty_folder_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_restrictions'>restrictions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
                <span class='id identifier rubyid_btn_style'>btn_style</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-primary</span><span class='tstring_end'>&#39;</span></span>
                <span class='id identifier rubyid_btn_label'>btn_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>für alle</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>if</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>==</span> <span class='int'>1</span>
                    <span class='id identifier rubyid_btn_style'>btn_style</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-info</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_btn_label'>btn_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nur für Dauer-saLzH</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>elsif</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>==</span> <span class='int'>2</span>
                    <span class='id identifier rubyid_btn_style'>btn_style</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>btn-warning</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_btn_label'>btn_label</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nicht für Wechselgruppe in Präsenz</span><span class='tstring_end'>&#39;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button data-lesson-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-day=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;bu-toggle-stream-restriction btn </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_btn_style'>btn_style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_btn_label'>btn_label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_summoned_books_panel-instance_method">
  
    #<strong>print_summoned_books_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 501</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_summoned_books_panel'>print_summoned_books_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_refresh_bib_data'>refresh_bib_data</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='cvar'>@@bib_summoned_books</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_n_to_s'>n_to_s</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='int'>1</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Eines der</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Zwei</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Drei</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Vier</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>5</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fünf</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>+=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div&gt;&lt;span style=&#39;font-size: 200%; float: left; margin-right: 8px;&#39;&gt;📚&lt;/span&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n_to_s'>n_to_s</span><span class='lbracket'>[</span><span class='cvar'>@@bib_summoned_books</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mehrere</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> Bücher, die du ausgeliehen hast, </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@bib_summoned_books</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wird</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>werden</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> dringend in der Bibliothek benötigt. Bitte bring </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@bib_summoned_books</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>es</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sie</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> zurück und lege </span><span class='embexpr_beg'>#{</span><span class='cvar'>@@bib_summoned_books</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>es</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sie</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> ins &lt;a target=&#39;_blank&#39; href=&#39;https://rundgang.gymnasiumsteglitz.de/#g114&#39;&gt;Rückgaberegal&lt;/a&gt; vor der Bibliothek.&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/bibliothek&#39; style=&#39;white-space: nowrap;&#39; class=&#39;float-right btn btn-sm btn-success&#39;&gt;Zu deinen Büchern&amp;nbsp;&lt;i class=&#39;fa fa-angle-double-right&#39;&gt;&lt;/i&gt;&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># if @@bib_unconfirmed_books[email] &amp;&amp; (!teacher_logged_in?)
</span>    <span class='comment'>#     n_to_s = {1 =&gt; &#39;Eines&#39;, 2 =&gt; &#39;Zwei&#39;, 3 =&gt; &#39;Drei&#39;, 4 =&gt; &#39;Vier&#39;, 5 =&gt; &#39;Fünf&#39;}
</span>    <span class='comment'>#     result += StringIO.open do |io|
</span>    <span class='comment'>#         io.puts &quot;&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;div class=&#39;hint&#39;&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;div&gt;&lt;span style=&#39;font-size: 200%; float: left; margin-right: 8px;&#39;&gt;🙁&lt;/span&gt;#{n_to_s[@@bib_unconfirmed_books[email].size] || &#39;Mehrere&#39;} deiner ent&amp;shy;lieh&amp;shy;enen Bücher #{@@bib_unconfirmed_books[email].size == 1 ? &#39;wurde&#39; : &#39;wurden&#39;} von dir noch nicht bestätigt. &lt;strong&gt;Bitte scanne #{@@bib_unconfirmed_books[email].size == 1 ? &#39;das Buch&#39; : &#39;die Bücher&#39;} jetzt ein.&lt;/strong&gt;&lt;/div&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;hr /&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;a href=&#39;/bib_confirm&#39; style=&#39;white-space: nowrap;&#39; class=&#39;float-right btn btn-sm btn-success&#39;&gt;&lt;i class=&#39;fa fa-barcode&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Bücher bestätigen&lt;/a&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;div style=&#39;clear: both;&#39;&gt;&lt;/div&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;/div&gt;&quot;
</span>    <span class='comment'>#         io.puts &quot;&lt;/div&gt;&quot;
</span>    <span class='comment'>#         io.string
</span>    <span class='comment'>#     end
</span>    <span class='comment'># end
</span>    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_tablet_locations-instance_method">
  
    #<strong>print_tablet_locations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>post &#39;/api/remove_mobile_device&#39; do</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require_user_who_can_manage_tablets!'>require_user_who_can_manage_tablets!</span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_request_data'>parse_request_data</span><span class='lparen'>(</span><span class='symbol'>:required_keys</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:code</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span>
<span class='tstring_content'>    MATCH (v:SchulTablet {code: $code})
</span><span class='tstring_content'>    DELETE v
</span><span class='heredoc_end'>END_OF_QUERY
</span><span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='symbol'>:ok</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tablet.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_tablet_locations'>print_tablet_locations</span>
    <span class='id identifier rubyid_require_user_who_can_manage_tablets!'>require_user_who_can_manage_tablets!</span>
    <span class='id identifier rubyid_tablets'>tablets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='cvar'>@@tablet_sets</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='op'>|</span> <span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet_set</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
            <span class='id identifier rubyid_tablets'>tablets</span><span class='period'>.</span><span class='id identifier rubyid_append'>append</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:prefix</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:includes</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
            <span class='id identifier rubyid_tablets'>tablets</span><span class='period'>.</span><span class='id identifier rubyid_append'>append</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:prefix</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:includes_not</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
            <span class='id identifier rubyid_tablets'>tablets</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet_set'>tablet_set</span><span class='lbracket'>[</span><span class='symbol'>:prefix</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table narrow table-striped&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th&gt;Tablet&lt;/th&gt;&lt;th&gt;Access Point&lt;/th&gt;&lt;th&gt;Zuletzt gesehen&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>for</span> <span class='id identifier rubyid_tablet'>tablet</span> <span class='kw'>in</span> <span class='id identifier rubyid_tablets'>tablets</span> <span class='kw'>do</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_tablet_login-instance_method">
  
    #<strong>print_tablet_login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 661</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_tablet_login'>print_tablet_login</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_manage_tech_problems</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Mit einem Klick auf diesen Button kannst du dieses Gerät dauerhaft als Lehrer-Tablet anmelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-primary bu_login_teacher_tablet&#39;&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Lehrer-Tablet-Modus aktivieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte wähle ein order mehrere Kürzel, um dieses Gerät dauerhaft als Kurs-Tablet anzumelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@shorthands</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn-teacher-for-kurs-tablet-login btn btn-xs btn-outline-secondary&#39; data-shorthand=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br /&gt;&lt;br &gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-primary bu_login_kurs_tablet&#39; disabled&gt;&lt;i class=&#39;fa fa-sign-in&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Kurs-Tablet-Modus aktivieren&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Bitte wähle ein Tablet, um dieses Gerät dauerhaft als dieses Tablet anzumelden.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@tablets</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
            <span class='id identifier rubyid_tablet'>tablet</span> <span class='op'>=</span> <span class='cvar'>@@tablets</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn-tablet-login btn btn-xs btn-outline-secondary&#39; data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; style=&#39;background-color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:bg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>; color: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tablet'>tablet</span><span class='lbracket'>[</span><span class='symbol'>:fg_color</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;max-width: 100%; overflow-x: auto;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table table-condensed table-striped narrow&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Typ&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Gerät&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;Abmelden&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Lehrer-Tablet&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;lehrer.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_get_sessions_for_user'>get_sessions_for_user</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>kurs.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;Kurs-Tablet (</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:shorthands</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user_agent</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger btn-purge-session&#39; data-email=&#39;kurs.tablet@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-scrambled-sid=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:scrambled_sid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;Abmelden&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_techpost_superuser-instance_method">
  
    #<strong>print_techpost_superuser</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 618</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_techpost_superuser'>print_techpost_superuser</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_manage_tech_problems</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_problems'>problems</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='symbol'>:problem</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>v</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:femail</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>f.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (v:TechProblem)-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>        OPTIONAL MATCH (v:TechProblem)-[:WILL_BE_FIXED_BY]-&gt;(f:User)
</span><span class='tstring_content'>        RETURN v, u.email, f.email;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br&gt;&lt;h3&gt;User, die Probleme melden können (Alle oben genannten plus:)&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table narrow table-striped&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;User&lt;/td&gt;&lt;td&gt;Bearbeiten&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_get_technikamt_users'>get_technikamt_users</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='op'>|</span>
            <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_nc_login'>nc_login</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>=</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;img src=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nc_login'>nc_login</span><span class='embexpr_end'>}</span><span class='tstring_content'>/256&#39; class=&#39;icon avatar-md&#39;&gt;&amp;nbsp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_name'>display_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger bu-edit-techpost&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Rechte entziehen&lt;/button&gt;&amp;nbsp;&lt;button class=&#39;btn btn-xs btn-success bu-send-single-welcome-mail&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_technikamt'>technikamt</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-envelope&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Willkommens-E-Mail versenden&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;&lt;div class=&#39;alert alert-info&#39;&gt;&lt;code&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_technikamt_users'>get_technikamt_users</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/code&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_problems'>problems</span> <span class='op'>==</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br&gt;&lt;h3&gt;Aktuelle Probleme im JSON-Format&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>for</span> <span class='id identifier rubyid_problem'>problem</span> <span class='kw'>in</span> <span class='id identifier rubyid_problems'>problems</span> <span class='kw'>do</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;alert alert-info&#39;&gt;&lt;code&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_problem'>problem</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/code&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;br&gt;&lt;h3&gt;Super Funktionen&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;bu-clear-all btn btn-danger&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Alle Probleme löschen&lt;/button&gt;&amp;nbsp&lt;button class=&#39;bu-kick-all btn btn-danger&#39;&gt;&lt;i class=&#39;fa fa-user-times&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Alle Technikamt-User entfernen&lt;/button&gt;&amp;nbsp&lt;button class=&#39;bu-send-welcome-mail btn btn-warning&#39;&gt;&lt;i class=&#39;fa fa-envelope&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Willkommens-E-Mails versenden&lt;/button&gt;&amp;nbsp;&lt;button class=&#39;bu-clear-aula-lights btn btn-danger&#39;&gt;&lt;i class=&#39;fa fa-lightbulb-o&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Plan der Aula-Scheinwerfer zurücksetzen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;form-group&#39;&gt;&lt;input id=&#39;ti_recipients&#39; class=&#39;form-control&#39; placeholder=&#39;User suchen…&#39; /&gt;&lt;div class=&#39;recipient-input-dropdown&#39; style=&#39;display: none;&#39;&gt;&lt;/div&gt;&lt;/input&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;form-group row&#39;&gt;&lt;label for=&#39;ti_email&#39; class=&#39;col-sm-1 col-form-label&#39;&gt;Name:&lt;/label&gt;&lt;div class=&#39;col-sm-3&#39;&gt;&lt;input type=&#39;text&#39; readonly class=&#39;form-control&#39; id=&#39;ti_email&#39; placeholder=&#39;&#39;&gt;&lt;/div&gt;&lt;div id=&#39;publish_message_btn_container&#39;&gt;&lt;button disabled id=&#39;bu_send_message&#39; class=&#39;btn btn-outline-secondary&#39;&gt;&lt;i class=&#39;fa fa-plus&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;&lt;span&gt;Hinzufügen&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hinweis: Die Änderungen werden erst nach dem Neuladen der Seite sichtbar.&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_test_klassen_chooser-instance_method">
  
    #<strong>print_test_klassen_chooser</strong>(active = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2447
2448
2449
2450
2451
2452
2453
2454
2455
2456
2457
2458
2459
2460
2461
2462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2447</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_test_klassen_chooser'>print_test_klassen_chooser</span><span class='lparen'>(</span><span class='id identifier rubyid_active'>active</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-bottom: 15px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># klassen_for_session_user.each do |klasse|
</span>        <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_ORDER-constant" title="KLASSEN_ORDER (constant)">KLASSEN_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; class=&#39;btn btn-sm ttc </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>==</span> <span class='id identifier rubyid_active'>active</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a href=&#39;/manage_test_calendar&#39; style=&#39;width: 9em;&#39; class=&#39;btn btn-sm ttc&#39;&gt;Kalender verwalten&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_timetable_chooser-instance_method">
  
    #<strong>print_timetable_chooser</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2323
2324
2325
2326
2327
2328
2329
2330
2331
2332
2333
2334
2335
2336
2337
2338
2339
2340
2341
2342
2343
2344
2345
2346
2347
2348
2349
2350
2351
2352
2353
2354
2355
2356
2357
2358
2359
2360
2361
2362
2363
2364
2365
2366
2367
2368
2369
2370
2371
2372
2373
2374
2375
2376
2377
2378
2379
2380
2381
2382
2383
2384
2385
2386
2387
2388
2389
2390
2391
2392
2393
2394
2395
2396
2397
2398
2399
2400
2401
2402
2403
2404
2405
2406
2407
2408
2409
2410
2411
2412
2413
2414
2415
2416
2417
2418
2419
2420
2421
2422
2423
2424
2425
2426
2427
2428
2429
2430
2431
2432
2433
2434
2435
2436
2437
2438
2439
2440
2441
2442
2443
2444
2445</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 2323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_timetable_chooser'>print_timetable_chooser</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_kurs_tablet_logged_in?'>kurs_tablet_logged_in?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-bottom: 15px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthands</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
                <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:can_log_in</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;window.location.href = &#39;/timetable/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; + window.location.hash;\&quot; class=&#39;btn btn-sm ttc&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_klassenraum_logged_in?'>klassenraum_logged_in?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-bottom: 15px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@klassen_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;window.location.href = &#39;/timetable/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; + window.location.hash;\&quot; class=&#39;btn btn-sm ttc&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-bottom: 15px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>false</span>
            <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tio'>tio</span><span class='op'>|</span>
                <span class='cvar'>@@lehrer_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span> <span class='op'>==</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:public_id</span><span class='rbracket'>]</span>
                    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:can_log_in</span><span class='rbracket'>]</span>
                    <span class='comment'># next unless can_see_all_timetables_logged_in? || email == @session_user[:email]
</span>                    <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span> <span class='op'>!=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
                    <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_hide'>hide</span>
                    <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='id identifier rubyid_hide'>hide</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>display: none;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                    <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;); window.selected_shorthand = &#39;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;; \&quot; class=&#39;btn btn-sm ttc ttc-teacher&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_style'>style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_hidden_something'>hidden_something</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs ttc bu-show-alle-teacher pull-right&#39; style=&#39;margin-left: 0.5em; width: unset; padding: 0.25rem 0.5rem; display: inline-block;&#39; onclick=\&quot;$(&#39;.ttc-teacher&#39;).show(); $(&#39;.bu-show-alle-teacher&#39;).hide();\&quot;&gt;Alle Lehrkräfte&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_temp'>temp</span>
            <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&#39;</span></span>

                <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='id identifier rubyid_all_hidden'>all_hidden</span> <span class='op'>=</span> <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                    <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tio'>tio</span><span class='op'>|</span>
                    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                        <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@klassen_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_all_hidden'>all_hidden</span>
                        <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_hide'>hide</span>
                        <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='id identifier rubyid_hide'>hide</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>display: none;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@klassen_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;);\&quot; class=&#39;btn btn-sm ttc ttc-klasse&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_style'>style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_hidden_something'>hidden_something</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs ttc bu-show-alle-klassen pull-right&#39; style=&#39;margin-left: 0.5em; width: unset; padding: 0.25rem 0.5rem; display: inline-block;&#39; onclick=\&quot;$(&#39;.ttc-klasse&#39;).show(); $(&#39;.bu-show-alle-klassen&#39;).hide();\&quot;&gt;Alle Klassen&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_temp'>temp</span>

                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&#39;</span></span>

                <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>false</span>
                <span class='id identifier rubyid_all_hidden'>all_hidden</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ROOM_ORDER-constant" title="ROOM_ORDER (constant)">ROOM_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
                    <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@rooms_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span><span class='rparen'>)</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tio'>tio</span><span class='op'>|</span>
                    <span class='const'><span class='object_link'><a href="top-level-namespace.html#ROOM_ORDER-constant" title="ROOM_ORDER (constant)">ROOM_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
                        <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='op'>!</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@rooms_for_shorthand</span><span class='lbracket'>[</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:shorthand</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_room'>room</span><span class='rparen'>)</span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_hide'>hide</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_all_hidden'>all_hidden</span>
                        <span class='id identifier rubyid_hidden_something'>hidden_something</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_hide'>hide</span>
                        <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='id identifier rubyid_hide'>hide</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>display: none;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                        <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@room_ids</span><span class='lbracket'>[</span><span class='id identifier rubyid_room'>room</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;);\&quot; class=&#39;btn btn-sm ttc ttc-room&#39; style=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_style'>style</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room'>room</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
                <span class='kw'>end</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_hidden_something'>hidden_something</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;button class=&#39;btn btn-xs ttc bu-show-alle-rooms pull-right&#39; style=&#39;margin-left: 0.5em; width: unset; padding: 0.25rem 0.5rem; display: inline-block;&#39; onclick=\&quot;$(&#39;.ttc-room&#39;).show(); $(&#39;.bu-show-alle-rooms&#39;).hide();\&quot;&gt;Alle Räume&lt;/button&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_temp'>temp</span>
            <span class='kw'>end</span>


            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_technikteam_logged_in?'>technikteam_logged_in?</span>
        <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;margin-bottom: 15px;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;);\&quot; class=&#39;btn btn-sm ttc active&#39; style=&#39;width: 100%; padding: 0.25rem 0.5rem; display: inline-block;&#39;&gt;Persönlicher Stundenplan (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/a&gt;&lt;hr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tio'>tio</span><span class='op'>|</span>
                <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
                    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@klassen_id</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-klasse=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;);\&quot; class=&#39;btn btn-sm ttc ttc-klasse&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_temp'>temp</span>

            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tio'>tio</span><span class='op'>|</span>
                <span class='const'><span class='object_link'><a href="top-level-namespace.html#ROOM_ORDER-constant" title="ROOM_ORDER (constant)">ROOM_ORDER</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_room'>room</span><span class='op'>|</span>
                    <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='cvar'>@@room_ids</span><span class='lbracket'>[</span><span class='id identifier rubyid_room'>room</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;a data-id=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; onclick=\&quot;load_timetable(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;);\&quot; class=&#39;btn btn-sm ttc ttc-room&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room'>room</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/a&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_tio'>tio</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_temp'>temp</span>

            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_tresor_countdown_panel-instance_method">
  
    #<strong>print_tresor_countdown_panel</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 566</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_tresor_countdown_panel'>print_tresor_countdown_panel</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>=</span> <span class='const'>DEADLINE_NOTENEINTRAGUNG</span>
    <span class='kw'>if</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;</span> <span class='float'>7.0</span>
        <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Noteneingabe im Datentresor&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Noteneingabe im Datentresor schließt am </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS_LONG-constant" title="WEEKDAYS_LONG (constant)">WEEKDAYS_LONG</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div id=&#39;tresor_countdown_here&#39; style=&#39;display: none;&#39; data-deadline=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>=</span> <span class='const'>DEADLINE_CONSIDER</span>
    <span class='kw'>if</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;</span> <span class='float'>7.0</span>
        <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Markierung von SuS in den Listen für die Zeugniskonferenzen&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Klassenleitungen: Bitte markieren Sie SuS, die Sie in den Zeug&amp;shy;nis&amp;shy;kon&amp;shy;feren&amp;shy;zen besprechen möchten, bis </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS_LONG-constant" title="WEEKDAYS_LONG (constant)">WEEKDAYS_LONG</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr. Hinweis: Alle SuS mit einer Note ab 4– sind schon auto&amp;shy;matisch markiert.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div id=&#39;tresor_countdown_here&#39; style=&#39;display: none;&#39; data-deadline=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_need_sozialverhalten'>need_sozialverhalten</span><span class='lparen'>(</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>=</span> <span class='const'>DEADLINE_SOZIALNOTEN</span>
        <span class='kw'>if</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_deadline'>deadline</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;</span> <span class='float'>7.0</span>
            <span class='kw'>return</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;col-lg-12 col-md-4 col-sm-6&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;hint&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;&lt;b&gt;Eintragung der Noten für das Arbeits- und Sozialverhalten&lt;/b&gt;&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Die Möglichkeit für Eintragungen der Noten für das Arbeits- und Sozialverhalten endet am </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEEKDAYS_LONG-constant" title="WEEKDAYS_LONG (constant)">WEEKDAYS_LONG</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> um </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> Uhr. Bitte tragen Sie bis dahin fehlende Noten ein, damit die Klassenleitungen rechtzeitig vor der Zeugnisausgabe die Sozialzeugnisse drucken können.&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div id=&#39;tresor_countdown_here&#39; style=&#39;display: none;&#39; data-deadline=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_deadline'>deadline</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_users_which_can_fix_tech_problems-instance_method">
  
    #<strong>print_users_which_can_fix_tech_problems</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 598</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_users_which_can_fix_tech_problems'>print_users_which_can_fix_tech_problems</span>
    <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='symbol'>:can_manage_tech_problems</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;row&#39; style=&#39;margin-bottom: 15px;&#39;&gt;&lt;div class=&#39;col-md-12&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table class=&#39;table narrow table-striped&#39; style=&#39;width: unset; min-width: 100%;&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;User&lt;/td&gt;&lt;td&gt;Auswählen&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='cvar'>@@users_for_role</span><span class='lbracket'>[</span><span class='symbol'>:can_manage_tech_problems</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
            <span class='id identifier rubyid_display_name'>display_name</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:display_name</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_nc_login'>nc_login</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_klasse'>klasse</span> <span class='op'>=</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:klasse</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;td&gt;&lt;img src=&#39;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nc_login'>nc_login</span><span class='embexpr_end'>}</span><span class='tstring_content'>/256&#39; class=&#39;icon avatar-md&#39;&gt;&amp;nbsp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_display_name'>display_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-success bu-select-user-to-fix-problem&#39; data-email=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-check&#39;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="public_events_table-instance_method">
  
    #<strong>public_events_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/public_event.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_public_events_table'>public_events_table</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_admin_or_sekretariat!'>require_admin_or_sekretariat!</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_refresh_public_event_config'>refresh_public_event_config</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_description_for_key_and_key'>description_for_key_and_key</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_row_description_for_key_and_key'>row_description_for_key_and_key</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_event_index'>event_index</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event_index'>event_index</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h3&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h3&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='comment'># if event[:description]
</span>            <span class='comment'>#     io.puts event[:description]
</span>            <span class='comment'># end
</span>            <span class='id identifier rubyid_sign_ups'>sign_ups</span> <span class='op'>=</span> <span class='id identifier rubyid_get_sign_ups_for_public_event'>get_sign_ups_for_public_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39; data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;display: none;&#39; class=&#39;event-title&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table style=&#39;table-layout: fixed;&#39; class=&#39;table table-narrow narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_colspan'>colspan</span> <span class='op'>=</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;width: 180px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_colspan'>colspan</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;col style=&#39;min-width: 200px;&#39;/&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/colgroup&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;thead&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th colspan=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colspan'>colspan</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:headings</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/thead&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:rows</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;th&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/th&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_row'>row</span><span class='lbracket'>[</span><span class='symbol'>:entries</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                    <span class='id identifier rubyid_description_for_key_and_key'>description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                    <span class='id identifier rubyid_description_for_key_and_key'>description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:row_description</span><span class='rbracket'>]</span>
                        <span class='id identifier rubyid_row_description_for_key_and_key'>row_description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
                        <span class='id identifier rubyid_row_description_for_key_and_key'>row_description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:row_description</span><span class='rbracket'>]</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
                    <span class='id identifier rubyid_booked_count'>booked_count</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
                    <span class='id identifier rubyid_percent'>percent</span> <span class='op'>=</span> <span class='int'>0</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>!=</span> <span class='int'>0</span>
                        <span class='id identifier rubyid_percent'>percent</span> <span class='op'>=</span> <span class='id identifier rubyid_booked_count'>booked_count</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>/</span> <span class='id identifier rubyid_capacity'>capacity</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;div style=&#39;display: flex; justify-content: space-between;&#39;&gt;&lt;div&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/div&gt;&lt;div&gt;(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_booked_count'>booked_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_capacity'>capacity</span><span class='embexpr_end'>}</span><span class='tstring_content'>)&lt;/div&gt;&lt;/div&gt;&lt;div class=&#39;progress&#39;&gt;&lt;div class=&#39;progress-bar progress-bar-striped&#39; role=&#39;progressbar&#39; style=&#39;width: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_percent'>percent</span><span class='embexpr_end'>}</span><span class='tstring_content'>%;&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_percent'>percent</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>%&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='cvar'>@@public_event_config</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_event_index'>event_index</span><span class='op'>|</span>
            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span>
            <span class='id identifier rubyid_sign_ups'>sign_ups</span> <span class='op'>=</span> <span class='id identifier rubyid_get_sign_ups_for_public_event'>get_sign_ups_for_public_event</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;hr /&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;h4&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/h4&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div class=&#39;table-responsive&#39; style=&#39;max-width: 100%; overflow-x: auto;&#39; data-event-key=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;table style=&#39;table-layout: fixed;&#39; class=&#39;table table-narrow narrow&#39;&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;&lt;th&gt;E-Mail&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Track&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
                <span class='id identifier rubyid_sign_ups'>sign_ups</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;</span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_row_description_for_key_and_key'>row_description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_description_for_key_and_key'>description_for_key_and_key</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> / </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;button class=&#39;btn btn-xs btn-danger bu-delete-signup&#39; data-tag=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='symbol'>:tag</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;i class=&#39;fa fa-trash&#39;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;Löschen&lt;/button&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>else</span>
                        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;td&gt;&lt;/td&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tr&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/tbody&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/table&gt;</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="purge_missing_sessions-instance_method">
  
    #<strong>purge_missing_sessions</strong>(current_sid = nil, remove_other = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_purge_missing_sessions'>purge_missing_sessions</span><span class='lparen'>(</span><span class='id identifier rubyid_current_sid'>current_sid</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_remove_other'>remove_other</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_existing_sids'>existing_sids</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_remove_other'>remove_other</span>
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z,]+$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_sids'>sids</span> <span class='op'>=</span> <span class='id identifier rubyid_sid'>sid</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_sids'>sids</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sid'>sid</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[0-9A-Za-z]+$</span><span class='regexp_end'>/</span></span>
                    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_sid'>sid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>                        MATCH (s:Session {sid: $sid})-[:BELONGS_TO]-&gt;(u:User)
</span><span class='tstring_content'>                        RETURN s.sid AS sid;
</span><span class='heredoc_end'>                    END_OF_QUERY
</span>                    <span class='id identifier rubyid_existing_sids'>existing_sids</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sid'>sid</span> <span class='kw'>unless</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_existing_sids'>existing_sids</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_current_sid'>current_sid</span>
        <span class='comment'># insert current SID if it&#39;s not there yet (new sessions ID)
</span>        <span class='kw'>unless</span> <span class='id identifier rubyid_existing_sids'>existing_sids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_current_sid'>current_sid</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_existing_sids'>existing_sids</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_current_sid'>current_sid</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='comment'># move current SID to front
</span>        <span class='id identifier rubyid_existing_sids'>existing_sids</span> <span class='op'>-=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_current_sid'>current_sid</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_existing_sids'>existing_sids</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_current_sid'>current_sid</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_new_cookie_value'>new_cookie_value</span> <span class='op'>=</span> <span class='id identifier rubyid_existing_sids'>existing_sids</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_new_cookie_value'>new_cookie_value</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_delete_cookie'>delete_cookie</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookies'>cookies</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='id identifier rubyid_new_cookie_value'>new_cookie_value</span>
        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_set_cookie'>set_cookie</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sid</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                            <span class='symbol'>:value</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_cookie_value'>new_cookie_value</span><span class='comma'>,</span>
                            <span class='symbol'>:expires</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#COOKIE_EXPIRY_TIME-constant" title="COOKIE_EXPIRY_TIME (constant)">COOKIE_EXPIRY_TIME</a></span></span><span class='comma'>,</span>
                            <span class='symbol'>:path</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                            <span class='symbol'>:httponly</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                            <span class='symbol'>:secure</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>?</span> <span class='kw'>false</span> <span class='op'>:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="purge_stale_second_factors-instance_method">
  
    #<strong>purge_stale_second_factors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


952
953
954
955
956
957
958</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 952</span>

<span class='kw'>def</span> <span class='id identifier rubyid_purge_stale_second_factors'>purge_stale_second_factors</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:ts_now</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (sf:SecondFactor)
</span><span class='tstring_content'>        WHERE sf.ts_expire &lt; $ts_now
</span><span class='tstring_content'>        DETACH DELETE sf;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="recurse_arrays-instance_method">
  
    #<strong>recurse_arrays</strong>(path_array, value_array, prefix = [], index_prefix = [], &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330
331
332
333
334
335
336
337
338
339
340</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/zeugnisse.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recurse_arrays'>recurse_arrays</span><span class='lparen'>(</span><span class='id identifier rubyid_path_array'>path_array</span><span class='comma'>,</span> <span class='id identifier rubyid_value_array'>value_array</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_index_prefix'>index_prefix</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_path_array'>path_array</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_value_array'>value_array</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_path_entry'>path_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_path_array'>path_array</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_path_entry'>path_entry</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_path_entry'>path_entry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_values'>values</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Array</span>
    <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_recurse_arrays'>recurse_arrays</span><span class='lparen'>(</span><span class='id identifier rubyid_path_array'>path_array</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_path_array'>path_array</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_value_array'>value_array</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_index_prefix'>index_prefix</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="redirect_on_error-instance_method">
  
    #<strong>redirect_on_error</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1592
1593
1594
1595
1596
1597
1598
1599</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1592</span>

<span class='kw'>def</span> <span class='id identifier rubyid_redirect_on_error'>redirect_on_error</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='kw'>yield</span>
    <span class='kw'>rescue</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>302</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>redirected</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh_second_factor-instance_method">
  
    #<strong>refresh_second_factor</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


977
978
979
980
981
982
983
984
985</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 977</span>

<span class='kw'>def</span> <span class='id identifier rubyid_refresh_second_factor'>refresh_second_factor</span>
    <span class='id identifier rubyid_factors'>factors</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='ivar'>@used_session</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:ts_expire</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='id identifier rubyid_tresor_second_factor_ttl'>tresor_second_factor_ttl</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (sf:SecondFactor)-[:BELONGS_TO]-&gt;(s:Session {sid: $sid})
</span><span class='tstring_content'>        WHERE COALESCE(s.method, &#39;email&#39;) &lt;&gt; sf.method
</span><span class='tstring_content'>        SET sf.ts_expire = $ts_expire
</span><span class='tstring_content'>        RETURN sf;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_factors'>factors</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sf</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:ts_expire</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_admin!-instance_method">
  
    #<strong>require_admin!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_admin!'>require_admin!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_admin_2fa_hotline!-instance_method">
  
    #<strong>require_admin_2fa_hotline!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_admin_2fa_hotline!'>require_admin_2fa_hotline!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_admin_2fa_hotline_logged_in?'>admin_2fa_hotline_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_admin_or_sekretariat!-instance_method">
  
    #<strong>require_admin_or_sekretariat!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_admin_or_sekretariat!'>require_admin_or_sekretariat!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_sekretariat_logged_in?'>sekretariat_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_device!-instance_method">
  
    #<strong>require_device!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_device!'>require_device!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='op'>!</span><span class='ivar'>@session_device</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_monitor_or_user_who_can_manage_monitors!-instance_method">
  
    #<strong>require_monitor_or_user_who_can_manage_monitors!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 266</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_monitor_or_user_who_can_manage_monitors!'>require_monitor_or_user_who_can_manage_monitors!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_monitor_logged_in?'>monitor_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_running_phishing_training!-instance_method">
  
    #<strong>require_running_phishing_training!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_running_phishing_training!'>require_running_phishing_training!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_running_phishing_training?'>running_phishing_training?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_running_phishing_training_hint!-instance_method">
  
    #<strong>require_running_phishing_training_hint!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 282</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_running_phishing_training_hint!'>require_running_phishing_training_hint!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_running_phishing_training_hint?'>running_phishing_training_hint?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_teacher!-instance_method">
  
    #<strong>require_teacher!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 210</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_teacher!'>require_teacher!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_teacher_for_lesson_or_ha_amt_logged_in-instance_method">
  
    #<strong>require_teacher_for_lesson_or_ha_amt_logged_in</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_teacher_for_lesson_or_ha_amt_logged_in'>require_teacher_for_lesson_or_ha_amt_logged_in</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_teacher_for_lesson_or_ha_amt_logged_in?'>teacher_for_lesson_or_ha_amt_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_teacher_tablet!-instance_method">
  
    #<strong>require_teacher_tablet!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_teacher_tablet!'>require_teacher_tablet!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_technikteam!-instance_method">
  
    #<strong>require_technikteam!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def require_developer!</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_developer_logged_in?'>developer_logged_in?</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_technikteam!'>require_technikteam!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_technikteam_logged_in?'>technikteam_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user!-instance_method">
  
    #<strong>require_user!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>User is logged in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_agr_app!-instance_method">
  
    #<strong>require_user_who_can_manage_agr_app!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_agr_app!'>require_user_who_can_manage_agr_app!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_can_manage_agr_app_logged_in?'>can_manage_agr_app_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_antikenfahrt!-instance_method">
  
    #<strong>require_user_who_can_manage_antikenfahrt!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_antikenfahrt!'>require_user_who_can_manage_antikenfahrt!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_manage_antikenfahrt_logged_in?'>user_who_can_manage_antikenfahrt_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_bib!-instance_method">
  
    #<strong>require_user_who_can_manage_bib!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_bib!'>require_user_who_can_manage_bib!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_can_manage_bib_logged_in?'>can_manage_bib_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_monitors!-instance_method">
  
    #<strong>require_user_who_can_manage_monitors!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_monitors!'>require_user_who_can_manage_monitors!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_news!-instance_method">
  
    #<strong>require_user_who_can_manage_news!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_news!'>require_user_who_can_manage_news!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_salzh!-instance_method">
  
    #<strong>require_user_who_can_manage_salzh!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 270</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_salzh!'>require_user_who_can_manage_salzh!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_can_manage_salzh_logged_in?'>can_manage_salzh_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_manage_tablets!-instance_method">
  
    #<strong>require_user_who_can_manage_tablets!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 250</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_manage_tablets!'>require_user_who_can_manage_tablets!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_manage_tablets_logged_in?'>user_who_can_manage_tablets_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_report_tech_problems!-instance_method">
  
    #<strong>require_user_who_can_report_tech_problems!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_report_tech_problems!'>require_user_who_can_report_tech_problems!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_report_tech_problems_logged_in?'>user_who_can_report_tech_problems_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_upload_files!-instance_method">
  
    #<strong>require_user_who_can_upload_files!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_upload_files!'>require_user_who_can_upload_files!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_upload_files_logged_in?'>user_who_can_upload_files_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_who_can_use_aula!-instance_method">
  
    #<strong>require_user_who_can_use_aula!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def require_user_who_can_report_tech_problems_or_better!</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_report_tech_problems_or_better_logged_in?'>user_who_can_report_tech_problems_or_better_logged_in?</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_who_can_use_aula!'>require_user_who_can_use_aula!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_who_can_use_aula_logged_in?'>user_who_can_use_aula_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_user_with_role!-instance_method">
  
    #<strong>require_user_with_role!</strong>(role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_user_with_role!'>require_user_with_role!</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_zeugnis_admin!-instance_method">
  
    #<strong>require_zeugnis_admin!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_require_zeugnis_admin!'>require_zeugnis_admin!</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_zeugnis_admin_logged_in?'>zeugnis_admin_logged_in?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond-instance_method">
  
    #<strong>respond</strong>(hash = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1802
1803
1804</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1802</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='ivar'>@respond_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond_raw_with_mimetype-instance_method">
  
    #<strong>respond_raw_with_mimetype</strong>(content, mimetype)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1806
1807
1808
1809</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1806</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_raw_with_mimetype'>respond_raw_with_mimetype</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_mimetype'>mimetype</span><span class='rparen'>)</span>
    <span class='ivar'>@respond_content</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span>
    <span class='ivar'>@respond_mimetype</span> <span class='op'>=</span> <span class='id identifier rubyid_mimetype'>mimetype</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond_raw_with_mimetype_and_filename-instance_method">
  
    #<strong>respond_raw_with_mimetype_and_filename</strong>(content, mimetype, filename)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1811
1812
1813
1814
1815</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1811</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_raw_with_mimetype_and_filename'>respond_raw_with_mimetype_and_filename</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_mimetype'>mimetype</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
    <span class='ivar'>@respond_content</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span>
    <span class='ivar'>@respond_mimetype</span> <span class='op'>=</span> <span class='id identifier rubyid_mimetype'>mimetype</span>
    <span class='ivar'>@respond_filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rgb_to_hex-instance_method">
  
    #<strong>rgb_to_hex</strong>(c)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#%02x%02x%02x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rgb_to_hsv-instance_method">
  
    #<strong>rgb_to_hsv</strong>(c)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p><a href="http://ntlk.net/2011/11/21/convert-rgb-to-hsb-hsv-in-ruby">ntlk.net/2011/11/21/convert-rgb-to-hsb-hsv-in-ruby</a>/</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rgb_to_hsv'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hsv-instance_method" title="#rgb_to_hsv (method)">rgb_to_hsv</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='float'>255.0</span>
    <span class='id identifier rubyid_g'>g</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='float'>255.0</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>/</span> <span class='float'>255.0</span>
    <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
    <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_g'>g</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='id identifier rubyid_max'>max</span> <span class='op'>-</span> <span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_max'>max</span> <span class='op'>*</span> <span class='int'>100</span>

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_max'>max</span> <span class='op'>!=</span> <span class='float'>0.0</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>/</span> <span class='id identifier rubyid_max'>max</span> <span class='op'>*</span><span class='int'>100</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='float'>0.0</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span> <span class='op'>==</span> <span class='float'>0.0</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='float'>0.0</span>
    <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span> <span class='op'>==</span> <span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_g'>g</span> <span class='op'>-</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_delta'>delta</span>
        <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_g'>g</span> <span class='op'>==</span> <span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='int'>2</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span> <span class='op'>-</span> <span class='id identifier rubyid_r'>r</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_delta'>delta</span>
        <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span> <span class='op'>==</span> <span class='id identifier rubyid_max'>max</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='int'>4</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_r'>r</span> <span class='op'>-</span> <span class='id identifier rubyid_g'>g</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_delta'>delta</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_h'>h</span> <span class='op'>*=</span> <span class='float'>60.0</span>

        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span> <span class='op'>&lt;</span> <span class='int'>0</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_h'>h</span> <span class='op'>+=</span> <span class='float'>360.0</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rgb_to_html-instance_method">
  
    #<strong>rgb_to_html</strong>(x)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rgb_to_html'><span class='object_link'><a href="top-level-namespace.html#rgb_to_html-instance_method" title="#rgb_to_html (method)">rgb_to_html</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#%02x%02x%02x</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="room_name_for_event-instance_method">
  
    #<strong>room_name_for_event</strong>(title, eid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/jitsi.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_room_name_for_event'>room_name_for_event</span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_eid'>eid</span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_title'>title</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eid'>eid</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running_phishing_training?-instance_method">
  
    #<strong>running_phishing_training?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running_phishing_training?'>running_phishing_training?</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='const'>PHISHING_START</span>
    <span class='id identifier rubyid_ende'>ende</span> <span class='op'>=</span> <span class='const'>PHISHING_END</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>&amp;&amp;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_ende'>ende</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running_phishing_training_hint?-instance_method">
  
    #<strong>running_phishing_training_hint?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running_phishing_training_hint?'>running_phishing_training_hint?</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='const'>PHISHING_HINT_START</span>
    <span class='id identifier rubyid_ende'>ende</span> <span class='op'>=</span> <span class='const'>PHISHING_HINT_END</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span> <span class='op'>||</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>&amp;&amp;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%dT%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_ende'>ende</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running_zeugniskonferenzen-instance_method">
  
    #<strong>running_zeugniskonferenzen</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running_zeugniskonferenzen'>running_zeugniskonferenzen</span>
    <span class='id identifier rubyid_sha1_and_t0_list'>sha1_and_t0_list</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:t1</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m.sha1</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>m.t0</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='tstring_content'>        MATCH (m:MonitorZeugniskonferenzState)
</span><span class='tstring_content'>        WHERE m.t1 IS NULL
</span><span class='tstring_content'>        RETURN m.sha1, m.t0;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_sha1_list'>sha1_list</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_sha1_and_t0_list'>sha1_and_t0_list</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_t0_for_sha1'>t0_for_sha1</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_sha1_and_t0_list'>sha1_and_t0_list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_t0_for_sha1'>t0_for_sha1</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNISKONFERENZEN-constant" title="ZEUGNISKONFERENZEN (constant)">ZEUGNISKONFERENZEN</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='id identifier rubyid_sha1'>sha1</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_today'>today</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_sha1_list'>sha1_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_sha1'>sha1</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_t0_for_sha1'>t0_for_sha1</span><span class='lbracket'>[</span><span class='id identifier rubyid_sha1'>sha1</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sanitize_poll_items-instance_method">
  
    #<strong>sanitize_poll_items</strong>(items)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563
564
565
566
567
568</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/poll.rb', line 561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sanitize_poll_items'>sanitize_poll_items</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>radio</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>checkbox</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>answers</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reject!'>reject!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_item'>item</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schueler_for_lesson-instance_method">
  
    #<strong>schueler_for_lesson</strong>(lesson_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/directory.rb', line 770</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schueler_for_lesson'>schueler_for_lesson</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
        <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
        <span class='lbracket'>[</span><span class='symbol'>:email</span><span class='comma'>,</span> <span class='symbol'>:first_name</span><span class='comma'>,</span> <span class='symbol'>:last_name</span><span class='comma'>,</span> <span class='symbol'>:display_name</span><span class='comma'>,</span> <span class='symbol'>:nc_login</span><span class='comma'>,</span> <span class='symbol'>:group2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
            <span class='id identifier rubyid_i'>i</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_i'>i</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email_addresses</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='cvar'>@@schueler_for_lesson</span><span class='lbracket'>[</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User)
</span><span class='tstring_content'>        WHERE u.email IN $email_addresses
</span><span class='tstring_content'>        RETURN u.email, COALESCE(u.group2, &#39;A&#39;) AS group2;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_temp'>temp</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_temp'>temp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>u.email</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group2</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:group2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_temp'>temp</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_x'>x</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schueler_logged_in?-instance_method">
  
    #<strong>schueler_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:schueler</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="score_for_project-instance_method">
  
    #<strong>score_for_project</strong>(nr, project_data)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


408
409
410
411
412</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 408</span>

<span class='kw'>def</span> <span class='id identifier rubyid_score_for_project'>score_for_project</span><span class='lparen'>(</span><span class='id identifier rubyid_nr'>nr</span><span class='comma'>,</span> <span class='id identifier rubyid_project_data'>project_data</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_vote'>vote</span> <span class='op'>=</span> <span class='id identifier rubyid_project_data'>project_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vote</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_vote'>vote</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='op'>-</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='int'>3</span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='int'>3</span> <span class='op'>*</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="second_factor_time_left-instance_method">
  
    #<strong>second_factor_time_left</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


960
961
962
963
964
965
966
967
968
969
970</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 960</span>

<span class='kw'>def</span> <span class='id identifier rubyid_second_factor_time_left'>second_factor_time_left</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_purge_stale_second_factors'>purge_stale_second_factors</span>
    <span class='id identifier rubyid_factors'>factors</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:sid</span> <span class='op'>=&gt;</span> <span class='ivar'>@used_session</span><span class='lbracket'>[</span><span class='symbol'>:sid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (sf:SecondFactor)-[:BELONGS_TO]-&gt;(s:Session {sid: $sid})
</span><span class='tstring_content'>        WHERE COALESCE(s.method, &#39;email&#39;) &lt;&gt; sf.method
</span><span class='tstring_content'>        RETURN sf;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_factors'>factors</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_factors'>factors</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sf</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:ts_expire</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sekretariat_logged_in?-instance_method">
  
    #<strong>sekretariat_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sekretariat_logged_in?'>sekretariat_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:sekretariat</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="self_tests_this_week-instance_method">
  
    #<strong>self_tests_this_week</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/salzh.rb', line 1045</span>

<span class='kw'>def</span> <span class='id identifier rubyid_self_tests_this_week'>self_tests_this_week</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span>
    <span class='kw'>while</span> <span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span> <span class='op'>!=</span> <span class='int'>1</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_d'>d</span> <span class='op'>-=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_d0'>d0</span> <span class='op'>=</span> <span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_d1'>d1</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span> <span class='op'>+</span> <span class='int'>6</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:d0</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_d0'>d0</span><span class='comma'>,</span> <span class='symbol'>:d1</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_d1'>d1</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})-[:SELF_TESTED_ON]-&gt;(std:SelfTestDay)
</span><span class='tstring_content'>        WHERE std.datum &gt;= $d0 AND std.datum &lt;= $d1
</span><span class='tstring_content'>        RETURN std.datum AS datum
</span><span class='tstring_content'>        ORDER BY std.datum;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>datum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_d0'>d0</span><span class='rparen'>)</span>
        <span class='lbrace'>{</span><span class='symbol'>:datum</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>datum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>Montag</span><span class='words_sep'> </span><span class='tstring_content'>Dienstag</span><span class='words_sep'> </span><span class='tstring_content'>Mittwoch</span><span class='words_sep'> </span><span class='tstring_content'>Donnerstag</span><span class='words_sep'> </span><span class='tstring_content'>Freitag</span><span class='words_sep'> </span><span class='tstring_content'>Samstag</span><span class='words_sep'> </span><span class='tstring_content'>Sonntag</span><span class='tstring_end'>)</span></span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_sms-instance_method">
  
    #<strong>send_sms</strong>(telephone_number, message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/sms.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_sms'>send_sms</span><span class='lparen'>(</span><span class='id identifier rubyid_telephone_number'>telephone_number</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:telephone_number</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_telephone_number'>telephone_number</span><span class='comma'>,</span> <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_message'>message</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_debug'><span class='object_link'><a href="top-level-namespace.html#debug-instance_method" title="#debug (method)">debug</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sending SMS: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='cvar'>@@ws_clients</span><span class='lbracket'>[</span><span class='symbol'>:authenticated_sms</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='symbol'>:ws</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ds'>ds</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_neo4j_query'>neo4j_query</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:ds</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ds'>ds</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='tstring_content'>        MERGE (d:SmsDay {ds: $ds})
</span><span class='tstring_content'>        SET d.count = COALESCE(d.count, 0) + 1;
</span><span class='heredoc_end'>    END_OF_QUERY
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_welcome_mail-instance_method">
  
    #<strong>send_welcome_mail</strong>(recipients)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/techpost.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_welcome_mail'>send_welcome_mail</span><span class='lparen'>(</span><span class='id identifier rubyid_recipients'>recipients</span><span class='rparen'>)</span>
    <span class='kw'>for</span> <span class='id identifier rubyid_mail_adress'>mail_adress</span> <span class='kw'>in</span> <span class='id identifier rubyid_recipients'>recipients</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_deliver_mail'><span class='object_link'><a href="top-level-namespace.html#deliver_mail-instance_method" title="#deliver_mail (method)">deliver_mail</a></span></span> <span class='kw'>do</span>
            <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_mail_adress'>mail_adress</span>
            <span class='id identifier rubyid_bcc'>bcc</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>
            <span class='id identifier rubyid_from'>from</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#SMTP_FROM-constant" title="SMTP_FROM (constant)">SMTP_FROM</a></span></span>

            <span class='id identifier rubyid_subject'>subject</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Du bist Technikamt im Dashboard!</span><span class='tstring_end'>&quot;</span></span>

            <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Hallo!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Das TechnikTeam hat dir soeben die Funktion „Technikamt“ im Dashboard freigeschaltet. Herzlichen Glückwunsch, du gehörst zu den Ersten, die diese Funktion nutzen dürfen!&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Du solltest die Funktion schon im Rahmen eines Workshops kennengelernt haben. Gerne kannst du jetzt die Funktion testen (schreib aber bitte immer dazu, wenn es sich um einen Test handelt).&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Falls du diese Nachricht unerwartet bekommst oder Probleme beim Anmelden im Dashboard hast, melde dich einfach bei Peter-J. Germelmann (peter-julius.germelmann@mail.gymnasiumsteglitz.de).&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Viele Grüße&lt;br&gt;Das TechnikTeam </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_NAME_AN_DATIV-constant" title="SCHUL_NAME_AN_DATIV (constant)">SCHUL_NAME_AN_DATIV</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_NAME-constant" title="SCHUL_NAME (constant)">SCHUL_NAME</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span>
                <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='symbol'>:ok</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_has_streaming_button?-instance_method">
  
    #<strong>session_user_has_streaming_button?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1574
1575
1576
1577
1578
1579
1580
1581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1574</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_has_streaming_button?'>session_user_has_streaming_button?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#PROVIDE_CLASS_STREAM-constant" title="PROVIDE_CLASS_STREAM (constant)">PROVIDE_CLASS_STREAM</a></span></span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_class_stream_link_for_session_user'>class_stream_link_for_session_user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:homeschooling</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_jump_table_direction-instance_method">
  
    #<strong>session_user_jump_table_direction</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


469
470
471
472
473
474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 469</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_jump_table_direction'>session_user_jump_table_direction</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_method'>method</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.jump_table_direction, &quot;rows&quot;) AS method;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_otp_qr_code-instance_method">
  
    #<strong>session_user_otp_qr_code</strong>(reveal = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/otp.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_otp_qr_code'>session_user_otp_qr_code</span><span class='lparen'>(</span><span class='id identifier rubyid_reveal'>reveal</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_otp_token'>otp_token</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:otp_token</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_otp_token'>otp_token</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(redacted)</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_reveal'>reveal</span>
    <span class='id identifier rubyid_totp'>totp</span> <span class='op'>=</span> <span class='const'>ROTP</span><span class='op'>::</span><span class='const'>TOTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_otp_token'>otp_token</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dashboard</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> (dev)</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_totp'>totp</span><span class='period'>.</span><span class='id identifier rubyid_provisioning_uri'>provisioning_uri</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_qrcode'>qrcode</span> <span class='op'>=</span> <span class='const'>RQRCode</span><span class='op'>::</span><span class='const'>QRCode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='int'>7</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_svg'>svg</span> <span class='op'>=</span> <span class='id identifier rubyid_qrcode'>qrcode</span><span class='period'>.</span><span class='id identifier rubyid_as_svg'>as_svg</span><span class='lparen'>(</span><span class='label'>offset:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>shape_rendering:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>crispEdges</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                        <span class='label'>module_size:</span> <span class='int'>4</span><span class='comma'>,</span> <span class='label'>standalone:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_svg'>svg</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_otp_token_good_for_tresor-instance_method">
  
    #<strong>session_user_otp_token_good_for_tresor</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/otp.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_otp_token_good_for_tresor'>session_user_otp_token_good_for_tresor</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_otp_token'>otp_token</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:otp_token</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_otp_token'>otp_token</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:otp_token_changed</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_preferred_login_method-instance_method">
  
    #<strong>session_user_preferred_login_method</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


448
449
450
451
452
453
454
455</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 448</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_preferred_login_method'>session_user_preferred_login_method</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_method'>method</span> <span class='op'>=</span> <span class='id identifier rubyid_neo4j_query_expect_one'>neo4j_query_expect_one</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;~END_OF_QUERY</span><span class='comma'>,</span> <span class='symbol'>:email</span> <span class='op'>=&gt;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='tstring_content'>        MATCH (u:User {email: $email})
</span><span class='tstring_content'>        RETURN COALESCE(u.preferred_login_method, &quot;email&quot;) AS method;
</span><span class='heredoc_end'>    END_OF_QUERY
</span>    <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_telephone_number-instance_method">
  
    #<strong>session_user_telephone_number</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/sms.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_telephone_number'>session_user_telephone_number</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_telephone_number'>telephone_number</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:telephone_number</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_telephone_number'>telephone_number</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(redacted)</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_user_telephone_number_good_for_tresor-instance_method">
  
    #<strong>session_user_telephone_number_good_for_tresor</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/sms.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_session_user_telephone_number_good_for_tresor'>session_user_telephone_number_good_for_tresor</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_require_user!'>require_user!</span>
    <span class='id identifier rubyid_telephone_number'>telephone_number</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:telephone_number</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_telephone_number'>telephone_number</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:telephone_number_changed</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shift_hue-instance_method">
  
    #<strong>shift_hue</strong>(c, f = 60)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/color.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shift_hue'><span class='object_link'><a href="top-level-namespace.html#shift_hue-instance_method" title="#shift_hue (method)">shift_hue</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='int'>60</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span> <span class='op'>=</span> <span class='id identifier rubyid_rgb_to_hsv'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hsv-instance_method" title="#rgb_to_hsv (method)">rgb_to_hsv</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hex_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hex_to_rgb-instance_method" title="#hex_to_rgb (method)">hex_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hsv'>hsv</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_hsv'>hsv</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='float'>360.0</span>
    <span class='id identifier rubyid_rgb_to_hex'><span class='object_link'><a href="top-level-namespace.html#rgb_to_hex-instance_method" title="#rgb_to_hex (method)">rgb_to_hex</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv_to_rgb'><span class='object_link'><a href="top-level-namespace.html#hsv_to_rgb-instance_method" title="#hsv_to_rgb (method)">hsv_to_rgb</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hsv'>hsv</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skytale-instance_method">
  
    #<strong>skytale</strong>(s, w)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/cypher.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skytale'>skytale</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>%</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>!=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_s'>s</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Z</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_w'>w</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
        <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
            <span class='id identifier rubyid_t'>t</span> <span class='op'>+=</span> <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='id identifier rubyid_w'>w</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_t'>t</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tablet_logged_in?-instance_method">
  
    #<strong>tablet_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tablet_logged_in?'>tablet_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="teacher_for_lesson_or_ha_amt_logged_in?-instance_method">
  
    #<strong>teacher_for_lesson_or_ha_amt_logged_in?</strong>(lesson_key)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_teacher_for_lesson_or_ha_amt_logged_in?'>teacher_for_lesson_or_ha_amt_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_get_ha_amt_lesson_keys'>get_ha_amt_lesson_keys</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lesson_key'>lesson_key</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="teacher_logged_in?-instance_method">
  
    #<strong>teacher_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:teacher</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="teacher_tablet_logged_in?-instance_method">
  
    #<strong>teacher_tablet_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_teacher_tablet_logged_in?'>teacher_tablet_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:is_tablet</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:tablet_type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:teacher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="technikteam_logged_in?-instance_method">
  
    #<strong>technikteam_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_technikteam_logged_in?'>technikteam_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:technikteam</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="test_request_parameter-instance_method">
  
    #<strong>test_request_parameter</strong>(data, key, options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1523
1524
1525
1526
1527
1528
1529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1523</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_request_parameter'>test_request_parameter</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:types</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'> is a </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="String.html" title="String (class)">String</a></span></span>
        <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_value_lengths</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:max_string_length</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>too_much_data</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_devices-instance_method">
  
    #<strong>this_is_a_page_for_devices</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_devices'>this_is_a_page_for_devices</span>
    <span class='kw'>if</span> <span class='ivar'>@session_device</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_admins-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_admins</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_admins'>this_is_a_page_for_logged_in_admins</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_admin_logged_in?'>admin_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_gev-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_gev</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 304</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_gev'>this_is_a_page_for_logged_in_gev</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_gev_logged_in?'>gev_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_teachers-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_teachers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_teachers'>this_is_a_page_for_logged_in_teachers</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_users-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_users</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_users'>this_is_a_page_for_logged_in_users</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_users_who_can_manage_salzh-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_users_who_can_manage_salzh</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 298</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_users_who_can_manage_salzh'>this_is_a_page_for_logged_in_users_who_can_manage_salzh</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_can_manage_salzh_logged_in?'>can_manage_salzh_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_logged_in_zeugnis_admins-instance_method">
  
    #<strong>this_is_a_page_for_logged_in_zeugnis_admins</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325
326</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_logged_in_zeugnis_admins'>this_is_a_page_for_logged_in_zeugnis_admins</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_zeugnis_admin_logged_in?'>zeugnis_admin_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_people_who_can_manage_monitors-instance_method">
  
    #<strong>this_is_a_page_for_people_who_can_manage_monitors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_people_who_can_manage_monitors'>this_is_a_page_for_people_who_can_manage_monitors</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_people_who_can_manage_news-instance_method">
  
    #<strong>this_is_a_page_for_people_who_can_manage_news</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_people_who_can_manage_news'>this_is_a_page_for_people_who_can_manage_news</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_people_who_can_upload_files-instance_method">
  
    #<strong>this_is_a_page_for_people_who_can_upload_files</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 334</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_people_who_can_upload_files'>this_is_a_page_for_people_who_can_upload_files</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user_who_can_upload_files_logged_in?'>user_who_can_upload_files_logged_in?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_phishing_training-instance_method">
  
    #<strong>this_is_a_page_for_phishing_training</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Put this on top of a webpage to assert that this page can be opened during a phishing training only</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361
362
363</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 359</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_phishing_training'>this_is_a_page_for_phishing_training</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_running_phishing_training?'>running_phishing_training?</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_is_a_page_for_user_with_role-instance_method">
  
    #<strong>this_is_a_page_for_user_with_role</strong>(role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_is_a_page_for_user_with_role'>this_is_a_page_for_user_with_role</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_redirect'>redirect</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#WEB_ROOT-constant" title="WEB_ROOT (constant)">WEB_ROOT</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>303</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tr_klasse-instance_method">
  
    #<strong>tr_klasse</strong>(klasse)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


509
510
511</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 509</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tr_klasse'>tr_klasse</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="top-level-namespace.html#KLASSEN_TR-constant" title="KLASSEN_TR (constant)">KLASSEN_TR</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_klasse'>klasse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tresor_second_factor_ttl-instance_method">
  
    #<strong>tresor_second_factor_ttl</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


888
889
890
891
892
893
894
895</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/login.rb', line 888</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tresor_second_factor_ttl'>tresor_second_factor_ttl</span>
    <span class='id identifier rubyid_today'>today</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_zeugnis_admin_logged_in?'>zeugnis_admin_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#ZEUGNISKONFERENZEN-constant" title="ZEUGNISKONFERENZEN (constant)">ZEUGNISKONFERENZEN</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_today'>today</span><span class='rparen'>)</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#TRESOR_SECOND_FACTOR_TTL-constant" title="TRESOR_SECOND_FACTOR_TTL (constant)">TRESOR_SECOND_FACTOR_TTL</a></span></span> <span class='op'>*</span> <span class='int'>4</span>
    <span class='kw'>else</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#TRESOR_SECOND_FACTOR_TTL-constant" title="TRESOR_SECOND_FACTOR_TTL (constant)">TRESOR_SECOND_FACTOR_TTL</a></span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_send_invites-instance_method">
  
    #<strong>trigger_send_invites</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1866
1867
1868
1869
1870
1871
1872
1873</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1866</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_send_invites'>trigger_send_invites</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_http'>http</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invitation_bot</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8080</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='op'>::</span><span class='const'>Get</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/api/send_invites</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_stats_update-instance_method">
  
    #<strong>trigger_stats_update</strong>(which)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1848
1849
1850
1851
1852
1853
1854
1855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1848</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_stats_update'>trigger_stats_update</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_http'>http</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stats_bot</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8080</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='op'>::</span><span class='const'>Get</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/api/update/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_update-instance_method">
  
    #<strong>trigger_update</strong>(which)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1839
1840
1841
1842
1843
1844
1845
1846</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1839</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_update'>trigger_update</span><span class='lparen'>(</span><span class='id identifier rubyid_which'>which</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_http'>http</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>timetable</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8080</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='op'>::</span><span class='const'>Get</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/api/update/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trigger_update_images-instance_method">
  
    #<strong>trigger_update_images</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1857
1858
1859
1860
1861
1862
1863
1864</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/main.rb', line 1857</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trigger_update_images'>trigger_update_images</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_http'>http</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>image_bot</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>8080</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='op'>::</span><span class='const'>Get</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/api/update_all</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_monitors-instance_method">
  
    #<strong>update_monitors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_monitors'>update_monitors</span>
    <span class='id identifier rubyid_update_monitors_message'>update_monitors_message</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_update_monitors_vplan'>update_monitors_vplan</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_monitors_message-instance_method">
  
    #<strong>update_monitors_message</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_monitors_message'>update_monitors_message</span>
    <span class='lparen'>(</span><span class='cvar'>@@ws_clients</span><span class='lbracket'>[</span><span class='symbol'>:monitor</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_client_id'>client_id</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_ws'>ws</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:ws</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_ws'>ws</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update_monitor_messages</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_get_monitor_messages'>get_monitor_messages</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_monitors_vplan-instance_method">
  
    #<strong>update_monitors_vplan</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/monitor.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_monitors_vplan'>update_monitors_vplan</span>
    <span class='lparen'>(</span><span class='cvar'>@@ws_clients</span><span class='lbracket'>[</span><span class='symbol'>:monitor</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_client_id'>client_id</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_ws'>ws</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='lbracket'>[</span><span class='symbol'>:ws</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_monitor_data'>monitor_data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:klassen</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:timestamp</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
        <span class='id identifier rubyid_monitor_data_path'>monitor_data_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/vplan/monitor/monitor.json</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_monitor_data_path'>monitor_data_path</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_monitor_data'>monitor_data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_monitor_data_path'>monitor_data_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_ws'>ws</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>update_vplan</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:data</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_monitor_data'>monitor_data</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_eligible_for_projekt_katalog?-instance_method">
  
    #<strong>user_eligible_for_projekt_katalog?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_eligible_for_projekt_katalog?'>user_eligible_for_projekt_katalog?</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_eligible_for_projektwahl?-instance_method">
  
    #<strong>user_eligible_for_projektwahl?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_eligible_for_projektwahl?'>user_eligible_for_projektwahl?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>3</span>
    <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&gt;=</span> <span class='int'>5</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;=</span> <span class='int'>9</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_has_role-instance_method">
  
    #<strong>user_has_role</strong>(email, role)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_has_role'>user_has_role</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_user_has_role'><span class='object_link'><a href="#user_has_role-class_method" title="Main.user_has_role (method)">user_has_role</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_icon-instance_method">
  
    #<strong>user_icon</strong>(email, c = nil)  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return a &lt;div&gt; with a background image taken from a user&#39;s Nextcloud account, with a gray background as a default fallback.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>email</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the user&#39;s email address</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>c</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a CSS class to apply to the div (e. g. avatar-lg)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the HTML string describing the &lt;div&gt;</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_icon'>user_icon</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;div style=&#39;background-image: url(</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#NEXTCLOUD_URL-constant" title="NEXTCLOUD_URL (constant)">NEXTCLOUD_URL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/index.php/avatar/</span><span class='embexpr_beg'>#{</span><span class='cvar'>@@user_info</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:nc_login</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>/128), url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mO88h8AAq0B1REmZuEAAAAASUVORK5CYII=);&#39; class=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_c'>c</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;&lt;/div&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_is_eligible_for_sms?-instance_method">
  
    #<strong>user_is_eligible_for_sms?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/sms.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_is_eligible_for_sms?'>user_is_eligible_for_sms?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_is_eligible_for_tresor?-instance_method">
  
    #<strong>user_is_eligible_for_tresor?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/tresor.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_is_eligible_for_tresor?'>user_is_eligible_for_tresor?</span>
    <span class='comment'># return admin_logged_in?
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_teacher_logged_in?'>teacher_logged_in?</span>
    <span class='comment'># return false unless user_logged_in?
</span>    <span class='comment'># return false if DATENTRESOR_UNLOCKED_FOR.nil?
</span>    <span class='comment'># return false unless teacher_logged_in?
</span>    <span class='comment'># return true if teacher_logged_in? &amp;&amp; DEVELOPMENT
</span>    <span class='comment'># return teacher_logged_in? &amp;&amp; DATENTRESOR_UNLOCKED_FOR.include?(@session_user[:email])
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_logged_in?-instance_method">
  
    #<strong>user_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span>
    <span class='op'>!</span><span class='ivar'>@session_user</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_was_eligible_for_projektwahl?-instance_method">
  
    #<strong>user_was_eligible_for_projektwahl?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/projekte.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_was_eligible_for_projektwahl?'>user_was_eligible_for_projektwahl?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_schueler_logged_in?'>schueler_logged_in?</span>
    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_projekttage_phase'>projekttage_phase</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>4</span>
    <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>=</span> <span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:klassenstufe</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>7</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&gt;=</span> <span class='int'>5</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_klassenstufe'>klassenstufe</span> <span class='op'>&lt;=</span> <span class='int'>9</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_manage_antikenfahrt_logged_in?-instance_method">
  
    #<strong>user_who_can_manage_antikenfahrt_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_manage_antikenfahrt_logged_in?'>user_who_can_manage_antikenfahrt_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_antikenfahrt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_manage_monitors_logged_in?-instance_method">
  
    #<strong>user_who_can_manage_monitors_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_manage_monitors_logged_in?'>user_who_can_manage_monitors_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_monitors</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_manage_news_logged_in?-instance_method">
  
    #<strong>user_who_can_manage_news_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_manage_news_logged_in?'>user_who_can_manage_news_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_news</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_manage_tablets_logged_in?-instance_method">
  
    #<strong>user_who_can_manage_tablets_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_manage_tablets_logged_in?'>user_who_can_manage_tablets_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_manage_tablets</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_report_tech_problems_logged_in?-instance_method">
  
    #<strong>user_who_can_report_tech_problems_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_report_tech_problems_logged_in?'>user_who_can_report_tech_problems_logged_in?</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_check_has_technikamt'>check_has_technikamt</span><span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_upload_files_logged_in?-instance_method">
  
    #<strong>user_who_can_upload_files_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_upload_files_logged_in?'>user_who_can_upload_files_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_upload_files</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_who_can_use_aula_logged_in?-instance_method">
  
    #<strong>user_who_can_use_aula_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_who_can_use_aula_logged_in?'>user_who_can_use_aula_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:can_use_aula</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_with_role_logged_in?-instance_method">
  
    #<strong>user_with_role_logged_in?</strong>(role)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_assert'><span class='object_link'><a href="top-level-namespace.html#assert-instance_method" title="#assert (method)">assert</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#AVAILABLE_ROLES-constant" title="AVAILABLE_ROLES (constant)">AVAILABLE_ROLES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown role: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_role'>role</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_user_logged_in?'>user_logged_in?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='ivar'>@session_user</span><span class='lbracket'>[</span><span class='symbol'>:roles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_role'>role</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="vote_codes_from_token-instance_method">
  
    #<strong>vote_codes_from_token</strong>(vote_code, token, _count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/vote.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vote_codes_from_token'>vote_codes_from_token</span><span class='lparen'>(</span><span class='id identifier rubyid_vote_code'>vote_code</span><span class='comma'>,</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='id identifier rubyid__count'>_count</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not used anymore</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid__count'>_count</span> <span class='op'>+</span> <span class='int'>20</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>*</span> <span class='int'>4</span>
    <span class='id identifier rubyid_vote_code'>vote_code</span> <span class='op'>=</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%04d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_vote_code'>vote_code</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_codes'>codes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_codes'>codes</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_count'>count</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_token'>token</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA1</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_vote_code'>vote_code</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='int'>4</span><span class='comma'>,</span> <span class='id identifier rubyid_vote_code'>vote_code</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='int'>7</span><span class='comma'>,</span> <span class='id identifier rubyid_vote_code'>vote_code</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='id identifier rubyid_vote_code'>vote_code</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_codes'>codes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_code'>code</span> <span class='kw'>unless</span> <span class='id identifier rubyid_codes'>codes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_codes'>codes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zeugnis_admin_logged_in?-instance_method">
  
    #<strong>zeugnis_admin_logged_in?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/include/user.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_zeugnis_admin_logged_in?'>zeugnis_admin_logged_in?</span>
    <span class='id identifier rubyid_user_with_role_logged_in?'>user_with_role_logged_in?</span><span class='lparen'>(</span><span class='symbol'>:zeugnis_admin</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.2).
</div>

    </div>
  </body>
</html>